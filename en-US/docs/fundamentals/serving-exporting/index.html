<!DOCTYPE html><html lang=en-US class=light><head><base href=https://framesurge.sh/perseus/><meta charset=UTF-8><meta name=viewport content="width=device-width, initial-scale=1.0"><link rel=stylesheet href=.perseus/static/tailwind.css><link rel=stylesheet href=.perseus/static/styles/style.css><script type=module>window.__PERSEUS_RENDER_CFG = `{"docs/next/state/build":"docs","docs/0.3.0-0.3.3/plugins/using":"docs","docs/0.3.4/reference/snooping":"docs","docs/0.4.x/quickstart":"docs","docs/0.3.4/advanced/initial-loads":"docs","docs/capsules/intro":"docs","docs/0.3.4/reference/plugins/security":"docs","docs/next/first-app/deploying":"docs","docs/0.4.x/fundamentals/error-views":"docs","docs/0.3.0-0.3.3/testing/intro":"docs","docs/0.3.4/advanced/intro":"docs","docs/0.4.x/state/request":"docs","docs/next/fundamentals/error-views":"docs","docs/0.4.x/fundamentals/js-interop":"docs","docs/0.4.x/fundamentals/reactor":"docs","docs/0.3.4/reference/templates/intro":"docs","docs/0.3.4/reference/static-content":"docs","docs/0.3.0-0.3.3/hello-world":"docs","docs/0.3.0-0.3.3/plugins/intro":"docs","docs/0.2.x/strategies/incremental":"docs","docs/0.3.4/advanced/arch":"docs","docs/0.4.x/fundamentals/styling":"docs","docs/fundamentals/js-interop":"docs","docs/0.2.x/strategies/revalidation":"docs","docs/0.3.4/reference/plugins/intro":"docs","docs/0.1.x/arch":"docs","docs/0.3.0-0.3.3/plugins/functional":"docs","docs/0.3.4/reference/testing/manual":"docs","docs/0.2.x/strategies/amalgamation":"docs","docs/0.2.x/i18n/other-engines":"docs","docs/0.4.x/capsules/using":"docs","docs/0.1.x/building":"docs","docs/0.2.x/ejecting":"docs","docs/0.3.4/reference/strategies/build-paths":"docs","docs/0.4.x/fundamentals/static-content":"docs","docs/0.1.x/config_managers":"docs","docs/0.3.4/reference/deploying/relative-paths":"docs","docs/0.3.4/reference/i18n/intro":"docs","docs/0.4.x/fundamentals/i18n":"docs","docs/0.3.4/reference/stores":"docs","docs/0.3.4/reference/strategies/build-state":"docs","docs/0.4.x/fundamentals/plugins":"docs","docs/0.3.4/tutorials/hello-world":"docs","docs/0.3.4/reference/strategies/incremental":"docs","docs/0.1.x/intro":"docs","docs/next/capsules/intro":"docs","docs/0.4.x/migrating":"docs","docs/first-app/dev-cycle":"docs","docs/0.2.x/debugging":"docs","docs/0.2.x/second-app":"docs","docs/0.2.x/deploying/exporting":"docs","docs/0.1.x/strategies/intro":"docs","docs/0.3.4/reference/deploying/serverful":"docs","docs/0.4.x/state/build":"docs","docs/0.4.x/state/suspense":"docs","docs/0.3.4/reference/define-app":"docs","docs/0.3.0-0.3.3/styling":"docs","docs/0.3.0-0.3.3/deploying/serverless":"docs","docs/0.3.4/reference/plugins/functional":"docs","docs/next/state/suspense":"docs","docs/fundamentals/serving-exporting":"docs","docs/0.4.x/fundamentals/serving-exporting":"docs","docs/0.3.0-0.3.3/i18n/intro":"docs","docs/0.1.x/tutorials/first_app/setup":"docs","docs/next/state/helper":"docs","docs/fundamentals/error-views":"docs","docs/0.1.x/strategies/build_state":"docs","docs/0.2.x/testing/intro":"docs","docs/0.4.x/fundamentals/testing":"docs","docs/0.3.4/reference/templates/router-state":"docs","docs/0.4.x/core-principles":"docs","docs/0.3.0-0.3.3/static-content":"docs","docs/0.2.x/config-managers":"docs","docs/0.2.x/error-pages":"docs","docs/next/fundamentals/debugging":"docs","docs/state/amalgamation":"docs","docs/0.3.4/reference/deploying/docker":"docs","docs/0.3.0-0.3.3/deploying/size":"docs","docs/0.3.4/reference/deploying/intro":"docs","docs/0.2.x/strategies/build-paths":"docs","docs/0.3.4/reference/state/hsr":"docs","docs/0.3.4/reference/testing/fantoccini-basics":"docs","docs/next/migrating":"docs","docs/0.1.x/tutorials/first_app/intro":"docs","docs/next/fundamentals/perseus-app":"docs","docs/0.3.0-0.3.3/plugins/publishing":"docs","docs/0.3.4/reference/hydration":"docs","docs/0.3.4/reference/cli":"docs","docs/0.3.4/reference/strategies/intro":"docs","docs/0.3.4/reference/i18n/defining":"docs","docs/0.3.0-0.3.3/templates/setting-headers":"docs","docs/0.3.4/reference/deploying/size":"docs","docs/0.2.x/advanced/intro":"docs","docs/0.4.x/fundamentals/head-headers":"docs","docs/0.2.x/views":"docs","docs/next/state/revalidation":"docs","docs/0.1.x/error_pages":"docs","docs/fundamentals/debugging":"docs","docs/0.2.x/styling":"docs","docs/0.3.0-0.3.3/plugins/tinker":"docs","docs/0.2.x/templates/setting-headers":"docs","docs/next/state/manual":"docs","docs/0.3.0-0.3.3/deploying/docker":"docs","docs/0.3.0-0.3.3/strategies/revalidation":"docs","docs/next/state/browser":"docs","docs/0.1.x/cli":"docs","docs/0.4.x/state/revalidation":"docs","docs/0.2.x/deploying/intro":"docs","docs/0.3.4/reference/i18n/other-engines":"docs","docs/0.1.x/strategies/build_paths":"docs","docs/0.2.x/testing/manual":"docs","docs/0.3.0-0.3.3/plugins/security":"docs","docs/0.3.0-0.3.3/i18n/defining":"docs","docs/faq":"docs","docs/0.3.0-0.3.3/strategies/intro":"docs","docs/0.3.0-0.3.3/advanced/define_app":"docs","docs/fundamentals/compilation-times":"docs","docs/0.3.4/reference/state/freezing":"docs","docs/0.3.0-0.3.3/pitfalls-and-bugs":"docs","docs/next/fundamentals/serving-exporting":"docs","docs/0.2.x/strategies/intro":"docs","docs/0.3.4/advanced/routing":"docs","docs/0.3.4/reference/styling":"docs","docs/state/incremental":"docs","docs/0.3.0-0.3.3/deploying/relative-paths":"docs","docs/next/core-principles":"docs","docs/0.4.x/state/manual":"docs","docs/quickstart":"docs","docs/0.4.x/first-app/error-handling":"docs","docs/0.1.x/strategies/incremental":"docs","docs/0.3.0-0.3.3/debugging":"docs","docs/0.3.4/reference/strategies/request-state":"docs","docs/0.4.x/fundamentals/preloading":"docs","docs/0.4.x/fundamentals/perseus-app":"docs","docs/0.3.4/reference/pitfalls-and-bugs":"docs","docs/0.3.0-0.3.3/testing/manual":"docs","docs/0.2.x/strategies/request-state":"docs","docs/next/fundamentals/static-content":"docs","docs/0.2.x/i18n/using":"docs","docs/0.3.0-0.3.3/plugins/writing":"docs","docs/0.4.x/first-app/installation":"docs","docs/0.1.x/integrations/actix-web":"docs","docs/0.3.0-0.3.3/deploying/intro":"docs","docs/fundamentals/reactor":"docs","docs/0.3.0-0.3.3/define-app":"docs","docs/0.1.x/templates":"docs","docs/migrating":"docs","docs":"docs","docs/0.3.0-0.3.3/intro":"docs","docs/0.3.0-0.3.3/testing/checkpoints":"docs","docs/0.3.4/core-principles":"docs","docs/0.4.x/first-app/dev-cycle":"docs","docs/0.2.x/strategies/build-state":"docs","docs/0.3.4/reference/views":"docs","docs/0.3.4/reference/i18n/using":"docs","docs/next/fundamentals/reactor":"docs","docs/0.4.x/first-app/deploying":"docs","docs/next/capsules/capsules-vs-components":"docs","docs/state/request":"docs","docs/state/browser":"docs","docs/0.2.x/advanced/initial-loads":"docs","docs/next/capsules/using":"docs","docs/0.3.4/reference/templates/setting-headers":"docs","docs/next/fundamentals/hydration":"docs","docs/0.3.4/reference/server-communication":"docs","docs/next/fundamentals/compilation-times":"docs","docs/0.4.x/capsules/intro":"docs","docs/fundamentals/routing":"docs","docs/0.3.0-0.3.3/strategies/build-state":"docs","docs/0.3.4/tutorials/auth":"docs","docs/0.1.x/tutorials/first_app/app":"docs","docs/state/manual":"docs","docs/0.3.4/reference/plugins/tinker":"docs","docs/0.3.0-0.3.3/what-is-perseus":"docs","docs/first-app/deploying":"docs","docs/0.4.x/what-is-perseus":"docs","docs/0.3.4/reference/templates/metadata-modification":"docs","docs/0.4.x/fundamentals/debugging":"docs","docs/next/first-app/error-handling":"docs","docs/0.2.x/i18n/defining":"docs","docs/0.4.x/state/freezing-thawing":"docs","docs/0.3.4/reference/perseus-app":"docs","docs/0.2.x/advanced/arch":"docs","docs/0.3.4/reference/state/global":"docs","":"","docs/0.2.x/i18n/intro":"docs","docs/0.1.x/strategies/revalidation":"docs","docs/state/helper":"docs","docs/core-principles":"docs","docs/0.3.0-0.3.3/second-app":"docs","docs/0.3.4/reference/error-pages":"docs","docs/0.3.0-0.3.3/advanced/initial-loads":"docs","docs/first-app/installation":"docs","docs/0.3.0-0.3.3/advanced/intro":"docs","docs/next/state/intro":"docs","docs/0.3.0-0.3.3/server-communication":"docs","docs/next/intro":"docs","docs/0.4.x/state/global":"docs","plugins":"plugins","docs/next/first-app/installation":"docs","docs/fundamentals/plugins":"docs","docs/0.3.4/reference/state/idb-freezing":"docs","docs/0.1.x/routing":"docs","docs/0.3.0-0.3.3/advanced/routing":"docs","docs/fundamentals/preloading":"docs","docs/0.3.0-0.3.3/error-pages":"docs","docs/0.3.0-0.3.3/i18n/translations-managers":"docs","docs/0.3.0-0.3.3/strategies/incremental":"docs","docs/next/fundamentals/plugins":"docs","docs/0.4.x/faq":"docs","docs/fundamentals/i18n":"docs","docs/0.2.x/i18n/translations-managers":"docs","docs/0.3.4/reference/plugins/using":"docs","docs/next/quickstart":"docs","docs/next/what-is-perseus":"docs","docs/0.2.x/hello-world":"docs","docs/0.3.0-0.3.3/advanced/subsequent-loads":"docs","docs/0.3.0-0.3.3/templates/intro":"docs","docs/next/state/amalgamation":"docs","docs/0.1.x/tutorials/first_app/template":"docs","docs/0.4.x/capsules/capsules-vs-components":"docs","docs/next/fundamentals/testing":"docs","docs/fundamentals/testing":"docs","docs/0.3.0-0.3.3/i18n/using":"docs","docs/capsules/capsules-vs-components":"docs","docs/next/fundamentals/head-headers":"docs","docs/0.3.0-0.3.3/cli":"docs","docs/first-app/defining":"docs","docs/next/state/freezing-thawing":"docs","docs/0.3.0-0.3.3/views":"docs","docs/0.3.4/reference/exporting":"docs","docs/state/suspense":"docs","docs/0.4.x/first-app/generating-pages":"docs","docs/fundamentals/styling":"docs","docs/0.3.4/reference/testing/checkpoints":"docs","docs/0.3.4/what-is-perseus":"docs","docs/first-app/generating-pages":"docs","comparisons":"comparisons","docs/state/intro":"docs","docs/0.4.x/state/amalgamation":"docs","docs/0.3.4/intro":"docs","docs/0.3.0-0.3.3/strategies/build-paths":"docs","docs/0.2.x/advanced/subsequent-loads":"docs","docs/0.4.x/fundamentals/hydration":"docs","docs/state/revalidation":"docs","docs/0.4.x/state/intro":"docs","docs/0.3.4/tutorials/second-app":"docs","docs/0.3.4/reference/strategies/revalidation":"docs","docs/0.2.x/templates/intro":"docs","docs/first-app/error-handling":"docs","docs/next/state/request":"docs","docs/next/fundamentals/routing":"docs","docs/fundamentals/static-content":"docs","docs/0.2.x/intro":"docs","docs/next/state/global":"docs","docs/0.3.4/advanced/route-announcer":"docs","docs/next/first-app/dev-cycle":"docs","docs/0.3.4/reference/i18n/translations-managers":"docs","docs/0.3.4/reference/live-reloading":"docs","docs/0.4.x/state/incremental":"docs","docs/0.4.x/intro":"docs","docs/0.3.4/reference/plugins/publishing":"docs","docs/fundamentals/hydration":"docs","docs/0.3.0-0.3.3/strategies/request-state":"docs","docs/0.2.x/what-is-perseus":"docs","docs/0.4.x/first-app/defining":"docs","docs/next/first-app/generating-pages":"docs","docs/0.2.x/advanced/routing":"docs","docs/0.3.0-0.3.3/exporting":"docs","docs/0.3.0-0.3.3/i18n/other-engines":"docs","docs/next/fundamentals/styling":"docs","docs/0.3.4/reference/debugging":"docs","docs/0.2.x/testing/fantoccini-basics":"docs","docs/0.2.x/updating":"docs","docs/0.3.4/reference/updating":"docs","docs/0.3.4/reference/ejecting":"docs","docs/0.3.4/reference/plugins/control":"docs","docs/0.3.0-0.3.3/strategies/amalgamation":"docs","docs/0.3.0-0.3.3/testing/fantoccini-basics":"docs","docs/0.3.4/reference/plugins/writing":"docs","docs/0.4.x/fundamentals/routing":"docs","docs/state/freezing-thawing":"docs","docs/0.2.x/testing/checkpoints":"docs","docs/0.4.x/state/helper":"docs","docs/0.4.x/state/browser":"docs","docs/next/fundamentals/i18n":"docs","docs/fundamentals/perseus-app":"docs","docs/0.3.0-0.3.3/templates/metadata-modification":"docs","docs/next/faq":"docs","docs/0.3.0-0.3.3/snooping":"docs","docs/0.2.x/templates/metadata-modification":"docs","docs/capsules/using":"docs","docs/0.3.0-0.3.3/hydration":"docs","docs/what-is-perseus":"docs","docs/0.2.x/define-app":"docs","docs/0.2.x/cli":"docs","docs/0.3.0-0.3.3/plugins/control":"docs","docs/state/build":"docs","docs/0.2.x/static-content":"docs","docs/0.3.0-0.3.3/updating":"docs","docs/0.3.0-0.3.3/deploying/serverful":"docs","docs/0.3.4/reference/deploying/serverless":"docs","docs/0.1.x/serving":"docs","docs/0.1.x/setup":"docs","docs/intro":"docs","docs/next/fundamentals/js-interop":"docs","docs/fundamentals/head-headers":"docs","docs/0.3.4/reference/state/rx":"docs","docs/0.3.0-0.3.3/ejecting":"docs","docs/0.3.4/reference/engines":"docs","docs/0.4.x/fundamentals/compilation-times":"docs","docs/0.3.4/reference/index-view":"docs","docs/0.3.0-0.3.3/advanced/arch":"docs","docs/state/global":"docs","docs/0.3.0-0.3.3/stores":"docs","docs/next/first-app/defining":"docs","docs/0.3.4/advanced/subsequent-loads":"docs","docs/0.1.x/strategies/request_state":"docs","docs/0.3.4/reference/testing/intro":"docs","docs/next/fundamentals/preloading":"docs","docs/0.3.4/reference/strategies/amalgamation":"docs","docs/next/state/incremental":"docs"}`;

        import init from "https://framesurge.sh/perseus/.perseus/bundle.js";
        async function main() {
            await init("https://framesurge.sh/perseus/.perseus/bundle.wasm");
        }
        main();

        
        

window.__PERSEUS_GLOBAL_STATE = `null`;</script><meta itemprop=__perseus_head_boundary><title>Servers and exporting | Perseus Docs</title><link rel=stylesheet href=.perseus/static/styles/markdown.css><link rel=stylesheet href=.perseus/static/styles/docs_links_markdown.css><link rel=stylesheet href=.perseus/static/prism.css><script>
window.__PERSEUS_INITIAL_STATE = `{"content":"<h1>Servers and exporting</h1>\\n<p>There are two ways to run a Perseus app: you can <em>serve</em> it, or you can <em>export</em> it. To understand the difference, we'll need to dive a little deeper into how Perseus builds your app.</p>\\n<h2>1. Preparation</h2>\\n<p>In the first stage, Perseus compiles both itself and your project, and then takes a look at your <code>PerseusApp</code>. This tells it what to expect in terms of internationalization, templates, and capsules, and allows it to formulate a plan to move ahead with.</p>\\n<h2>2. Building</h2>\\n<p>Now, Perseus calls the build-time logic on every single template in your app, building as many as it possibly can. Those with capsules that would stall this process are rescheduled if that's permitted. Once this stage is done, Perseus compiles the <em>render configuration</em>, which defines all the templates in your app, and then terminates.</p>\\n<h2>3. Wasm building</h2>\\n<p><em>(White lie: this actually happens in parallel with steps 1 and 2.)</em></p>\\n<p>Next, Perseus will compile itself and your app to Wasm. Once this is done, there's no further processing performed on the Wasm bundle unless we're in release mode (in which case it's optimized to the nth degree).</p>\\n<h2>4a. Serving</h2>\\n<p>From here, if you've chosen to serve your app, Perseus will take the engine it used to build your app and repurpose that for serving your app (one binary does both, reducing compilation times substantially). This will spin up a server according to your <code>#[perseus::main(..)]</code> settings, and that will run until your terminate it, serving your app where you've specified.</p>\\n<p>This server responds to each request by passing it through special pathways that are capable of calling request-time logic, state amalgamation, revalidation, and all manner of other things. This part of Perseus involves <em>just-in-time nested capsule resolution</em>, which is by far the most complex part of Perseus. All this has to be done upon receiving a user's request, so this binary is deliberately optimized for speed (meaning it can easily blow out to very large sizes) in release mode.</p>\\n<h3>Server integrations</h3>\\n<p>Since Perseus tries to be as open as possible, it allows you to provide a custom function to <code>#[perseus::main(..)]</code> that will run your server. Usually, you'll just use the default server provided by one of the integrations, but you can also customize this however you like..</p>\\n<p>Server integrations are special crates, like <code>perseus-axum</code>, that provide the boilerplate to host Perseus through a particular server framework. Currently, Perseus has server integrations for <a href=\\"https://github.com/actix/actix-web\\">Actix Web</a>, <a href=\\"https://github.com/seanmonstar/warp\\">Warp</a> (although Warp itself appears to be unmaintained), and <a href=\\"https://github.com/tokio-rs/axum\\">Axum</a>. All of these have a <code>dflt-server</code> feature flag, which you can enable to gain access to the <code>perseus-&lt;integration-name&gt;::dflt_server</code> function, which will spin up a server that just hosts Perseus.</p>\\n<p>However, most apps also have several API routes associated with them, especially if you're working with a database. Since you can provide a custom function to host Perseus, you can also add arbitrary API routes. You can take a look at the <a href=\\"https://github.com/framesurge/perseus/tree/main/examples/core/custom_server\\">custom server example</a> for further details on this, or take a look at the source code for the server integration you're using.</p>\\n<p><em>Note: due to <a href=\\"https://github.com/seanmonstar/warp/issues/171\\">this bug</a>, the Warp integration must currently be used with the <a href=\\"https://crates.io/crates/warp-fix-171\\"><code>warp-fix-171</code></a> crate, rather than the <code>warp</code> crate itself. As Warp itself appears to no longer be maintained, this situation is unlikely to change any time soon.</em></p>\\n<h4>Writing a server integration</h4>\\n<p>If you're unhappy with the defaults a particualr server integration provides, you are <em>strongly</em> encouraged to modify it yourself, which isn't a difficult process at all. Deliberately, Perseus abstracts nearly all serving functionality into the core, behind a type called <code>Turbine</code>, a static reference to which is provided to server integrations. This means all you're doing in a server integration is spinning up the right routes. In fact, all server integrations follow a pre-defined pattern of exactly what they have to do, making it much easier to write and modify them for your needs. If you really want, you can even fly solo without a server integration, and implement everything yourself (although this is not recommended unless you have very specific requirements).</p>\\n<p>Currently, Perseus has no support for arbitrary middleware, and modifying the server integration is the only way to do this. Bear in mind, however, that the Axum integration is only one file with 173 lines of code and comments in it --- these integrations are designed to be tweaked!</p>\\n<h2>4b. Exporting</h2>\\n<p>Alternately, if you've chosen to export, Perseus will mimic what the server does a little. It will first rearrange all the files the build process generated into folders that mimic the structure of the requests the client will send (e.g. things in <code>dist/static</code> get moved to <code>dist/exported/.perseus/static</code>), and then it will loop through all the pages and create initial load files for all of them. If you were serving your app, Perseus would insert page fragments into your <em>index view</em> at request-time, but exported apps do this ahead-of-time so no processing is required at request-time.</p>\\n<p>The output of exporting is a folder (<code>dist/exported</code>) that contains everything needed to run your app. Importantly, exported apps don't have access to any request-time features, like incremental generation or revalidation, and using any of these will cause the build process to neatly fail. However, exported apps are often a lot easier to deploy. For example, deploying this website is just a matter of uploading the generated static files to the <code>gh-pages</code> branch, and GitHub oes the rest for us (because there's no server involved, it's much easier to orchestrate these kinds of deployments). Exported apps are also usually cheaper to host.</p>\\n<p>When you run <code>perseus deploy -e</code>, Perseus will build your Wasm in release mode and move everything into a <code>pkg/</code> folder that's fully optimized for production.</p>\\n<p><em>Note: <code>perseus export -s</code> exists to spin up a miniature file server to avooid your needing to bring your own in development.</em></p>\\n<h3>Error pages in exported apps</h3>\\n<p>One thing exported apps often struggle with is proper error handling. Once the Wasm bundle has been delivered to the client, they're fine and dandy, and can display all the errors they like, but the server-side is trickier. When Perseus controls it, it can carefully format error pages with exactly the right information, but typical file servers aren't quite so subtle. Especially for internationalized apps, this can be a problem. The best solution is to export your error pages to static files, which can be done like so:</p>\\n<pre><code class=\\"language-sh\\">perseus export-error-page --code 404 --output pkg/404.html\\n</code></pre>\\n<p>Here, we export the 404 page to <code>pkg/404.html</code>, where is will be picked up and served in the event of a 404 error by most file hosts. However, since we don't know the user's locale in advance, we can't localize this page appropriately, or even send the right translations. For apps not using i18n, this won't be a problem, but i18n-ed apps should prefer serving over exporting where possible.</p>\\n<p>Note that adding <code>-s</code> to a <code>perseus export</code> command in development will automatically export your 404 page, but the deployment system will not do this, so you may wish to make this a separate stage in your deployment process, depending on whether or not your file host supports this pattern.</p>\\n","current_version":"0.4.x","manifest":{"0.1.x":{"docs_rs":"0.1","git":"v0.1.4","state":"outdated"},"0.2.x":{"docs_rs":"0.2","git":"v0.2.3","state":"outdated"},"0.3.0-0.3.3":{"docs_rs":"0.3.3","git":"v0.3.3","state":"outdated"},"0.3.4":{"docs_rs":"0.3","git":"v0.3.6","state":"outdated"},"0.4.x":{"docs_rs":"0.4","git":"HEAD","state":"stable"}},"sidebar_content":"<h1>Introduction</h1>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/intro\\">Introduction</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/quickstart\\">Quickstart</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/what-is-perseus\\">What is Perseus?</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/core-principles\\">Core Principles</a></li>\\n</ul>\\n<h1>Your First App</h1>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/first-app/installation\\">Installing Perseus</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/first-app/defining\\">Defining your app</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/first-app/generating-pages\\">Generating pages</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/first-app/dev-cycle\\">Development cycle</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/first-app/error-handling\\">Error handling</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/first-app/deploying\\">Deploying your app</a></li>\\n</ul>\\n<h1>Fundamentals</h1>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/perseus-app\\"><code>PerseusApp</code></a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/reactor\\">The reactor</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/routing\\">Routing and navigation</a>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/preloading\\">Preloading</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/i18n\\">Internationalization</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/error-views\\">Error views</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/hydration\\">Hydration</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/static-content\\">Static content</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/head-headers\\">Heads and headers</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/styling\\">Styling</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/js-interop\\">Working with JS</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/serving-exporting\\">Servers and exporting</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/debugging\\">Debugging</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/testing\\">Writing tests</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/plugins\\">Plugins</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/compilation-times\\">Improving Compilation Times</a></li>\\n</ul>\\n<h1>The State Platform</h1>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/state/intro\\">Understanding state</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/state/build\\">Build-time state</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/state/request\\">Request-time state</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/state/revalidation\\">Revalidation</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/state/incremental\\">Incremental generation</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/state/amalgamation\\">State amalgamation</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/state/browser\\">Using state</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/state/global\\">Global state</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/state/helper\\">Helper state</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/state/suspense\\">Suspended state</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/state/freezing-thawing\\">Freezing and thawing</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/state/manual\\">Manually implementing <code>ReactiveState</code></a></li>\\n</ul>\\n<h1>Capsules</h1>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/capsules/intro\\">Introduction</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/capsules/using\\">Using capsules</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/capsules/capsules-vs-components\\">Capsules vs. components</a></li>\\n</ul>\\n<h1>Miscellaneous</h1>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/migrating\\">Migrating from v0.3.x</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/faq\\">Common pitfalls and FAQs</a></li>\\n</ul>\\n","status":"Stable","title":"Servers and exporting"}`;
window.__PERSEUS_INITIAL_WIDGET_STATES = `{}`;
window.__PERSEUS_TRANSLATIONS = `{
    "perseus": "Perseus",
    "sycamore": "Sycamore",
    "navlinks.docs": "Docs",
    "navlinks.comparisons": "Comparisons",
    "navlinks.plugins": "Plugins",
    "index-intro.heading": "The Rust framework for the modern web",
    "index-intro.get-started-button": "Get started now",
    "index-intro.github-button": "GitHub",
    "index-state-gen.heading": "Generate state, on your terms",
    "index-state-gen.desc": "Perseus apps can generate state whenever they like and pass it to <a href=\\"https://github.com/sycamore-rs/sycamore\\" class=\\"underline\\">Sycamore</a>, one of the fastest web frameworks in the world.",
    "index-i18n.heading.start": "I18n",
    "index-i18n.heading.rest": " that just works",
    "index-i18n.heading.tooltip": "Internationalization",
    "index-i18n.desc": "Just add translations using <a href=\\"https://projectfluent.org\\" class=\\"underline\\">Fluent</a>, and your app can be set up in seconds in multiple languages, with automatic user locale detection.",
    "index-opts.heading": "You want options? We got options.",
    "index-opts.desc": "Perseus comes with a built-in plugins system and full customizability of almost every part of the system. Static exporting? Serverful deployment? Fetch data by carrier pigeon? Easy.",
    "index-speed.heading": "Fast. Crazy. Fast.",
    "index-speed.desc-line-1": "Underlying platform? <strong>Rust.</strong>",
    "index-speed.desc-line-2": "Target platform? <strong>WebAssembly.</strong>",
    "index-speed.desc-line-3": "Lighthouse scores? <strong>💯</strong>",
    "index-speed.desktop-perf-label": "Performance (Desktop)",
    "index-speed.mobile-perf-label": "Performance (Mobile)",
    "index-speed.best-practices-label": "Best Practices",
    "index-cta.heading": "Get started with Perseus today!",
    "index-cta.docs-button": "Docs",
    "index-cta.gh-button": "GitHub",
    "index-cta.api-docs-button": "API Docs",
    "index-cta.crates-io-button": "Crates.io",
    "index-cta.matrix-button": "Matrix",
    "index-cta.discord-button": "Discord",
    "index-cta.comparisons-button": "Comparisons",
    "footer.copyright": "© <a href=\\"https://github.com/arctic-hen7\\" class=\\"underline\\">arctic-hen7</a> { $years }, see license <a href=\\"https://github.com/framesurge/perseus/blob/main/LICENSE\\" class=\\"underline\\">here</a>.",
    "comparisons-title": "Comparisons to Other Frameworks",
    "comparisons-heading": "Comparisons",
    "comparisons-subtitle": "See how Perseus compares to other web development frameworks.",
    "comparisons-extra": "Is there anything we're missing here? Please <a href =\\"https://github.com/framesurge/perseus/issues/new/choose\\" class=\\"underline\\">open an issue</a> and let us know!",
    "comparisons-table-header": "Comparison",
    "comparisons-table-headings.name": "Name",
    "comparisons-table-headings.supports_ssg": "Static generation",
    "comparisons-table-headings.supports_ssr": "Server-side rendering",
    "comparisons-table-headings.supports_ssr_ssg_same_page": "SSG & SSR in same page",
    "comparisons-table-headings.supports_i18n": "Internationalization",
    "comparisons-table-headings.supports_incremental": "Incremental generation",
    "comparisons-table-headings.supports_revalidation": "Revalidation",
    "comparisons-table-headings.inbuilt_cli": "Inbuilt CLI",
    "comparisons-table-headings.inbuilt_routing": "Routing support",
    "comparisons-table-headings.supports_shell": "App shell",
    "comparisons-table-headings.supports_deployment": "Easy deployment",
    "comparisons-table-headings.supports_exporting": "Static exporting",
    "comparisons-table-headings.language": "Language",
    "comparisons-table-headings.homepage_lighthouse_desktop": "Homepage Lighthouse Score (Desktop)",
    "comparisons-table-headings.homepage_lighthouse_mobile": "Homepage Lighthouse Score (Mobile)",
    "comparisons-table-details.supports_ssg": "Whether or not the framework supports pre-rendering pages at build-time.",
    "comparisons-table-details.supports_ssr": "Whether or not the framework supports rendering pages dynamically when they're requested.",
    "comparisons-table-details.supports_ssr_ssg_same_page": "Whether or not the framework supports SSG and SSR (see above) in the very same page.",
    "comparisons-table-details.supports_i18n": "Whether or not the framework supports building a multilingual app. Some frameworks support this through plugins.",
    "comparisons-table-details.supports_incremental": "Whether or not the framework supports rendering pages on-demand and then caching them for future use.",
    "comparisons-table-details.supports_revalidation": "Whether or not the framework supports rebuilding pages that were built at build-time at request-time. Some frameworks can do this by time, or by custom logic. Perseus supports both.",
    "comparisons-table-details.inbuilt_cli": "Whether or not the framework has a command-line interface for convenient usage. Some frameworks use third-party CLIs.",
    "comparisons-table-details.inbuilt_routing": "Whether or not the framework supports inbuilt routing. Most frameworks have their own way of doing this if they do support it.",
    "comparisons-table-details.supports_shell": "Whether or not this framework has an app shell, which makes switching pages much faster and cleaner.",
    "comparisons-table-details.supports_deployment": "Whether or not this framework supports easy deployment. Perseus can deploy in one command.",
    "comparisons-table-details.supports_exporting": "Whether or not this framework can operate without a server, as a series of purely static files.",
    "comparisons-table-details.language": "The programming language this framework is built in. (Hint: Rust is the fastest!)",
    "comparisons-table-details.homepage_lighthouse_desktop": "The Lighthouse score out of 100 for desktop (higher is better). These are collected from Google's PageSpeed Insights tool. These are for the framework's website, and may not reflect the performance of all sites made with the framework.",
    "comparisons-table-details.homepage_lighthouse_mobile": "The Lighthouse score out of 100 for mobile (higher is better). These are collected from Google's PageSpeed Insights tool. These are for the framework's website, and may not reflect the performance of all sites made with the framework.",
    "comparisons-sycamore-heading": "Perseus vs Sycamore",
    "comparisons-sycamore-text": "Perseus is a framework that uses Sycamore to write views (the things users see), so there's not much point in comparing the two as competitors. However, Sycamore can be used without Perseus, which works perfectly well, though you'll miss out on features like inbuilt internationalization, static generation (though you could build this yourself), and incremental generation. If you want to build just a bit of your site with Rust, Sycamore is the perfect tool, Perseus is a full framework designed for building entire websites.",
    "comparisons-unknown-heading": "Perseus vs { $name }",
    "docs-title-base": "Perseus Docs",
    "docs-status.outdated": "This version of the documentation is outdated, and features documented here may work differently now. You can see the latest stable version of the docs <a href=\\"en-US/docs/{ $stable }/intro\\" class=\\"underline\\">here</a>.",
    "docs-status.beta": "This version of the documentation is for a version that has only been released in beta, and is not yet stable. Features documented here may not be present in the latest stable version, and they're subject to rapid and drastic change. You can see the latest stable version of the docs <a href=\\"en-US/docs/{ $stable }/intro\\" class=\\"underline\\">here</a>.",
    "docs-status.next": "This version of the documentation is for a version that has not yet been released, and features documented here may not be present in the latest release. You can see the latest stable version of the docs <a href=\\"en-US/docs/{ $stable }/intro\\" class=\\"underline\\">here</a>.",
    "docs-version-switcher.next": "Next (unreleased)",
    "docs-version-switcher.beta": "v{ $version } (beta)",
    "docs-version-switcher.stable": "v{ $version } (stable)",
    "docs-version-switcher.outdated": "v{ $version } (outdated)",
    "plugins-title": "Plugins",
    "plugins-title-full": "Perseus Plugins",
    "plugin-card-author": "By { $author }",
    "plugin-details.repo_link": "Repository:",
    "plugin-details.crates_link": "Crate page:",
    "plugin-details.docs_link": "Docs:",
    "plugin-details.site_link": "Site:",
    "plugin-details.metadata_heading": "Metadata",
    "plugin-details.no_link_text": "N/A",
    "plugin-search.placeholder": "Search",
    "plugin-search.no_results": "No results found.",
    "plugins-desc": "These are all the public plugins for Perseus! If you've made a plugin, and you'd like it to be listed here, please open an issue on our repository!",
    "search": "Search the docs",
    "index-example-switcher.excerpts": "Excerpts",
    "index-example-switcher.full": "Full"
}
`;</script><meta itemprop=__perseus_head_end><script>//</script><body class="bg-white dark:bg-neutral-900"><div id=root><header data-hk=8.0 class="shadow-md sm:p-2 w-full mb-20 bg-neutral-500/30 backdrop-blur-lg text-black dark:text-white"><div data-hk=8.1 class="flex justify-between items-center"><a data-hk=8.2 class="justify-self-start self-center m-3 ml-5 text-md sm:text-2xl text-bold title-font"href=en-US/>Perseus</a><div data-hk=8.3 class="md:hidden m-3 mr-5 tham tham-e-spin tham-w-6"><div data-hk=8.4 class=tham-box><div data-hk=8.5 class="tham-inner bg-black dark:bg-white"></div></div></div><nav data-hk=8.6 class="hidden md:flex"><ul data-hk=8.7 class="mr-5 flex"><li data-hk=9.0 class="m-3 p-1 title-font"><a data-hk=9.1 href=en-US/docs class=px-2>Docs</a><li data-hk=9.2 class="m-3 p-1 title-font"><a data-hk=9.3 href=en-US/comparisons class=px-2>Comparisons</a><li data-hk=9.4 class="m-3 p-1 title-font"><a data-hk=9.5 href=en-US/plugins class=px-2>Plugins</a></ul></nav></div><nav data-hk=8.8 id=mobile_nav_menu class="md:hidden w-full text-center justify-center hidden"><ul data-hk=8.9 class=mr-5><li data-hk=10.0 class="m-3 p-1 title-font"><a data-hk=10.1 href=en-US/docs class=px-2>Docs</a><li data-hk=10.2 class="m-3 p-1 title-font"><a data-hk=10.3 href=en-US/comparisons class=px-2>Comparisons</a><li data-hk=10.4 class="m-3 p-1 title-font"><a data-hk=10.5 href=en-US/plugins class=px-2>Plugins</a></ul><hr data-hk=2.0><div data-hk=2.1 class="text-left p-3 overflow-y-scroll h-[60vh]"><div data-hk=2.2 class="flex w-full justify-center text-center"><div data-hk=2.3 class="max-w-3xl flex flex-col"><select data-hk=4.4 class="p-2 rounded-md text-white bg-indigo-500"><option data-hk=4.5 value=next>Next (unreleased)<option data-hk=4.6 value=0.4.x selected>v0.4.x (stable)<option data-hk=4.0 value=0.3.4>v0.3.4 (outdated)<option data-hk=4.1 value=0.3.0-0.3.3>v0.3.0-0.3.3 (outdated)<option data-hk=4.2 value=0.2.x>v0.2.x (outdated)<option data-hk=4.3 value=0.1.x>v0.1.x (outdated)</select></div></div><div data-hk=2.4 class=docs-links-markdown><h1>Introduction</h1><ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/intro>Introduction</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/quickstart>Quickstart</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/what-is-perseus>What is Perseus?</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/core-principles>Core Principles</a></ul><h1>Your First App</h1><ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/first-app/installation>Installing Perseus</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/first-app/defining>Defining your app</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/first-app/generating-pages>Generating pages</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/first-app/dev-cycle>Development cycle</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/first-app/error-handling>Error handling</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/first-app/deploying>Deploying your app</a></ul><h1>Fundamentals</h1><ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/perseus-app><code>PerseusApp</code></a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/reactor>The reactor</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/routing>Routing and navigation</a> <ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/preloading>Preloading</a></ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/i18n>Internationalization</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/error-views>Error views</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/hydration>Hydration</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/static-content>Static content</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/head-headers>Heads and headers</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/styling>Styling</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/js-interop>Working with JS</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/serving-exporting>Servers and exporting</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/debugging>Debugging</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/testing>Writing tests</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/plugins>Plugins</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/compilation-times>Improving Compilation Times</a></ul><h1>The State Platform</h1><ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/state/intro>Understanding state</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/state/build>Build-time state</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/state/request>Request-time state</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/state/revalidation>Revalidation</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/state/incremental>Incremental generation</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/state/amalgamation>State amalgamation</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/state/browser>Using state</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/state/global>Global state</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/state/helper>Helper state</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/state/suspense>Suspended state</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/state/freezing-thawing>Freezing and thawing</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/state/manual>Manually implementing <code>ReactiveState</code></a></ul><h1>Capsules</h1><ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/capsules/intro>Introduction</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/capsules/using>Using capsules</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/capsules/capsules-vs-components>Capsules vs. components</a></ul><h1>Miscellaneous</h1><ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/migrating>Migrating from v0.3.x</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/faq>Common pitfalls and FAQs</a></ul></div></div></nav></header><main data-hk=2.16 id=scroll-container><div data-hk=2.5 class="flex w-full"><div data-hk=2.6 class="h-screen pt-14 xs:pt-16 sm:pt-20 lg:pt-25 hidden md:block max-w-xs w-full border-r overflow-y-auto"><div data-hk=2.7 class=mr-5><div data-hk=2.8 class="text-left text-black dark:text-white p-3"><aside data-hk=2.9><div data-hk=2.10 class="flex flex-col"><select data-hk=6.4 class="p-2 rounded-md text-white bg-indigo-500"><option data-hk=6.5 value=next>Next (unreleased)<option data-hk=6.6 value=0.4.x selected>v0.4.x (stable)<option data-hk=6.0 value=0.3.4>v0.3.4 (outdated)<option data-hk=6.1 value=0.3.0-0.3.3>v0.3.0-0.3.3 (outdated)<option data-hk=6.2 value=0.2.x>v0.2.x (outdated)<option data-hk=6.3 value=0.1.x>v0.1.x (outdated)</select></div><div data-hk=2.11 class=docs-links-markdown><h1>Introduction</h1><ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/intro>Introduction</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/quickstart>Quickstart</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/what-is-perseus>What is Perseus?</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/core-principles>Core Principles</a></ul><h1>Your First App</h1><ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/first-app/installation>Installing Perseus</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/first-app/defining>Defining your app</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/first-app/generating-pages>Generating pages</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/first-app/dev-cycle>Development cycle</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/first-app/error-handling>Error handling</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/first-app/deploying>Deploying your app</a></ul><h1>Fundamentals</h1><ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/perseus-app><code>PerseusApp</code></a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/reactor>The reactor</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/routing>Routing and navigation</a> <ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/preloading>Preloading</a></ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/i18n>Internationalization</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/error-views>Error views</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/hydration>Hydration</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/static-content>Static content</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/head-headers>Heads and headers</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/styling>Styling</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/js-interop>Working with JS</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/serving-exporting>Servers and exporting</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/debugging>Debugging</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/testing>Writing tests</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/plugins>Plugins</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/compilation-times>Improving Compilation Times</a></ul><h1>The State Platform</h1><ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/state/intro>Understanding state</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/state/build>Build-time state</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/state/request>Request-time state</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/state/revalidation>Revalidation</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/state/incremental>Incremental generation</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/state/amalgamation>State amalgamation</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/state/browser>Using state</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/state/global>Global state</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/state/helper>Helper state</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/state/suspense>Suspended state</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/state/freezing-thawing>Freezing and thawing</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/state/manual>Manually implementing <code>ReactiveState</code></a></ul><h1>Capsules</h1><ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/capsules/intro>Introduction</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/capsules/using>Using capsules</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/capsules/capsules-vs-components>Capsules vs. components</a></ul><h1>Miscellaneous</h1><ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/migrating>Migrating from v0.3.x</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/faq>Common pitfalls and FAQs</a></ul></div></aside></div></div></div><div data-hk=2.12 class="h-screen pt-14 xs:pt-16 sm:pt-20 lg:pt-25 grid grid-rows-[1fr_min-content] w-full overflow-y-auto"><div data-hk=2.13 class="px-3 w-full sm:mr-auto sm:ml-auto sm:max-w-prose lg:max-w-3xl xl:max-w-4xl 2xl:max-w-5xl min-w-0"><main data-hk=2.14 class="text-black dark:text-white"><div data-hk=1.0 class="markdown min-w-0 pb-10"><h1>Servers and exporting</h1><p>There are two ways to run a Perseus app: you can <em>serve</em> it, or you can <em>export</em> it. To understand the difference, we'll need to dive a little deeper into how Perseus builds your app.<h2>1. Preparation</h2><p>In the first stage, Perseus compiles both itself and your project, and then takes a look at your <code>PerseusApp</code>. This tells it what to expect in terms of internationalization, templates, and capsules, and allows it to formulate a plan to move ahead with.<h2>2. Building</h2><p>Now, Perseus calls the build-time logic on every single template in your app, building as many as it possibly can. Those with capsules that would stall this process are rescheduled if that's permitted. Once this stage is done, Perseus compiles the <em>render configuration</em>, which defines all the templates in your app, and then terminates.<h2>3. Wasm building</h2><p><em>(White lie: this actually happens in parallel with steps 1 and 2.)</em><p>Next, Perseus will compile itself and your app to Wasm. Once this is done, there's no further processing performed on the Wasm bundle unless we're in release mode (in which case it's optimized to the nth degree).<h2>4a. Serving</h2><p>From here, if you've chosen to serve your app, Perseus will take the engine it used to build your app and repurpose that for serving your app (one binary does both, reducing compilation times substantially). This will spin up a server according to your <code>#[perseus::main(..)]</code> settings, and that will run until your terminate it, serving your app where you've specified.<p>This server responds to each request by passing it through special pathways that are capable of calling request-time logic, state amalgamation, revalidation, and all manner of other things. This part of Perseus involves <em>just-in-time nested capsule resolution</em>, which is by far the most complex part of Perseus. All this has to be done upon receiving a user's request, so this binary is deliberately optimized for speed (meaning it can easily blow out to very large sizes) in release mode.<h3>Server integrations</h3><p>Since Perseus tries to be as open as possible, it allows you to provide a custom function to <code>#[perseus::main(..)]</code> that will run your server. Usually, you'll just use the default server provided by one of the integrations, but you can also customize this however you like..<p>Server integrations are special crates, like <code>perseus-axum</code>, that provide the boilerplate to host Perseus through a particular server framework. Currently, Perseus has server integrations for <a href=https://github.com/actix/actix-web>Actix Web</a>, <a href=https://github.com/seanmonstar/warp>Warp</a> (although Warp itself appears to be unmaintained), and <a href=https://github.com/tokio-rs/axum>Axum</a>. All of these have a <code>dflt-server</code> feature flag, which you can enable to gain access to the <code>perseus-&LTintegration-name>::dflt_server</code> function, which will spin up a server that just hosts Perseus.<p>However, most apps also have several API routes associated with them, especially if you're working with a database. Since you can provide a custom function to host Perseus, you can also add arbitrary API routes. You can take a look at the <a href=https://github.com/framesurge/perseus/tree/main/examples/core/custom_server>custom server example</a> for further details on this, or take a look at the source code for the server integration you're using.<p><em>Note: due to <a href=https://github.com/seanmonstar/warp/issues/171>this bug</a>, the Warp integration must currently be used with the <a href=https://crates.io/crates/warp-fix-171><code>warp-fix-171</code></a> crate, rather than the <code>warp</code> crate itself. As Warp itself appears to no longer be maintained, this situation is unlikely to change any time soon.</em><h4>Writing a server integration</h4><p>If you're unhappy with the defaults a particualr server integration provides, you are <em>strongly</em> encouraged to modify it yourself, which isn't a difficult process at all. Deliberately, Perseus abstracts nearly all serving functionality into the core, behind a type called <code>Turbine</code>, a static reference to which is provided to server integrations. This means all you're doing in a server integration is spinning up the right routes. In fact, all server integrations follow a pre-defined pattern of exactly what they have to do, making it much easier to write and modify them for your needs. If you really want, you can even fly solo without a server integration, and implement everything yourself (although this is not recommended unless you have very specific requirements).<p>Currently, Perseus has no support for arbitrary middleware, and modifying the server integration is the only way to do this. Bear in mind, however, that the Axum integration is only one file with 173 lines of code and comments in it --- these integrations are designed to be tweaked!<h2>4b. Exporting</h2><p>Alternately, if you've chosen to export, Perseus will mimic what the server does a little. It will first rearrange all the files the build process generated into folders that mimic the structure of the requests the client will send (e.g. things in <code>dist/static</code> get moved to <code>dist/exported/.perseus/static</code>), and then it will loop through all the pages and create initial load files for all of them. If you were serving your app, Perseus would insert page fragments into your <em>index view</em> at request-time, but exported apps do this ahead-of-time so no processing is required at request-time.<p>The output of exporting is a folder (<code>dist/exported</code>) that contains everything needed to run your app. Importantly, exported apps don't have access to any request-time features, like incremental generation or revalidation, and using any of these will cause the build process to neatly fail. However, exported apps are often a lot easier to deploy. For example, deploying this website is just a matter of uploading the generated static files to the <code>gh-pages</code> branch, and GitHub oes the rest for us (because there's no server involved, it's much easier to orchestrate these kinds of deployments). Exported apps are also usually cheaper to host.<p>When you run <code>perseus deploy -e</code>, Perseus will build your Wasm in release mode and move everything into a <code>pkg/</code> folder that's fully optimized for production.<p><em>Note: <code>perseus export -s</code> exists to spin up a miniature file server to avooid your needing to bring your own in development.</em><h3>Error pages in exported apps</h3><p>One thing exported apps often struggle with is proper error handling. Once the Wasm bundle has been delivered to the client, they're fine and dandy, and can display all the errors they like, but the server-side is trickier. When Perseus controls it, it can carefully format error pages with exactly the right information, but typical file servers aren't quite so subtle. Especially for internationalized apps, this can be a problem. The best solution is to export your error pages to static files, which can be done like so:<pre><code class=language-sh>perseus export-error-page --code 404 --output pkg/404.html
</code></pre><p>Here, we export the 404 page to <code>pkg/404.html</code>, where is will be picked up and served in the event of a 404 error by most file hosts. However, since we don't know the user's locale in advance, we can't localize this page appropriately, or even send the right translations. For apps not using i18n, this won't be a problem, but i18n-ed apps should prefer serving over exporting where possible.<p>Note that adding <code>-s</code> to a <code>perseus export</code> command in development will automatically export your 404 page, but the deployment system will not do this, so you may wish to make this a separate stage in your deployment process, depending on whether or not your file host supports this pattern.</div></main></div><div data-hk=2.15 class=row-start-2><footer data-hk=7.0 class="w-full flex justify-center py-5 bg-black text-white"><p data-hk=7.1 class="mx-5 text-center"><span data-hk=7.2>© <a href=https://github.com/arctic-hen7 class=underline>arctic-hen7</a> 2021-2023, see license <a href=https://github.com/framesurge/perseus/blob/main/LICENSE class=underline>here</a>.</span></footer></div></div></div></main><script data-hk=0.0 src=.perseus/static/prism.js defer></script><script data-hk=0.1>window.Prism.highlightAll();</script></div><div id=__perseus_popup_error></div>