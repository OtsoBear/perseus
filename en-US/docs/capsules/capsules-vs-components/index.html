<!DOCTYPE html><html lang=en-US class=light><head><base href=https://framesurge.sh/perseus/><meta charset=UTF-8><meta name=viewport content="width=device-width, initial-scale=1.0"><link rel=stylesheet href=.perseus/static/tailwind.css><link rel=stylesheet href=.perseus/static/styles/style.css><script type=module>window.__PERSEUS_RENDER_CFG = `{"plugins":"plugins","docs/0.3.4/tutorials/second-app":"docs","docs/state/intro":"docs","docs/0.2.x/strategies/request-state":"docs","docs/first-app/generating-pages":"docs","docs/0.3.0-0.3.3/styling":"docs","docs/0.3.4/reference/state/hsr":"docs","docs/next/fundamentals/testing":"docs","docs/0.3.4/reference/templates/intro":"docs","docs/0.3.0-0.3.3/hydration":"docs","docs/next/what-is-perseus":"docs","docs/0.3.0-0.3.3/deploying/size":"docs","docs/0.3.0-0.3.3/i18n/using":"docs","docs/0.3.4/core-principles":"docs","docs/0.1.x/tutorials/first_app/template":"docs","docs/0.4.x/what-is-perseus":"docs","docs/0.4.x/migrating":"docs","docs/intro":"docs","docs/0.3.4/reference/styling":"docs","docs/0.3.4/reference/testing/fantoccini-basics":"docs","docs/migrating":"docs","docs/0.3.4/advanced/initial-loads":"docs","docs/core-principles":"docs","docs":"docs","docs/first-app/deploying":"docs","docs/next/fundamentals/compilation-times":"docs","docs/0.3.0-0.3.3/debugging":"docs","docs/0.3.0-0.3.3/strategies/request-state":"docs","docs/0.3.4/reference/engines":"docs","docs/0.3.4/reference/i18n/intro":"docs","docs/next/fundamentals/serving-exporting":"docs","docs/0.1.x/config_managers":"docs","docs/0.2.x/debugging":"docs","docs/0.3.4/reference/i18n/using":"docs","docs/0.1.x/building":"docs","docs/0.3.4/reference/templates/router-state":"docs","docs/0.4.x/state/suspense":"docs","docs/0.3.0-0.3.3/plugins/control":"docs","docs/0.3.4/reference/plugins/security":"docs","docs/state/helper":"docs","docs/0.3.4/reference/static-content":"docs","docs/fundamentals/serving-exporting":"docs","docs/0.3.4/reference/deploying/size":"docs","docs/0.4.x/fundamentals/plugins":"docs","docs/0.4.x/capsules/intro":"docs","docs/next/core-principles":"docs","docs/state/amalgamation":"docs","docs/0.4.x/first-app/installation":"docs","docs/0.3.0-0.3.3/i18n/intro":"docs","docs/next/capsules/capsules-vs-components":"docs","docs/0.1.x/tutorials/first_app/app":"docs","docs/state/incremental":"docs","docs/0.3.4/advanced/route-announcer":"docs","docs/next/fundamentals/static-content":"docs","docs/0.4.x/state/global":"docs","docs/next/state/global":"docs","docs/0.3.4/reference/snooping":"docs","docs/next/first-app/installation":"docs","docs/0.2.x/templates/intro":"docs","docs/0.2.x/i18n/intro":"docs","docs/0.4.x/state/freezing-thawing":"docs","docs/0.3.4/reference/perseus-app":"docs","docs/0.3.4/reference/state/global":"docs","docs/0.4.x/fundamentals/routing":"docs","docs/0.3.4/reference/testing/checkpoints":"docs","docs/0.3.4/reference/strategies/amalgamation":"docs","docs/next/faq":"docs","docs/0.3.4/reference/plugins/using":"docs","docs/0.3.4/advanced/routing":"docs","docs/0.4.x/fundamentals/i18n":"docs","docs/0.4.x/intro":"docs","docs/0.3.4/reference/plugins/publishing":"docs","docs/0.2.x/views":"docs","docs/0.4.x/first-app/deploying":"docs","docs/state/manual":"docs","docs/next/fundamentals/plugins":"docs","docs/0.3.0-0.3.3/pitfalls-and-bugs":"docs","docs/0.4.x/first-app/defining":"docs","docs/0.3.0-0.3.3/testing/intro":"docs","docs/0.1.x/strategies/intro":"docs","docs/0.2.x/what-is-perseus":"docs","docs/0.3.0-0.3.3/strategies/intro":"docs","docs/0.4.x/fundamentals/styling":"docs","docs/0.3.4/reference/i18n/translations-managers":"docs","docs/0.3.4/reference/state/idb-freezing":"docs","docs/0.4.x/state/incremental":"docs","docs/state/revalidation":"docs","docs/0.2.x/cli":"docs","docs/0.2.x/testing/manual":"docs","docs/0.3.0-0.3.3/second-app":"docs","docs/fundamentals/static-content":"docs","docs/0.4.x/capsules/using":"docs","docs/0.3.0-0.3.3/strategies/build-paths":"docs","docs/next/fundamentals/perseus-app":"docs","docs/capsules/using":"docs","docs/0.3.4/reference/deploying/relative-paths":"docs","docs/0.4.x/state/helper":"docs","docs/fundamentals/perseus-app":"docs","docs/fundamentals/hydration":"docs","docs/fundamentals/i18n":"docs","docs/0.4.x/state/browser":"docs","docs/0.3.0-0.3.3/updating":"docs","docs/0.3.4/reference/exporting":"docs","docs/0.3.4/reference/testing/intro":"docs","docs/0.2.x/deploying/exporting":"docs","docs/0.3.4/intro":"docs","docs/next/state/amalgamation":"docs","docs/0.3.4/reference/plugins/tinker":"docs","docs/0.4.x/fundamentals/serving-exporting":"docs","docs/0.3.0-0.3.3/plugins/functional":"docs","docs/0.3.0-0.3.3/strategies/build-state":"docs","docs/0.4.x/first-app/error-handling":"docs","docs/0.3.0-0.3.3/deploying/intro":"docs","docs/0.3.0-0.3.3/deploying/serverful":"docs","docs/0.3.4/reference/templates/setting-headers":"docs","docs/0.3.4/reference/hydration":"docs","docs/0.1.x/strategies/revalidation":"docs","docs/next/state/browser":"docs","docs/0.1.x/routing":"docs","docs/0.2.x/i18n/other-engines":"docs","docs/0.3.4/reference/server-communication":"docs","docs/next/fundamentals/routing":"docs","docs/0.4.x/first-app/dev-cycle":"docs","docs/0.3.0-0.3.3/ejecting":"docs","docs/0.2.x/advanced/subsequent-loads":"docs","docs/capsules/intro":"docs","docs/0.2.x/strategies/incremental":"docs","docs/next/state/freezing-thawing":"docs","docs/next/state/request":"docs","docs/next/first-app/dev-cycle":"docs","docs/0.4.x/fundamentals/head-headers":"docs","docs/0.3.0-0.3.3/plugins/intro":"docs","docs/0.4.x/fundamentals/error-views":"docs","docs/next/state/intro":"docs","docs/0.3.0-0.3.3/advanced/initial-loads":"docs","docs/0.2.x/styling":"docs","docs/fundamentals/compilation-times":"docs","docs/fundamentals/head-headers":"docs","docs/0.3.4/reference/state/rx":"docs","docs/0.3.0-0.3.3/i18n/translations-managers":"docs","docs/0.3.0-0.3.3/stores":"docs","docs/0.2.x/i18n/translations-managers":"docs","docs/0.3.0-0.3.3/static-content":"docs","docs/next/fundamentals/reactor":"docs","docs/0.3.4/reference/deploying/intro":"docs","docs/0.2.x/strategies/intro":"docs","docs/0.3.0-0.3.3/testing/fantoccini-basics":"docs","docs/0.4.x/state/intro":"docs","docs/next/fundamentals/head-headers":"docs","docs/0.1.x/tutorials/first_app/setup":"docs","docs/0.2.x/config-managers":"docs","docs/0.3.4/reference/error-pages":"docs","docs/next/fundamentals/debugging":"docs","docs/0.1.x/tutorials/first_app/intro":"docs","docs/fundamentals/routing":"docs","docs/first-app/installation":"docs","docs/0.3.4/what-is-perseus":"docs","docs/0.3.0-0.3.3/advanced/routing":"docs","docs/fundamentals/styling":"docs","docs/0.3.4/reference/deploying/docker":"docs","docs/0.2.x/advanced/intro":"docs","docs/0.4.x/state/manual":"docs","docs/0.4.x/fundamentals/js-interop":"docs","docs/0.3.4/reference/ejecting":"docs","docs/0.1.x/setup":"docs","docs/0.2.x/deploying/intro":"docs","docs/0.3.0-0.3.3/deploying/relative-paths":"docs","docs/0.4.x/fundamentals/static-content":"docs","docs/0.2.x/strategies/build-paths":"docs","docs/next/fundamentals/i18n":"docs","docs/0.3.4/reference/state/freezing":"docs","docs/fundamentals/reactor":"docs","docs/next/capsules/intro":"docs","docs/0.3.4/reference/debugging":"docs","docs/0.3.0-0.3.3/i18n/defining":"docs","docs/0.2.x/error-pages":"docs","docs/0.2.x/ejecting":"docs","docs/0.1.x/integrations/actix-web":"docs","docs/next/state/revalidation":"docs","docs/0.3.4/reference/templates/metadata-modification":"docs","docs/0.3.0-0.3.3/error-pages":"docs","docs/fundamentals/error-views":"docs","docs/next/state/incremental":"docs","docs/next/migrating":"docs","docs/0.4.x/state/revalidation":"docs","docs/0.3.0-0.3.3/cli":"docs","docs/0.4.x/quickstart":"docs","docs/0.3.0-0.3.3/plugins/publishing":"docs","docs/0.3.4/reference/index-view":"docs","docs/0.3.4/reference/updating":"docs","docs/fundamentals/plugins":"docs","docs/0.2.x/advanced/arch":"docs","docs/0.3.4/reference/live-reloading":"docs","docs/0.1.x/strategies/incremental":"docs","docs/next/quickstart":"docs","docs/state/global":"docs","docs/0.2.x/intro":"docs","docs/next/first-app/error-handling":"docs","docs/0.4.x/fundamentals/hydration":"docs","docs/state/request":"docs","docs/0.3.0-0.3.3/advanced/define_app":"docs","docs/next/fundamentals/js-interop":"docs","docs/0.3.0-0.3.3/snooping":"docs","docs/0.3.0-0.3.3/plugins/security":"docs","docs/next/fundamentals/styling":"docs","docs/next/capsules/using":"docs","docs/quickstart":"docs","docs/0.3.0-0.3.3/strategies/revalidation":"docs","docs/0.4.x/fundamentals/debugging":"docs","docs/0.2.x/updating":"docs","docs/0.4.x/fundamentals/reactor":"docs","docs/next/fundamentals/error-views":"docs","docs/0.1.x/arch":"docs","docs/0.3.4/reference/strategies/intro":"docs","docs/first-app/error-handling":"docs","docs/0.3.4/reference/i18n/defining":"docs","docs/0.3.0-0.3.3/templates/setting-headers":"docs","docs/0.3.0-0.3.3/define-app":"docs","docs/next/first-app/generating-pages":"docs","docs/0.4.x/fundamentals/perseus-app":"docs","docs/fundamentals/js-interop":"docs","docs/next/intro":"docs","docs/0.2.x/strategies/build-state":"docs","docs/0.3.4/reference/pitfalls-and-bugs":"docs","docs/0.3.4/tutorials/auth":"docs","docs/0.3.0-0.3.3/deploying/serverless":"docs","docs/0.3.0-0.3.3/plugins/using":"docs","docs/next/state/helper":"docs","docs/0.4.x/core-principles":"docs","docs/0.4.x/fundamentals/testing":"docs","docs/0.3.4/reference/testing/manual":"docs","docs/0.3.4/reference/strategies/build-state":"docs","docs/0.3.0-0.3.3/testing/checkpoints":"docs","docs/0.2.x/i18n/using":"docs","docs/0.4.x/fundamentals/compilation-times":"docs","docs/0.3.0-0.3.3/testing/manual":"docs","docs/state/freezing-thawing":"docs","docs/0.2.x/testing/fantoccini-basics":"docs","docs/0.1.x/strategies/build_state":"docs","docs/0.3.4/reference/plugins/control":"docs","docs/0.2.x/static-content":"docs","docs/0.3.0-0.3.3/exporting":"docs","docs/0.3.0-0.3.3/views":"docs","docs/0.3.0-0.3.3/strategies/incremental":"docs","docs/0.3.4/reference/cli":"docs","docs/0.3.4/reference/strategies/revalidation":"docs","docs/0.3.4/reference/strategies/request-state":"docs","docs/0.3.4/advanced/arch":"docs","docs/0.2.x/strategies/amalgamation":"docs","docs/state/browser":"docs","docs/0.3.0-0.3.3/server-communication":"docs","docs/fundamentals/testing":"docs","docs/0.4.x/state/build":"docs","docs/faq":"docs","docs/next/first-app/defining":"docs","docs/0.3.4/reference/define-app":"docs","docs/0.1.x/templates":"docs","docs/0.3.0-0.3.3/deploying/docker":"docs","docs/next/state/suspense":"docs","docs/0.1.x/error_pages":"docs","docs/0.4.x/faq":"docs","docs/state/suspense":"docs","docs/0.3.0-0.3.3/intro":"docs","docs/0.3.0-0.3.3/advanced/subsequent-loads":"docs","docs/0.3.4/reference/plugins/intro":"docs","docs/0.3.4/advanced/intro":"docs","docs/0.3.0-0.3.3/plugins/writing":"docs","docs/0.2.x/testing/intro":"docs","docs/0.2.x/testing/checkpoints":"docs","docs/0.2.x/define-app":"docs","docs/0.3.0-0.3.3/advanced/arch":"docs","docs/0.2.x/templates/metadata-modification":"docs","docs/0.1.x/strategies/build_paths":"docs","docs/0.1.x/serving":"docs","docs/0.4.x/fundamentals/preloading":"docs","docs/0.3.0-0.3.3/strategies/amalgamation":"docs","docs/0.2.x/hello-world":"docs","docs/fundamentals/debugging":"docs","docs/capsules/capsules-vs-components":"docs","docs/next/state/build":"docs","docs/0.2.x/strategies/revalidation":"docs","docs/0.3.4/reference/stores":"docs","docs/what-is-perseus":"docs","docs/fundamentals/preloading":"docs","docs/0.3.4/tutorials/hello-world":"docs","docs/0.3.0-0.3.3/templates/metadata-modification":"docs","docs/next/fundamentals/preloading":"docs","docs/0.3.0-0.3.3/hello-world":"docs","docs/next/first-app/deploying":"docs","docs/0.2.x/second-app":"docs","docs/first-app/dev-cycle":"docs","docs/0.3.4/reference/plugins/functional":"docs","":"","docs/0.4.x/first-app/generating-pages":"docs","docs/0.4.x/state/amalgamation":"docs","docs/0.3.4/reference/views":"docs","docs/0.1.x/intro":"docs","docs/next/fundamentals/hydration":"docs","docs/0.3.0-0.3.3/plugins/tinker":"docs","docs/0.4.x/capsules/capsules-vs-components":"docs","comparisons":"comparisons","docs/0.3.0-0.3.3/templates/intro":"docs","docs/state/build":"docs","docs/0.2.x/advanced/routing":"docs","docs/0.3.4/reference/strategies/build-paths":"docs","docs/0.1.x/cli":"docs","docs/0.1.x/strategies/request_state":"docs","docs/0.3.0-0.3.3/what-is-perseus":"docs","docs/0.3.4/reference/deploying/serverless":"docs","docs/0.2.x/templates/setting-headers":"docs","docs/first-app/defining":"docs","docs/0.4.x/state/request":"docs","docs/0.3.0-0.3.3/advanced/intro":"docs","docs/0.3.4/reference/plugins/writing":"docs","docs/0.2.x/i18n/defining":"docs","docs/0.2.x/advanced/initial-loads":"docs","docs/0.3.4/reference/strategies/incremental":"docs","docs/0.3.0-0.3.3/i18n/other-engines":"docs","docs/next/state/manual":"docs","docs/0.3.4/reference/deploying/serverful":"docs","docs/0.3.4/advanced/subsequent-loads":"docs","docs/0.3.4/reference/i18n/other-engines":"docs"}`;

        import init from "https://framesurge.sh/perseus/.perseus/bundle.js";
        async function main() {
            await init("https://framesurge.sh/perseus/.perseus/bundle.wasm");
        }
        main();

        
        

window.__PERSEUS_GLOBAL_STATE = `null`;</script><meta itemprop=__perseus_head_boundary><title>Capsules vs. components | Perseus Docs</title><link rel=stylesheet href=.perseus/static/styles/markdown.css><link rel=stylesheet href=.perseus/static/styles/docs_links_markdown.css><link rel=stylesheet href=.perseus/static/prism.css><script>
window.__PERSEUS_INITIAL_STATE = `{"content":"<h1>Capsules vs. components</h1>\\n<p>With all this capsules stuff, you might be wondering whether you should be using capsules for everything: here's the short answer, <strong>don't</strong>. This page will go through the differences between normal <a href=\\"https://sycamore-rs.netlify.app/docs/basics/components\\">Sycamore components</a>, which don't integrate with the Perseus state platform, and full-blown capsules.</p>\\n<h2>View generation</h2>\\n<p>The first major similarity between capsules and components is that they both generate Sycamore views, but they do this at different times. If you use a component for something, then Perseus will render it immediately, no matter what, whereas capsules need to know what their state is, which has to be retrieved from the engine, meaning their renders will be delayed until a request has been completed. Note however that this isn't the case with <em>initial loads</em> (when a user comes to your app from the outside internet), and, then, all capsules will be served together as one HTML bundle.</p>\\n<p>This difference might seem minor, but it can cause major problems if you start to use capsules for everything. For example, let's say you create a styling library with capsules for buttons, checkboxes, etc., thinking it's a great idea because you can generate state for them in advance, perhaps using some advanced usage of incremental generation as a property-parsing system. However, if you then have a capsule for a sidebar, with a capsule inside that for a section, and <em>another</em> capsule inside that for a button, you'll end up with three layers of nested capsules. Importantly, Perseus doesn't know what capsules something (either a page or a widget) depends on <em>until it renders it</em>. That means Perseus has to render your page, putting the sidebar in a loading state until we have its state, and then it can render the sidebar, but then it finds that that's dependent on a section widget, so it goes and gets that one's state, and <em>then</em> it finds the button capsule, and has to go and get its state. Now, if a capsule has no state, then no server trip is necessary, but <strong>capsules without state are always better as Sycamore components</strong>, since all a capsule is is a component with access to the Perseus state platform.</p>\\n<p>The main thing to take away from all this rendering complexity is that <strong>the more levels of capsule nesting you have, the slower your page will be</strong>. Specifically, if it takes <em>n</em> seconds to get a single widget's state from the server, and you have <em>l</em> levels of nesting, your entire page will need to be re-rendered <em>l + 1</em> times on the engine-side to create an initial load, and it will take <em>(n + 1) * l</em> seconds to render your entire page for a subsequent load. If a single server trip takes even one second, and you have three levels of capsule nesting, that's four seconds to render your whole page, during which the user will be put through a slew of loading states. To our knowledge, this is the most efficient way we can do this while maintaining the ergonomics of Perseus (such as making sure you don't have to define which widgets a page uses in advance, which would severely limit the utility of the capsules system), but it has substantial tradeoffs when you start to use capsules in an overly nested way. Again, if it can be implemented as a component, it probably should be.</p>\\n<h2>State and properties</h2>\\n<p>The second big difference between capsules and components is how flexible they are. A capsule is a full-on template that can be filled in with the Perseus state platform, and then modified by some properties the calling page/widget provides, while a component just has those properties. This doesn't mean widgets are always better, it means they're a great tool <em>when you need state</em>. For example, there is absolutely no point whatsoever in making a button an independent capsule, because it doesn't need state. Any customization of it can (and should) be performed using the properties system, and therefore it shoudl be a component, not a capsule.</p>\\n<p>This is the reason why Perseus deliberately does not support adding Sycamore's <code>Children&lt;'_&gt;</code> type to the properties of a capsule, or passing through HTML properties like <code>class</code> or <code>style</code> through, since capsules are intended to be <em>sections of pages</em>, not atomic units. Despite the next version of Sycamore supporting this kind of property passthrough, Perseus <em>will not</em> support this with capsules to remove ambiguity about their purpose.</p>\\n<h2>The intuition</h2>\\n<p>By now, you're probably waiting for some kind of general rule to decide whether you should use a capsule or a component, and here it is: <strong>do not use a capsule where a component would do</strong>, because, chances are, it will just slow down both your development cycle and your app. If you need the state platform though, and you avoid high levels of capsule nesting, capsules can be an incredibly powerful tool to greatly <em>improve</em> the speed of your app, while simplifying complex workflows and enabling previously impossible coding patterns.</p>\\n<p>But, from here, there's still more to be said. If you apply what you've learned so far in this section to capsules, you'll probably use them only very rarely, but this isn't the intention. Capsules fit very nicely with any of the versions of Brad Frost's <a href=\\"https://atomicdesign.bradfrost.com/chapter-2/\\"><em>Atomic Design</em></a> system, whereby you split your design up into <em>atoms</em>, <em>molecules</em>, <em>organisms</em>, <em>templates</em>, and <em>pages</em>. The atoms would be things like buttons, etc., for which you should use components, since these will be customized largely by properties, and won't need state of their own. Molecules are small units created with atoms, like a search bar. Generally, these too are better as components, but sometimes they'll need state, and they should be implemented as capsules (this is certainly the fuzziest category). Organisms are sections of your page, comprised of a number of molecules to form a functioning interface, like a header or sidebar. These should nearly always be implemented as capsules if they have any parts that need state, since this will allow persisting things like the entry typed in a search bar in a header across pages, due to Perseus' unique state caching system. When you have reactive molecules within organisms, make the reactive parts the state of the organism, and make it a capsule. Finally, you have templates and pages, which, as you might notice, already have a fairly prominent place in Perseus! (And no, we didn't design Perseus on the back of atomic design, it's just a methodology that happens to make a heck of a lot of sense when applied to Perseus specifically, but the naming similarity in the last two is purely coincidental, and they do mean slightly different things in the atomic method.)</p>\\n<h2>The rules</h2>\\n<p>So, since we're programmers, and we like to have a nice methodology to follow, here's one for you. By all means, use this, don't use it, rewrite it yourself, do whatever you like. There will be many cases that will not be covered by these rules, and there will be others that are poorly covered. They are made to be broken, and you should break them if it makes sense to do so! Nonetheless, they will be helpful to some, especially those starting out with Perseus, so here they are:</p>\\n<ol>\\n<li>If it doesn't have state, it should be a component.</li>\\n<li>If it can be implemented as a component, it should be a component.</li>\\n<li>If it's a small, composable unit of a larger interface, it should be a component (even if it might have reactivity of its own, like a search bar; think instead about how that reactivity should be cached, e.g. you probably don't want all the search bars for completely difference things on your site synchronizing their states).</li>\\n<li>If it's a somewhat self-contained interface on your pages, like a sidebar or header, that has state of its own, it should be a capsule.</li>\\n<li>If it's something like in number 4, but it doesn't have any state, it should be a component.</li>\\n<li>If it has a constant form, but many versions (e.g. a product display), it should be a capsule so it can use incremental generation.</li>\\n<li>Avoid nesting capsules wherever possible! A nesting of two or three is fine, but any more than that and you'll likely start to see performance problems!</li>\\n<li>If you want to delay loading a heavy part of your page, make it a capsule, and use <code>.delayed_widget()</code>.</li>\\n</ol>\\n","current_version":"0.4.x","manifest":{"0.1.x":{"docs_rs":"0.1","git":"v0.1.4","state":"outdated"},"0.2.x":{"docs_rs":"0.2","git":"v0.2.3","state":"outdated"},"0.3.0-0.3.3":{"docs_rs":"0.3.3","git":"v0.3.3","state":"outdated"},"0.3.4":{"docs_rs":"0.3","git":"v0.3.6","state":"outdated"},"0.4.x":{"docs_rs":"0.4","git":"HEAD","state":"stable"}},"sidebar_content":"<h1>Introduction</h1>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/intro\\">Introduction</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/quickstart\\">Quickstart</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/what-is-perseus\\">What is Perseus?</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/core-principles\\">Core Principles</a></li>\\n</ul>\\n<h1>Your First App</h1>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/first-app/installation\\">Installing Perseus</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/first-app/defining\\">Defining your app</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/first-app/generating-pages\\">Generating pages</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/first-app/dev-cycle\\">Development cycle</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/first-app/error-handling\\">Error handling</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/first-app/deploying\\">Deploying your app</a></li>\\n</ul>\\n<h1>Fundamentals</h1>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/perseus-app\\"><code>PerseusApp</code></a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/reactor\\">The reactor</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/routing\\">Routing and navigation</a>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/preloading\\">Preloading</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/i18n\\">Internationalization</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/error-views\\">Error views</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/hydration\\">Hydration</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/static-content\\">Static content</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/head-headers\\">Heads and headers</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/styling\\">Styling</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/js-interop\\">Working with JS</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/serving-exporting\\">Servers and exporting</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/debugging\\">Debugging</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/testing\\">Writing tests</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/plugins\\">Plugins</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/compilation-times\\">Improving Compilation Times</a></li>\\n</ul>\\n<h1>The State Platform</h1>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/state/intro\\">Understanding state</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/state/build\\">Build-time state</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/state/request\\">Request-time state</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/state/revalidation\\">Revalidation</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/state/incremental\\">Incremental generation</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/state/amalgamation\\">State amalgamation</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/state/browser\\">Using state</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/state/global\\">Global state</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/state/helper\\">Helper state</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/state/suspense\\">Suspended state</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/state/freezing-thawing\\">Freezing and thawing</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/state/manual\\">Manually implementing <code>ReactiveState</code></a></li>\\n</ul>\\n<h1>Capsules</h1>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/capsules/intro\\">Introduction</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/capsules/using\\">Using capsules</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/capsules/capsules-vs-components\\">Capsules vs. components</a></li>\\n</ul>\\n<h1>Miscellaneous</h1>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/migrating\\">Migrating from v0.3.x</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.4.x/faq\\">Common pitfalls and FAQs</a></li>\\n</ul>\\n","status":"Stable","title":"Capsules vs. components"}`;
window.__PERSEUS_INITIAL_WIDGET_STATES = `{}`;
window.__PERSEUS_TRANSLATIONS = `{
    "perseus": "Perseus",
    "sycamore": "Sycamore",
    "navlinks.docs": "Docs",
    "navlinks.comparisons": "Comparisons",
    "navlinks.plugins": "Plugins",
    "index-intro.heading": "The Rust framework for the modern web",
    "index-intro.get-started-button": "Get started now",
    "index-intro.github-button": "GitHub",
    "index-state-gen.heading": "Generate state, on your terms",
    "index-state-gen.desc": "Perseus apps can generate state whenever they like and pass it to <a href=\\"https://github.com/sycamore-rs/sycamore\\" class=\\"underline\\">Sycamore</a>, one of the fastest web frameworks in the world.",
    "index-i18n.heading.start": "I18n",
    "index-i18n.heading.rest": " that just works",
    "index-i18n.heading.tooltip": "Internationalization",
    "index-i18n.desc": "Just add translations using <a href=\\"https://projectfluent.org\\" class=\\"underline\\">Fluent</a>, and your app can be set up in seconds in multiple languages, with automatic user locale detection.",
    "index-opts.heading": "You want options? We got options.",
    "index-opts.desc": "Perseus comes with a built-in plugins system and full customizability of almost every part of the system. Static exporting? Serverful deployment? Fetch data by carrier pigeon? Easy.",
    "index-speed.heading": "Fast. Crazy. Fast.",
    "index-speed.desc-line-1": "Underlying platform? <strong>Rust.</strong>",
    "index-speed.desc-line-2": "Target platform? <strong>WebAssembly.</strong>",
    "index-speed.desc-line-3": "Lighthouse scores? <strong>💯</strong>",
    "index-speed.desktop-perf-label": "Performance (Desktop)",
    "index-speed.mobile-perf-label": "Performance (Mobile)",
    "index-speed.best-practices-label": "Best Practices",
    "index-cta.heading": "Get started with Perseus today!",
    "index-cta.docs-button": "Docs",
    "index-cta.gh-button": "GitHub",
    "index-cta.api-docs-button": "API Docs",
    "index-cta.crates-io-button": "Crates.io",
    "index-cta.matrix-button": "Matrix",
    "index-cta.discord-button": "Discord",
    "index-cta.comparisons-button": "Comparisons",
    "footer.copyright": "© <a href=\\"https://github.com/arctic-hen7\\" class=\\"underline\\">arctic-hen7</a> { $years }, see license <a href=\\"https://github.com/framesurge/perseus/blob/main/LICENSE\\" class=\\"underline\\">here</a>.",
    "comparisons-title": "Comparisons to Other Frameworks",
    "comparisons-heading": "Comparisons",
    "comparisons-subtitle": "See how Perseus compares to other web development frameworks.",
    "comparisons-extra": "Is there anything we're missing here? Please <a href =\\"https://github.com/framesurge/perseus/issues/new/choose\\" class=\\"underline\\">open an issue</a> and let us know!",
    "comparisons-table-header": "Comparison",
    "comparisons-table-headings.name": "Name",
    "comparisons-table-headings.supports_ssg": "Static generation",
    "comparisons-table-headings.supports_ssr": "Server-side rendering",
    "comparisons-table-headings.supports_ssr_ssg_same_page": "SSG & SSR in same page",
    "comparisons-table-headings.supports_i18n": "Internationalization",
    "comparisons-table-headings.supports_incremental": "Incremental generation",
    "comparisons-table-headings.supports_revalidation": "Revalidation",
    "comparisons-table-headings.inbuilt_cli": "Inbuilt CLI",
    "comparisons-table-headings.inbuilt_routing": "Routing support",
    "comparisons-table-headings.supports_shell": "App shell",
    "comparisons-table-headings.supports_deployment": "Easy deployment",
    "comparisons-table-headings.supports_exporting": "Static exporting",
    "comparisons-table-headings.language": "Language",
    "comparisons-table-headings.homepage_lighthouse_desktop": "Homepage Lighthouse Score (Desktop)",
    "comparisons-table-headings.homepage_lighthouse_mobile": "Homepage Lighthouse Score (Mobile)",
    "comparisons-table-details.supports_ssg": "Whether or not the framework supports pre-rendering pages at build-time.",
    "comparisons-table-details.supports_ssr": "Whether or not the framework supports rendering pages dynamically when they're requested.",
    "comparisons-table-details.supports_ssr_ssg_same_page": "Whether or not the framework supports SSG and SSR (see above) in the very same page.",
    "comparisons-table-details.supports_i18n": "Whether or not the framework supports building a multilingual app. Some frameworks support this through plugins.",
    "comparisons-table-details.supports_incremental": "Whether or not the framework supports rendering pages on-demand and then caching them for future use.",
    "comparisons-table-details.supports_revalidation": "Whether or not the framework supports rebuilding pages that were built at build-time at request-time. Some frameworks can do this by time, or by custom logic. Perseus supports both.",
    "comparisons-table-details.inbuilt_cli": "Whether or not the framework has a command-line interface for convenient usage. Some frameworks use third-party CLIs.",
    "comparisons-table-details.inbuilt_routing": "Whether or not the framework supports inbuilt routing. Most frameworks have their own way of doing this if they do support it.",
    "comparisons-table-details.supports_shell": "Whether or not this framework has an app shell, which makes switching pages much faster and cleaner.",
    "comparisons-table-details.supports_deployment": "Whether or not this framework supports easy deployment. Perseus can deploy in one command.",
    "comparisons-table-details.supports_exporting": "Whether or not this framework can operate without a server, as a series of purely static files.",
    "comparisons-table-details.language": "The programming language this framework is built in. (Hint: Rust is the fastest!)",
    "comparisons-table-details.homepage_lighthouse_desktop": "The Lighthouse score out of 100 for desktop (higher is better). These are collected from Google's PageSpeed Insights tool. These are for the framework's website, and may not reflect the performance of all sites made with the framework.",
    "comparisons-table-details.homepage_lighthouse_mobile": "The Lighthouse score out of 100 for mobile (higher is better). These are collected from Google's PageSpeed Insights tool. These are for the framework's website, and may not reflect the performance of all sites made with the framework.",
    "comparisons-sycamore-heading": "Perseus vs Sycamore",
    "comparisons-sycamore-text": "Perseus is a framework that uses Sycamore to write views (the things users see), so there's not much point in comparing the two as competitors. However, Sycamore can be used without Perseus, which works perfectly well, though you'll miss out on features like inbuilt internationalization, static generation (though you could build this yourself), and incremental generation. If you want to build just a bit of your site with Rust, Sycamore is the perfect tool, Perseus is a full framework designed for building entire websites.",
    "comparisons-unknown-heading": "Perseus vs { $name }",
    "docs-title-base": "Perseus Docs",
    "docs-status.outdated": "This version of the documentation is outdated, and features documented here may work differently now. You can see the latest stable version of the docs <a href=\\"en-US/docs/{ $stable }/intro\\" class=\\"underline\\">here</a>.",
    "docs-status.beta": "This version of the documentation is for a version that has only been released in beta, and is not yet stable. Features documented here may not be present in the latest stable version, and they're subject to rapid and drastic change. You can see the latest stable version of the docs <a href=\\"en-US/docs/{ $stable }/intro\\" class=\\"underline\\">here</a>.",
    "docs-status.next": "This version of the documentation is for a version that has not yet been released, and features documented here may not be present in the latest release. You can see the latest stable version of the docs <a href=\\"en-US/docs/{ $stable }/intro\\" class=\\"underline\\">here</a>.",
    "docs-version-switcher.next": "Next (unreleased)",
    "docs-version-switcher.beta": "v{ $version } (beta)",
    "docs-version-switcher.stable": "v{ $version } (stable)",
    "docs-version-switcher.outdated": "v{ $version } (outdated)",
    "plugins-title": "Plugins",
    "plugins-title-full": "Perseus Plugins",
    "plugin-card-author": "By { $author }",
    "plugin-details.repo_link": "Repository:",
    "plugin-details.crates_link": "Crate page:",
    "plugin-details.docs_link": "Docs:",
    "plugin-details.site_link": "Site:",
    "plugin-details.metadata_heading": "Metadata",
    "plugin-details.no_link_text": "N/A",
    "plugin-search.placeholder": "Search",
    "plugin-search.no_results": "No results found.",
    "plugins-desc": "These are all the public plugins for Perseus! If you've made a plugin, and you'd like it to be listed here, please open an issue on our repository!",
    "search": "Search the docs",
    "index-example-switcher.excerpts": "Excerpts",
    "index-example-switcher.full": "Full"
}
`;</script><meta itemprop=__perseus_head_end><script>//</script><body class="bg-white dark:bg-neutral-900"><div id=root><header data-hk=8.0 class="shadow-md sm:p-2 w-full mb-20 bg-neutral-500/30 backdrop-blur-lg text-black dark:text-white"><div data-hk=8.1 class="flex justify-between items-center"><a data-hk=8.2 class="justify-self-start self-center m-3 ml-5 text-md sm:text-2xl text-bold title-font"href=en-US/>Perseus</a><div data-hk=8.3 class="md:hidden m-3 mr-5 tham tham-e-spin tham-w-6"><div data-hk=8.4 class=tham-box><div data-hk=8.5 class="tham-inner bg-black dark:bg-white"></div></div></div><nav data-hk=8.6 class="hidden md:flex"><ul data-hk=8.7 class="mr-5 flex"><li data-hk=9.0 class="m-3 p-1 title-font"><a data-hk=9.1 href=en-US/docs class=px-2>Docs</a><li data-hk=9.2 class="m-3 p-1 title-font"><a data-hk=9.3 href=en-US/comparisons class=px-2>Comparisons</a><li data-hk=9.4 class="m-3 p-1 title-font"><a data-hk=9.5 href=en-US/plugins class=px-2>Plugins</a></ul></nav></div><nav data-hk=8.8 id=mobile_nav_menu class="md:hidden w-full text-center justify-center hidden"><ul data-hk=8.9 class=mr-5><li data-hk=10.0 class="m-3 p-1 title-font"><a data-hk=10.1 href=en-US/docs class=px-2>Docs</a><li data-hk=10.2 class="m-3 p-1 title-font"><a data-hk=10.3 href=en-US/comparisons class=px-2>Comparisons</a><li data-hk=10.4 class="m-3 p-1 title-font"><a data-hk=10.5 href=en-US/plugins class=px-2>Plugins</a></ul><hr data-hk=2.0><div data-hk=2.1 class="text-left p-3 overflow-y-scroll h-[60vh]"><div data-hk=2.2 class="flex w-full justify-center text-center"><div data-hk=2.3 class="max-w-3xl flex flex-col"><select data-hk=4.4 class="p-2 rounded-md text-white bg-indigo-500"><option data-hk=4.5 value=next>Next (unreleased)<option data-hk=4.6 value=0.4.x selected>v0.4.x (stable)<option data-hk=4.0 value=0.3.4>v0.3.4 (outdated)<option data-hk=4.1 value=0.3.0-0.3.3>v0.3.0-0.3.3 (outdated)<option data-hk=4.2 value=0.2.x>v0.2.x (outdated)<option data-hk=4.3 value=0.1.x>v0.1.x (outdated)</select></div></div><div data-hk=2.4 class=docs-links-markdown><h1>Introduction</h1><ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/intro>Introduction</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/quickstart>Quickstart</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/what-is-perseus>What is Perseus?</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/core-principles>Core Principles</a></ul><h1>Your First App</h1><ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/first-app/installation>Installing Perseus</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/first-app/defining>Defining your app</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/first-app/generating-pages>Generating pages</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/first-app/dev-cycle>Development cycle</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/first-app/error-handling>Error handling</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/first-app/deploying>Deploying your app</a></ul><h1>Fundamentals</h1><ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/perseus-app><code>PerseusApp</code></a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/reactor>The reactor</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/routing>Routing and navigation</a> <ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/preloading>Preloading</a></ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/i18n>Internationalization</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/error-views>Error views</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/hydration>Hydration</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/static-content>Static content</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/head-headers>Heads and headers</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/styling>Styling</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/js-interop>Working with JS</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/serving-exporting>Servers and exporting</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/debugging>Debugging</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/testing>Writing tests</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/plugins>Plugins</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/compilation-times>Improving Compilation Times</a></ul><h1>The State Platform</h1><ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/state/intro>Understanding state</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/state/build>Build-time state</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/state/request>Request-time state</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/state/revalidation>Revalidation</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/state/incremental>Incremental generation</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/state/amalgamation>State amalgamation</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/state/browser>Using state</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/state/global>Global state</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/state/helper>Helper state</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/state/suspense>Suspended state</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/state/freezing-thawing>Freezing and thawing</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/state/manual>Manually implementing <code>ReactiveState</code></a></ul><h1>Capsules</h1><ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/capsules/intro>Introduction</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/capsules/using>Using capsules</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/capsules/capsules-vs-components>Capsules vs. components</a></ul><h1>Miscellaneous</h1><ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/migrating>Migrating from v0.3.x</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/faq>Common pitfalls and FAQs</a></ul></div></div></nav></header><main data-hk=2.16 id=scroll-container><div data-hk=2.5 class="flex w-full"><div data-hk=2.6 class="h-screen pt-14 xs:pt-16 sm:pt-20 lg:pt-25 hidden md:block max-w-xs w-full border-r overflow-y-auto"><div data-hk=2.7 class=mr-5><div data-hk=2.8 class="text-left text-black dark:text-white p-3"><aside data-hk=2.9><div data-hk=2.10 class="flex flex-col"><select data-hk=6.4 class="p-2 rounded-md text-white bg-indigo-500"><option data-hk=6.5 value=next>Next (unreleased)<option data-hk=6.6 value=0.4.x selected>v0.4.x (stable)<option data-hk=6.0 value=0.3.4>v0.3.4 (outdated)<option data-hk=6.1 value=0.3.0-0.3.3>v0.3.0-0.3.3 (outdated)<option data-hk=6.2 value=0.2.x>v0.2.x (outdated)<option data-hk=6.3 value=0.1.x>v0.1.x (outdated)</select></div><div data-hk=2.11 class=docs-links-markdown><h1>Introduction</h1><ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/intro>Introduction</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/quickstart>Quickstart</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/what-is-perseus>What is Perseus?</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/core-principles>Core Principles</a></ul><h1>Your First App</h1><ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/first-app/installation>Installing Perseus</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/first-app/defining>Defining your app</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/first-app/generating-pages>Generating pages</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/first-app/dev-cycle>Development cycle</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/first-app/error-handling>Error handling</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/first-app/deploying>Deploying your app</a></ul><h1>Fundamentals</h1><ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/perseus-app><code>PerseusApp</code></a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/reactor>The reactor</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/routing>Routing and navigation</a> <ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/preloading>Preloading</a></ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/i18n>Internationalization</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/error-views>Error views</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/hydration>Hydration</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/static-content>Static content</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/head-headers>Heads and headers</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/styling>Styling</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/js-interop>Working with JS</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/serving-exporting>Servers and exporting</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/debugging>Debugging</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/testing>Writing tests</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/plugins>Plugins</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/fundamentals/compilation-times>Improving Compilation Times</a></ul><h1>The State Platform</h1><ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/state/intro>Understanding state</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/state/build>Build-time state</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/state/request>Request-time state</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/state/revalidation>Revalidation</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/state/incremental>Incremental generation</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/state/amalgamation>State amalgamation</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/state/browser>Using state</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/state/global>Global state</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/state/helper>Helper state</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/state/suspense>Suspended state</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/state/freezing-thawing>Freezing and thawing</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/state/manual>Manually implementing <code>ReactiveState</code></a></ul><h1>Capsules</h1><ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/capsules/intro>Introduction</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/capsules/using>Using capsules</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/capsules/capsules-vs-components>Capsules vs. components</a></ul><h1>Miscellaneous</h1><ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/migrating>Migrating from v0.3.x</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.4.x/faq>Common pitfalls and FAQs</a></ul></div></aside></div></div></div><div data-hk=2.12 class="h-screen pt-14 xs:pt-16 sm:pt-20 lg:pt-25 grid grid-rows-[1fr_min-content] w-full overflow-y-auto"><div data-hk=2.13 class="px-3 w-full sm:mr-auto sm:ml-auto sm:max-w-prose lg:max-w-3xl xl:max-w-4xl 2xl:max-w-5xl min-w-0"><main data-hk=2.14 class="text-black dark:text-white"><div data-hk=1.0 class="markdown min-w-0 pb-10"><h1>Capsules vs. components</h1><p>With all this capsules stuff, you might be wondering whether you should be using capsules for everything: here's the short answer, <strong>don't</strong>. This page will go through the differences between normal <a href=https://sycamore-rs.netlify.app/docs/basics/components>Sycamore components</a>, which don't integrate with the Perseus state platform, and full-blown capsules.<h2>View generation</h2><p>The first major similarity between capsules and components is that they both generate Sycamore views, but they do this at different times. If you use a component for something, then Perseus will render it immediately, no matter what, whereas capsules need to know what their state is, which has to be retrieved from the engine, meaning their renders will be delayed until a request has been completed. Note however that this isn't the case with <em>initial loads</em> (when a user comes to your app from the outside internet), and, then, all capsules will be served together as one HTML bundle.<p>This difference might seem minor, but it can cause major problems if you start to use capsules for everything. For example, let's say you create a styling library with capsules for buttons, checkboxes, etc., thinking it's a great idea because you can generate state for them in advance, perhaps using some advanced usage of incremental generation as a property-parsing system. However, if you then have a capsule for a sidebar, with a capsule inside that for a section, and <em>another</em> capsule inside that for a button, you'll end up with three layers of nested capsules. Importantly, Perseus doesn't know what capsules something (either a page or a widget) depends on <em>until it renders it</em>. That means Perseus has to render your page, putting the sidebar in a loading state until we have its state, and then it can render the sidebar, but then it finds that that's dependent on a section widget, so it goes and gets that one's state, and <em>then</em> it finds the button capsule, and has to go and get its state. Now, if a capsule has no state, then no server trip is necessary, but <strong>capsules without state are always better as Sycamore components</strong>, since all a capsule is is a component with access to the Perseus state platform.<p>The main thing to take away from all this rendering complexity is that <strong>the more levels of capsule nesting you have, the slower your page will be</strong>. Specifically, if it takes <em>n</em> seconds to get a single widget's state from the server, and you have <em>l</em> levels of nesting, your entire page will need to be re-rendered <em>l + 1</em> times on the engine-side to create an initial load, and it will take <em>(n + 1) * l</em> seconds to render your entire page for a subsequent load. If a single server trip takes even one second, and you have three levels of capsule nesting, that's four seconds to render your whole page, during which the user will be put through a slew of loading states. To our knowledge, this is the most efficient way we can do this while maintaining the ergonomics of Perseus (such as making sure you don't have to define which widgets a page uses in advance, which would severely limit the utility of the capsules system), but it has substantial tradeoffs when you start to use capsules in an overly nested way. Again, if it can be implemented as a component, it probably should be.<h2>State and properties</h2><p>The second big difference between capsules and components is how flexible they are. A capsule is a full-on template that can be filled in with the Perseus state platform, and then modified by some properties the calling page/widget provides, while a component just has those properties. This doesn't mean widgets are always better, it means they're a great tool <em>when you need state</em>. For example, there is absolutely no point whatsoever in making a button an independent capsule, because it doesn't need state. Any customization of it can (and should) be performed using the properties system, and therefore it shoudl be a component, not a capsule.<p>This is the reason why Perseus deliberately does not support adding Sycamore's <code>Children<'_></code> type to the properties of a capsule, or passing through HTML properties like <code>class</code> or <code>style</code> through, since capsules are intended to be <em>sections of pages</em>, not atomic units. Despite the next version of Sycamore supporting this kind of property passthrough, Perseus <em>will not</em> support this with capsules to remove ambiguity about their purpose.<h2>The intuition</h2><p>By now, you're probably waiting for some kind of general rule to decide whether you should use a capsule or a component, and here it is: <strong>do not use a capsule where a component would do</strong>, because, chances are, it will just slow down both your development cycle and your app. If you need the state platform though, and you avoid high levels of capsule nesting, capsules can be an incredibly powerful tool to greatly <em>improve</em> the speed of your app, while simplifying complex workflows and enabling previously impossible coding patterns.<p>But, from here, there's still more to be said. If you apply what you've learned so far in this section to capsules, you'll probably use them only very rarely, but this isn't the intention. Capsules fit very nicely with any of the versions of Brad Frost's <a href=https://atomicdesign.bradfrost.com/chapter-2/><em>Atomic Design</em></a> system, whereby you split your design up into <em>atoms</em>, <em>molecules</em>, <em>organisms</em>, <em>templates</em>, and <em>pages</em>. The atoms would be things like buttons, etc., for which you should use components, since these will be customized largely by properties, and won't need state of their own. Molecules are small units created with atoms, like a search bar. Generally, these too are better as components, but sometimes they'll need state, and they should be implemented as capsules (this is certainly the fuzziest category). Organisms are sections of your page, comprised of a number of molecules to form a functioning interface, like a header or sidebar. These should nearly always be implemented as capsules if they have any parts that need state, since this will allow persisting things like the entry typed in a search bar in a header across pages, due to Perseus' unique state caching system. When you have reactive molecules within organisms, make the reactive parts the state of the organism, and make it a capsule. Finally, you have templates and pages, which, as you might notice, already have a fairly prominent place in Perseus! (And no, we didn't design Perseus on the back of atomic design, it's just a methodology that happens to make a heck of a lot of sense when applied to Perseus specifically, but the naming similarity in the last two is purely coincidental, and they do mean slightly different things in the atomic method.)<h2>The rules</h2><p>So, since we're programmers, and we like to have a nice methodology to follow, here's one for you. By all means, use this, don't use it, rewrite it yourself, do whatever you like. There will be many cases that will not be covered by these rules, and there will be others that are poorly covered. They are made to be broken, and you should break them if it makes sense to do so! Nonetheless, they will be helpful to some, especially those starting out with Perseus, so here they are:<ol><li>If it doesn't have state, it should be a component.<li>If it can be implemented as a component, it should be a component.<li>If it's a small, composable unit of a larger interface, it should be a component (even if it might have reactivity of its own, like a search bar; think instead about how that reactivity should be cached, e.g. you probably don't want all the search bars for completely difference things on your site synchronizing their states).<li>If it's a somewhat self-contained interface on your pages, like a sidebar or header, that has state of its own, it should be a capsule.<li>If it's something like in number 4, but it doesn't have any state, it should be a component.<li>If it has a constant form, but many versions (e.g. a product display), it should be a capsule so it can use incremental generation.<li>Avoid nesting capsules wherever possible! A nesting of two or three is fine, but any more than that and you'll likely start to see performance problems!<li>If you want to delay loading a heavy part of your page, make it a capsule, and use <code>.delayed_widget()</code>.</ol></div></main></div><div data-hk=2.15 class=row-start-2><footer data-hk=7.0 class="w-full flex justify-center py-5 bg-black text-white"><p data-hk=7.1 class="mx-5 text-center"><span data-hk=7.2>© <a href=https://github.com/arctic-hen7 class=underline>arctic-hen7</a> 2021-2023, see license <a href=https://github.com/framesurge/perseus/blob/main/LICENSE class=underline>here</a>.</span></footer></div></div></div></main><script data-hk=0.0 src=.perseus/static/prism.js defer></script><script data-hk=0.1>window.Prism.highlightAll();</script></div><div id=__perseus_popup_error></div>