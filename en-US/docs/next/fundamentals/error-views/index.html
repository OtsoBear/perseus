<!DOCTYPE html><html lang=en-US class=light><head><base href=https://framesurge.sh/perseus/><meta charset=UTF-8><meta name=viewport content="width=device-width, initial-scale=1.0"><link rel=stylesheet href=.perseus/static/tailwind.css><link rel=stylesheet href=.perseus/static/styles/style.css><script type=module>window.__PERSEUS_RENDER_CFG = `{"docs/0.3.4/reference/plugins/tinker":"docs","docs/0.1.x/strategies/incremental":"docs","docs/state/global":"docs","docs/state/revalidation":"docs","docs/0.3.0-0.3.3/advanced/arch":"docs","docs/0.3.4/reference/deploying/serverless":"docs","docs/0.3.4/reference/define-app":"docs","docs/next/state/request":"docs","docs/faq":"docs","docs/0.4.x/capsules/capsules-vs-components":"docs","docs/state/suspense":"docs","docs/0.3.4/advanced/arch":"docs","docs/0.4.x/fundamentals/compilation-times":"docs","docs/0.2.x/config-managers":"docs","docs/0.4.x/capsules/using":"docs","docs/0.1.x/config_managers":"docs","docs/0.2.x/strategies/revalidation":"docs","docs/next/intro":"docs","docs/0.3.4/reference/perseus-app":"docs","docs/0.3.0-0.3.3/define-app":"docs","docs/0.4.x/state/build":"docs","docs/0.3.0-0.3.3/i18n/translations-managers":"docs","docs/0.3.4/reference/plugins/publishing":"docs","docs/0.2.x/hello-world":"docs","docs/0.3.0-0.3.3/error-pages":"docs","docs/0.3.4/reference/hydration":"docs","docs/0.3.0-0.3.3/testing/intro":"docs","docs/next/first-app/error-handling":"docs","docs/0.2.x/testing/fantoccini-basics":"docs","docs/0.1.x/tutorials/first_app/setup":"docs","docs/state/intro":"docs","":"","docs/0.3.0-0.3.3/hydration":"docs","docs/0.1.x/setup":"docs","docs/next/first-app/installation":"docs","docs/0.3.0-0.3.3/static-content":"docs","docs/0.4.x/first-app/error-handling":"docs","docs/0.4.x/fundamentals/styling":"docs","docs/0.4.x/core-principles":"docs","docs/next/first-app/dev-cycle":"docs","docs/0.3.4/reference/strategies/build-paths":"docs","docs/0.3.4/reference/deploying/size":"docs","docs/fundamentals/serving-exporting":"docs","docs/0.4.x/capsules/intro":"docs","docs/next/state/intro":"docs","docs/0.3.4/reference/deploying/serverful":"docs","docs/0.2.x/cli":"docs","docs/first-app/generating-pages":"docs","docs/first-app/defining":"docs","docs/0.3.4/reference/state/rx":"docs","docs/0.2.x/i18n/intro":"docs","docs/0.3.0-0.3.3/deploying/size":"docs","docs/0.3.0-0.3.3/i18n/using":"docs","docs/fundamentals/debugging":"docs","docs/state/amalgamation":"docs","docs/next/state/freezing-thawing":"docs","docs/0.3.0-0.3.3/snooping":"docs","docs/0.3.4/reference/pitfalls-and-bugs":"docs","docs/fundamentals/preloading":"docs","docs/0.3.4/reference/plugins/using":"docs","docs/0.2.x/i18n/translations-managers":"docs","docs/state/freezing-thawing":"docs","docs/0.3.4/reference/strategies/intro":"docs","docs/next/fundamentals/debugging":"docs","docs/0.1.x/strategies/build_paths":"docs","docs/0.3.4/advanced/routing":"docs","docs/0.3.0-0.3.3/what-is-perseus":"docs","docs/0.4.x/fundamentals/i18n":"docs","docs/0.3.0-0.3.3/deploying/relative-paths":"docs","docs/next/fundamentals/testing":"docs","docs/0.3.0-0.3.3/deploying/docker":"docs","docs/0.3.0-0.3.3/plugins/tinker":"docs","docs/0.2.x/testing/intro":"docs","docs/0.3.4/advanced/intro":"docs","docs/0.1.x/routing":"docs","docs/0.1.x/tutorials/first_app/template":"docs","docs/next/state/incremental":"docs","docs/fundamentals/static-content":"docs","docs/0.3.4/reference/testing/checkpoints":"docs","docs/next/fundamentals/static-content":"docs","docs/fundamentals/js-interop":"docs","docs/0.3.4/reference/plugins/control":"docs","docs/0.2.x/templates/setting-headers":"docs","docs/0.3.0-0.3.3/hello-world":"docs","docs/0.3.0-0.3.3/updating":"docs","docs/capsules/capsules-vs-components":"docs","docs/0.3.4/reference/live-reloading":"docs","docs/0.2.x/updating":"docs","docs/next/fundamentals/styling":"docs","docs/next/fundamentals/plugins":"docs","docs/0.4.x/fundamentals/serving-exporting":"docs","docs/0.3.0-0.3.3/plugins/intro":"docs","docs/0.3.4/reference/strategies/build-state":"docs","docs/migrating":"docs","docs/intro":"docs","docs/0.3.0-0.3.3/plugins/publishing":"docs","docs/0.3.0-0.3.3/plugins/control":"docs","docs/0.1.x/serving":"docs","docs/0.2.x/advanced/routing":"docs","docs/state/manual":"docs","docs/0.1.x/error_pages":"docs","docs/next/state/manual":"docs","docs/fundamentals/hydration":"docs","docs/0.3.0-0.3.3/plugins/functional":"docs","docs/0.4.x/first-app/installation":"docs","docs/0.3.4/reference/stores":"docs","docs/0.3.4/reference/cli":"docs","docs/0.2.x/strategies/build-state":"docs","docs/0.2.x/what-is-perseus":"docs","docs/what-is-perseus":"docs","docs/0.1.x/strategies/build_state":"docs","docs/0.3.0-0.3.3/strategies/incremental":"docs","docs/next/capsules/capsules-vs-components":"docs","docs/0.3.0-0.3.3/i18n/intro":"docs","docs/next/fundamentals/preloading":"docs","docs/0.4.x/fundamentals/error-views":"docs","docs/0.4.x/migrating":"docs","docs/0.3.4/reference/engines":"docs","docs/0.4.x/state/manual":"docs","docs/0.3.4/reference/state/global":"docs","docs/next/core-principles":"docs","docs/0.3.4/reference/snooping":"docs","docs/0.3.0-0.3.3/templates/intro":"docs","docs/0.3.0-0.3.3/views":"docs","docs/0.3.4/reference/deploying/relative-paths":"docs","docs/0.4.x/fundamentals/testing":"docs","docs/0.1.x/strategies/revalidation":"docs","docs/0.4.x/fundamentals/plugins":"docs","docs/next/fundamentals/perseus-app":"docs","docs/next/state/suspense":"docs","docs/next/capsules/using":"docs","docs/0.3.0-0.3.3/stores":"docs","docs/0.2.x/advanced/initial-loads":"docs","comparisons":"comparisons","docs/0.4.x/state/helper":"docs","docs/state/request":"docs","docs/0.3.0-0.3.3/strategies/revalidation":"docs","docs/0.3.4/intro":"docs","docs/0.3.0-0.3.3/exporting":"docs","docs/0.3.0-0.3.3/strategies/request-state":"docs","docs/0.4.x/fundamentals/debugging":"docs","docs/fundamentals/compilation-times":"docs","docs/0.3.0-0.3.3/cli":"docs","docs/0.3.4/reference/styling":"docs","docs/0.4.x/state/incremental":"docs","docs/0.3.0-0.3.3/templates/metadata-modification":"docs","docs/0.2.x/advanced/intro":"docs","docs/0.4.x/fundamentals/head-headers":"docs","docs/0.4.x/quickstart":"docs","docs/0.3.4/reference/testing/manual":"docs","docs/0.3.0-0.3.3/server-communication":"docs","docs/state/incremental":"docs","docs/0.4.x/fundamentals/perseus-app":"docs","docs/first-app/installation":"docs","docs/0.2.x/views":"docs","docs/0.3.0-0.3.3/deploying/intro":"docs","docs/0.2.x/i18n/defining":"docs","docs/0.4.x/first-app/deploying":"docs","docs/0.3.4/reference/state/idb-freezing":"docs","docs/core-principles":"docs","docs/0.3.4/reference/plugins/functional":"docs","docs/0.4.x/state/revalidation":"docs","docs/0.4.x/intro":"docs","docs/0.3.0-0.3.3/advanced/subsequent-loads":"docs","docs/0.3.4/reference/i18n/defining":"docs","docs/0.3.4/reference/state/hsr":"docs","docs/0.2.x/advanced/arch":"docs","docs/0.3.4/reference/templates/metadata-modification":"docs","docs/0.1.x/strategies/intro":"docs","docs/0.3.4/reference/deploying/docker":"docs","docs/0.3.4/reference/error-pages":"docs","docs/0.4.x/faq":"docs","docs/0.3.4/reference/deploying/intro":"docs","docs/0.3.4/reference/updating":"docs","docs/next/first-app/generating-pages":"docs","docs/0.3.4/reference/strategies/request-state":"docs","docs/next/faq":"docs","docs/next/capsules/intro":"docs","docs/fundamentals/reactor":"docs","docs/0.3.0-0.3.3/strategies/build-paths":"docs","docs/0.4.x/first-app/dev-cycle":"docs","docs/0.3.0-0.3.3/deploying/serverless":"docs","docs/0.4.x/fundamentals/hydration":"docs","docs/0.3.0-0.3.3/testing/checkpoints":"docs","docs/0.1.x/arch":"docs","docs/0.3.0-0.3.3/advanced/intro":"docs","docs/0.3.4/advanced/subsequent-loads":"docs","docs/0.2.x/static-content":"docs","docs/0.3.4/reference/i18n/using":"docs","docs/state/browser":"docs","docs/0.3.0-0.3.3/i18n/other-engines":"docs","docs/fundamentals/error-views":"docs","docs/0.2.x/intro":"docs","docs/0.2.x/strategies/incremental":"docs","docs/fundamentals/plugins":"docs","docs/next/migrating":"docs","docs/0.1.x/building":"docs","docs/0.3.4/what-is-perseus":"docs","docs/0.3.0-0.3.3/ejecting":"docs","docs/0.4.x/state/browser":"docs","docs/next/fundamentals/routing":"docs","docs/0.2.x/templates/metadata-modification":"docs","docs/0.4.x/state/freezing-thawing":"docs","docs/next/first-app/deploying":"docs","docs/capsules/using":"docs","docs/0.3.4/core-principles":"docs","docs/0.3.4/reference/views":"docs","docs/0.3.0-0.3.3/advanced/define_app":"docs","docs/0.2.x/testing/checkpoints":"docs","docs/0.3.4/reference/strategies/incremental":"docs","docs/0.3.4/advanced/initial-loads":"docs","docs/0.3.0-0.3.3/plugins/using":"docs","plugins":"plugins","docs/next/state/helper":"docs","docs/next/what-is-perseus":"docs","docs/0.2.x/error-pages":"docs","docs/0.1.x/cli":"docs","docs/0.2.x/ejecting":"docs","docs/0.2.x/i18n/using":"docs","docs/0.3.4/tutorials/hello-world":"docs","docs/0.1.x/tutorials/first_app/intro":"docs","docs/0.2.x/advanced/subsequent-loads":"docs","docs/0.2.x/strategies/build-paths":"docs","docs/0.3.0-0.3.3/strategies/build-state":"docs","docs/0.3.4/reference/i18n/intro":"docs","docs/0.2.x/strategies/amalgamation":"docs","docs/0.3.0-0.3.3/intro":"docs","docs/0.2.x/deploying/exporting":"docs","docs/fundamentals/perseus-app":"docs","docs/0.2.x/i18n/other-engines":"docs","docs/next/fundamentals/i18n":"docs","docs/0.3.4/reference/plugins/security":"docs","docs/0.4.x/fundamentals/reactor":"docs","docs/0.2.x/testing/manual":"docs","docs/0.4.x/fundamentals/js-interop":"docs","docs/0.3.4/reference/index-view":"docs","docs/0.3.4/reference/templates/router-state":"docs","docs/0.3.0-0.3.3/second-app":"docs","docs/first-app/dev-cycle":"docs","docs/next/fundamentals/compilation-times":"docs","docs/0.3.4/reference/strategies/revalidation":"docs","docs/0.3.4/tutorials/second-app":"docs","docs/next/fundamentals/serving-exporting":"docs","docs/0.3.0-0.3.3/plugins/writing":"docs","docs/next/state/browser":"docs","docs":"docs","docs/0.4.x/state/amalgamation":"docs","docs/0.3.4/reference/plugins/intro":"docs","docs/fundamentals/i18n":"docs","docs/next/fundamentals/reactor":"docs","docs/0.3.4/tutorials/auth":"docs","docs/0.3.0-0.3.3/testing/fantoccini-basics":"docs","docs/0.3.4/reference/testing/intro":"docs","docs/fundamentals/styling":"docs","docs/0.3.0-0.3.3/plugins/security":"docs","docs/0.3.0-0.3.3/testing/manual":"docs","docs/0.3.0-0.3.3/advanced/routing":"docs","docs/fundamentals/testing":"docs","docs/0.3.4/reference/testing/fantoccini-basics":"docs","docs/next/state/build":"docs","docs/0.4.x/first-app/defining":"docs","docs/0.2.x/deploying/intro":"docs","docs/first-app/deploying":"docs","docs/next/state/revalidation":"docs","docs/state/build":"docs","docs/0.2.x/define-app":"docs","docs/0.3.0-0.3.3/strategies/intro":"docs","docs/next/quickstart":"docs","docs/0.4.x/fundamentals/preloading":"docs","docs/next/fundamentals/hydration":"docs","docs/0.4.x/state/intro":"docs","docs/fundamentals/head-headers":"docs","docs/0.3.4/reference/strategies/amalgamation":"docs","docs/next/fundamentals/head-headers":"docs","docs/0.4.x/state/request":"docs","docs/0.3.4/reference/server-communication":"docs","docs/0.1.x/intro":"docs","docs/next/state/amalgamation":"docs","docs/0.2.x/debugging":"docs","docs/0.3.0-0.3.3/debugging":"docs","docs/0.2.x/styling":"docs","docs/0.3.0-0.3.3/strategies/amalgamation":"docs","docs/next/fundamentals/js-interop":"docs","docs/0.1.x/integrations/actix-web":"docs","docs/0.4.x/state/global":"docs","docs/0.3.0-0.3.3/i18n/defining":"docs","docs/next/first-app/defining":"docs","docs/0.3.4/reference/plugins/writing":"docs","docs/quickstart":"docs","docs/0.3.4/reference/ejecting":"docs","docs/first-app/error-handling":"docs","docs/0.2.x/strategies/intro":"docs","docs/fundamentals/routing":"docs","docs/0.3.0-0.3.3/advanced/initial-loads":"docs","docs/0.4.x/first-app/generating-pages":"docs","docs/0.2.x/strategies/request-state":"docs","docs/0.1.x/tutorials/first_app/app":"docs","docs/0.2.x/second-app":"docs","docs/0.4.x/fundamentals/routing":"docs","docs/next/fundamentals/error-views":"docs","docs/state/helper":"docs","docs/0.4.x/fundamentals/static-content":"docs","docs/0.3.0-0.3.3/pitfalls-and-bugs":"docs","docs/0.3.4/reference/i18n/translations-managers":"docs","docs/0.3.4/reference/exporting":"docs","docs/0.3.4/advanced/route-announcer":"docs","docs/0.4.x/what-is-perseus":"docs","docs/next/state/global":"docs","docs/0.3.0-0.3.3/deploying/serverful":"docs","docs/0.3.4/reference/debugging":"docs","docs/0.4.x/state/suspense":"docs","docs/0.2.x/templates/intro":"docs","docs/0.3.4/reference/static-content":"docs","docs/0.3.0-0.3.3/styling":"docs","docs/0.3.4/reference/templates/setting-headers":"docs","docs/0.3.0-0.3.3/templates/setting-headers":"docs","docs/0.3.4/reference/templates/intro":"docs","docs/0.3.4/reference/i18n/other-engines":"docs","docs/0.3.4/reference/state/freezing":"docs","docs/0.1.x/strategies/request_state":"docs","docs/capsules/intro":"docs","docs/0.1.x/templates":"docs"}`;

        import init from "https://framesurge.sh/perseus/.perseus/bundle.js";
        async function main() {
            await init("https://framesurge.sh/perseus/.perseus/bundle.wasm");
        }
        main();

        
        

window.__PERSEUS_GLOBAL_STATE = `null`;</script><meta itemprop=__perseus_head_boundary><title>Error Views | Perseus Docs</title><link rel=stylesheet href=.perseus/static/styles/markdown.css><link rel=stylesheet href=.perseus/static/styles/docs_links_markdown.css><link rel=stylesheet href=.perseus/static/prism.css><script>
window.__PERSEUS_INITIAL_STATE = `{"content":"<h1>Error Views</h1>\\n<p>If there's one thing that's guaranteed to happen in all software, it would be errors, and, when they do happen, your app needs to be prepared for them. Internally, there are quite a few failure scenarios that Perseus might encounter: for example, if the user loses their internet connection while Perseus is trying to fetch a page, it won't be able to complete that. This would be a failure in the <em>framework</em>, not your app. In these cases, as well as in some cases of failures caused by your code (e.g. a mistyped link address, a deliberate authentication failure, etc.), Perseus will render what we call <em>error views</em>. These are basically special Sycamore <code>View</code>s that your app holds onto until an error occurs, at which time it will automatically display them appropriately. </p>\\n<p>One thing to make clear about error views is that <em>you don't invoke these, Perseus does</em>. What you are writing are a series of instructions to Perseus on what to do in each type of failure: you are <strong>not</strong> writing error handling for your own logic. If, for example, a user enters a password that's too short and submits a form, you would not display a Perseus error view, you would handle errors manually there. The reason for this is that there are simply too many cases of error handling in real-world apps for Perseus to be able to reasonably and flexibly handle them all.</p>\\n<p>By convention, error views are usually placed in an <code>src/error_views.rs</code> file in your project, though this could also be a folder if your error views are particularly elaborate.</p>\\n<h2><code>ClientError</code></h2>\\n<p>All errors in Perseus, even ones that occur on the server, fall under the <a href=\\"https://docs.rs/perseus/0.4/perseus/errors/enum.ClientError.html\\"><code>ClientError</code></a> <code>enum</code>, which you'll typically <code>match</code> against to determine what to render. In terms of semantic versioning, this <code>enum</code> is considered stable, and new variants will not be added except in a breaking change. Let's go through those variants one by one.</p>\\n<h3><code>ServerError</code></h3>\\n<p>A <code>ServerError</code> is probably the error type you'll come into contact with most frequently, because it denotes errors that have been propagated down by the server explicitly. This usually means something failed on its end, which could be anything from a <em>404 Not Found</em> error to a <em>500 Internal Server Error</em>. This variant has two properties: one for its <a href=\\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Status\\">HTTP status code</a>, and another for an actual error message, which will be in English (for internationalized apps).</p>\\n<p>Because of the frequency of this error, it is very common to handle status variants independently. For example, the <a href=\\"https://framesurge.sh/perseus/en-US/docs/next/fundamentals/error-views\\">error views</a> example in the Perseus repository handles a 404 error independently (because people mistype URLs far more frequently than servers fail), and then handles anything starting with a 4 (client error) separately to anything starting with a 5 (server error).</p>\\n<p>One important difference between <code>ServerError</code> and all the other error types is that it is the only one that occurs <em>before</em> the client. This means it is the only error type that will be reflected in what the user sees, before hydration. For example, let's say the user mistyped a URL and ends up at a 404 error page. Because this error 'occurred' on the server (in that that was where Perseus first noticed that something had gone wrong), the HTML that goes to the client will show that error. If, however, something like a hydration error had occurred (which would <em>not</em> fall under <code>ServerError</code>), the server might have handled everything fine, and the user may be able to still see all the content they want, it just won't be interactive. In these cases, it's better for user experience not to completely delete all the content that has been served statically, just because it isn't interactive. In these cases, Perseus will display a popup error.</p>\\n<h3><code>FetchError</code></h3>\\n<p>Fetch errors are fairly self-explanatory, and occur when there has been a failure in communicating with the server. There are a few sub-variants of this, governed by the <a href=\\"https://docs.rs/perseus/0.4/perseus/errors/enum.FetchError.html\\"><code>FetchError</code></a> type.</p>\\n<p>You may notice in the API documentation that there's a <code>FetchError::NotOk</code> variant, which you might expect to fire when the user hits a 404 in what's called a <em>subsequent load</em> (i.e. any load of another page in the app where the user has come from somewhere else in the app, rather than an outside website, like a search engine). However, Perseus actually performs route matching on the client-side, before it makes any requests, which is why broken links in Perseus will not lead to any network requests. For subsequent loads, anything other than a <em>200 OK</em> response indicates a server error.</p>\\n<h3><code>PluginError</code></h3>\\n<p>Plugin errors are exactly what it says on the tin: any error that a plugin can produce. Because all plugin functions are implicitly fallible, any plugin could, at any time, return any error. Since there are a number of opportunities for plugins to run just before a Perseus app starts, they can produce errors, which will often be critical (if they occur before your app starts, Perseus will have to perform a full abort).</p>\\n<h3><code>ThawError</code></h3>\\n<p>Thaw errors only apply to you if you're using the <a href=\\"https://framesurge.sh/perseus/en-US/docs/next/state/freezing-thawing\\">state freezing</a> system, and they usually arise from corrupted state. Very importantly, thaw errors are <em>sleeper errors</em>, meaning that you might thaw some frozen state that has an error in it, and then that error might only become apparent much later. This is because Perseus' thawing mechanism is gradual: state is only deserialized when a page needs it. So, if only one page has invalid state, the thaw error will occur much later.</p>\\n<p>However, in the vast majority of cases of corruption, the whole frozen app will be garbled, and Perseus will detect this error and return it immediately, avoiding sleepers.</p>\\n<h3><code>PlatformError</code></h3>\\n<p>Platform errors are currently not really used in Perseus, but, in future, they will be used to make the render backend of Perseus generic so that it could be used beyond the browser. If you're running in a browser though, and you get this error, you can be fairly confident of a critical failure, and you shouldn't expect your error message to even display. An example of a cause for this kind of error would be the <code>window</code> object not being defined. To see examples of this error, try running a Perseus app in NodeJS, and see what happens...</p>\\n<h3><code>PreloadError</code></h3>\\n<p>Preload errors occur when you try to preload something that's invalid, and they will nearly always be the result of failures in your own code (usually mistyping a template name or the like).</p>\\n<h3><code>InvariantError</code></h3>\\n<p>Invariant errors are the most insidious kind of error in Perseus: they arise from internal invariants not being upheld within Perseus. For example, all Perseus apps are expected to define, within the document metadata, a global state. For apps that don't have a global state, they should explicitly declare the fact that they don't have one. However, if a hypothetical overzealous minifcation system decided to strip out the empty global state declaration, deciding it was useless, Perseus would be unable to function. The reason these sorts of things don't resolve to panics is that, unlike most Rust programs, where invariants are simply logical properties that we can't prove to the compiler, in Perseus there's a divide between the client and the server: the network. That means that we might be 100% certain that all invariants are upheld on the server-side, but, by the time we get to the client-side, we might be looking at a completely different file type.</p>\\n<p>In short, these errors are rare, but catastrophic, and usually cannot be recovered from.</p>\\n<p>However, there are some cases in which these errors <em>might</em> be caused by your code. The most obvious is if you try to fetch the wrong global state type. Let's say you registered <code>MyGlobalState</code>, but then you try to get <code>MyPageState</code> by accident. Because Perseus uses downcasting to manage state, this would lead to a runtime invariant error. However, in this case, it would be perfectly reasonable for a confused user to go to a different page instead, so we don't panic and fail the whole system.</p>\\n<h3><code>Panic</code></h3>\\n<p>Finally, we come to panics, which Perseus takes a unique approach to. Rather than having you set a panic handler, Perseus does it for you, because there are several additional things it needs to do. First, it will print messages to the console telling the user what has happened, just in case everything goes pear-shaped after that (remember, we might be panicking because the <code>window</code> doesn't exist, in which case we sure aren't going to be able to display error messages). Then, it will display a popup error that you set the contents of through this handler. Generally, a panic handler should be quite apologetic, because there's literally no way to proceed from here, and the app is practically guaranteed to fail completely. You can also set custom panic handling logic, which will be executed once the message has been displayed, and this is usually a good time to do things like report the error to a crash analytics server. (Note that this is distinct from the <code>crash</code> plugin opportunity, which would occur in the case of a critical startup invariant error.)</p>\\n<p>If you're coming from non-web Rust, you might be thinking you can just set a <code>catch_unwind</code> and restart your app nicely, but Wasm uses <code>panic = &quot;abort&quot;</code> by default, meaning such handlers are meaningless. Also, while you could re-instantiate Perseus manually, it's not recommended at all, since panics usually indicate that something has gone critically wrong, and that's likely to repeat itself. In general, you should ask the user to restart the app manually by reloading the page, which should fix most spontaneous errors.</p>\\n<h2>Error positioning</h2>\\n<p>One very unique part of Perseus' error handling system that's very important is its concept of <em>error positioning</em>, i.e. how an error appears. There are are three options for this, which correspond to the variants of the <a href=\\"https://docs.rs/perseus/0.4/perseus/error_views/enum.ErrorPosition.html\\"><code>ErrorPostion</code></a> <code>enum</code>. The first is that the error will take up the whole page, the second is that it will take up the whole of a widget (such errors will of course only be triggered by widgets), and the third is that the error will be confined to a popup.</p>\\n<p>It's important to check what kind of error position you have for two reasons: the first is so that you don't display a full-page view with <code>100vh</code> styling all over the place if it ends up being displayed in a tiny popup, and the second is because, in a popup error view, you won't have access to a router. This means that any links placed into a popup error will be handled with the browser's default behavior. While this is fine, it may not be what you expect, so be aware of this.</p>\\n<p>Perseus decides how to position an error based on some simple rules: if it's an <em>initial load</em> where the error occurred (i.e. the user has come to your app from the outside internet, e.g. from a search engine), then check if it's a <code>ClientError::ServerError</code>. If so, <code>Page</code>, if not, <code>Popup</code>. If it's a <em>subsequent load</em> (i.e. where the user has gone from one page to another inside your app), then this is delegated to you through the <code>subsequent_load_determinant_fn</code> function, which you can set on your <a href=\\"https://docs.rs/perseus/0.4/perseus/prelude/struct.ErrorViews.html\\"><code>ErrorViews</code></a>. If you don't set this though, the same rules are applied automatically.</p>\\n<p>The reason behind these rules is based on user experience. Any error that is not a <code>ServerError</code> will have occurred on the client-side, right? So that means the server was fine, which in turn means that the server-side rendering was okay. That means there's prerendered content that's perfectly valid sitting in front of the user, and they can read it. They might not be able to interact with it, but, in nearly all cases, it's better that they can't interact with it than that they can't see it at all. There is nothing more infuriating than going to a news website, seeing the article prerendered in front of you, and then having that lovely content be replaced with an error message.</p>\\n<p>However, if you have some cases where you know for certain that the error should take up the whole page, because the prerendered content is bad in some way, then you can always style the popup error to be absolutely positioned and take up the whole page.</p>\\n<p>Popup errors will be rendered in a <code>&lt;div&gt;</code> with the HTML <code>id</code> <code>__perseus_popup_error</code>, which you can use to style it arbitrarily.</p>\\n<h2>Error context</h2>\\n<p>Because Perseus is, for the millionth time, a very complex system, errors can occur in different places. For example, an error that occurs in a plugin before the app is started will mean that you can't have access to something like a translator, because it literally doesn't exist yet. Such errors are rare, but they can definitely happen, and this is why Perseus provides an <a href=\\"https://docs.rs/perseus/0.4/perseus/error_views/enum.ErrorContext.html\\"><code>ErrorContext</code></a>. This has four variants, each corresponding to a different level of interactivity that Perseus has, which you can read about in detail <a href=\\"https://docs.rs/perseus/0.4/perseus/error_views/enum.ErrorContext.html\\">here</a>.</p>\\n<p>One important thing to understand about error contexts is how they interact with internationalized apps. Perseus will always make a best effort to give your error views a translator, to the point that, if the user goes to, say, <code>/bad-page</code>, Perseus will first resolve it to a localized version (e.g. <code>/en-US/bad-page</code>), and only <em>then</em> handle the routing error. However, in exported apps, the situation is very different, because error views can be managed beautifully on the client-side, but 404 errors in particular are handled by exporting the error page to a static file, usually called <code>404.html</code>, which your serving infrastructure is responsible for providing. Unfortunately, there are very few providers who support localized error views, and, in such cases, error views will always be non-internationalized. However, Perseus will do all it can to, on the client-side, provide a translator. In some cases, however, this may be simply impossible. If you're using internationalization, it's generally recommended to avoid exporting for this reason.</p>\\n<h2>Writing <code>ErrorViews</code></h2>\\n<p>When you actually write your error views, it is surprisingly simple. Just call <code>ErrorViews::new()</code> and provide a closure that takes four arguments: a Sycamore scope, the <code>ClientError</code> that occurred, an <code>ErrorContext</code>, and an <code>ErrorPosition</code>. Then, match them as you like and return a tuple of two <code>View</code>s: the first for the document metadata, and the second for the body of the error. Note that popup errors will have their head views ignored, as will widget errors. (In such cases, you can use <code>View::empty()</code> to just produce an empty view.) You can see a full example of using error views <a href=\\"https://github.com/framesurge/perseus/tree/main/examples/core/error_views\\">here</a>.</p>\\n","current_version":"next","manifest":{"0.1.x":{"docs_rs":"0.1","git":"v0.1.4","state":"outdated"},"0.2.x":{"docs_rs":"0.2","git":"v0.2.3","state":"outdated"},"0.3.0-0.3.3":{"docs_rs":"0.3.3","git":"v0.3.3","state":"outdated"},"0.3.4":{"docs_rs":"0.3","git":"v0.3.6","state":"outdated"},"0.4.x":{"docs_rs":"0.4","git":"HEAD","state":"stable"}},"sidebar_content":"<h1>Introduction</h1>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/next/intro\\">Introduction</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/next/quickstart\\">Quickstart</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/next/what-is-perseus\\">What is Perseus?</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/next/core-principles\\">Core Principles</a></li>\\n</ul>\\n<h1>Your First App</h1>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/next/first-app/installation\\">Installing Perseus</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/next/first-app/defining\\">Defining your app</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/next/first-app/generating-pages\\">Generating pages</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/next/first-app/dev-cycle\\">Development cycle</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/next/first-app/error-handling\\">Error handling</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/next/first-app/deploying\\">Deploying your app</a></li>\\n</ul>\\n<h1>Fundamentals</h1>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/next/fundamentals/perseus-app\\"><code>PerseusApp</code></a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/next/fundamentals/reactor\\">The reactor</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/next/fundamentals/routing\\">Routing and navigation</a>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/next/fundamentals/preloading\\">Preloading</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/next/fundamentals/i18n\\">Internationalization</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/next/fundamentals/error-views\\">Error views</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/next/fundamentals/hydration\\">Hydration</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/next/fundamentals/static-content\\">Static content</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/next/fundamentals/head-headers\\">Heads and headers</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/next/fundamentals/styling\\">Styling</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/next/fundamentals/js-interop\\">Working with JS</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/next/fundamentals/serving-exporting\\">Servers and exporting</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/next/fundamentals/debugging\\">Debugging</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/next/fundamentals/testing\\">Writing tests</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/next/fundamentals/plugins\\">Plugins</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/next/fundamentals/compilation-times\\">Improving Compilation Times</a></li>\\n</ul>\\n<h1>The State Platform</h1>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/next/state/intro\\">Understanding state</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/next/state/build\\">Build-time state</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/next/state/request\\">Request-time state</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/next/state/revalidation\\">Revalidation</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/next/state/incremental\\">Incremental generation</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/next/state/amalgamation\\">State amalgamation</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/next/state/browser\\">Using state</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/next/state/global\\">Global state</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/next/state/helper\\">Helper state</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/next/state/suspense\\">Suspended state</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/next/state/freezing-thawing\\">Freezing and thawing</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/next/state/manual\\">Manually implementing <code>ReactiveState</code></a></li>\\n</ul>\\n<h1>Capsules</h1>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/next/capsules/intro\\">Introduction</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/next/capsules/using\\">Using capsules</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/next/capsules/capsules-vs-components\\">Capsules vs. components</a></li>\\n</ul>\\n<h1>Miscellaneous</h1>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/next/migrating\\">Migrating from v0.3.x</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/next/faq\\">Common pitfalls and FAQs</a></li>\\n</ul>\\n","status":"Next","title":"Error Views"}`;
window.__PERSEUS_INITIAL_WIDGET_STATES = `{}`;
window.__PERSEUS_TRANSLATIONS = `{
    "perseus": "Perseus",
    "sycamore": "Sycamore",
    "navlinks.docs": "Docs",
    "navlinks.comparisons": "Comparisons",
    "navlinks.plugins": "Plugins",
    "index-intro.heading": "The Rust framework for the modern web",
    "index-intro.get-started-button": "Get started now",
    "index-intro.github-button": "GitHub",
    "index-state-gen.heading": "Generate state, on your terms",
    "index-state-gen.desc": "Perseus apps can generate state whenever they like and pass it to <a href=\\"https://github.com/sycamore-rs/sycamore\\" class=\\"underline\\">Sycamore</a>, one of the fastest web frameworks in the world.",
    "index-i18n.heading.start": "I18n",
    "index-i18n.heading.rest": " that just works",
    "index-i18n.heading.tooltip": "Internationalization",
    "index-i18n.desc": "Just add translations using <a href=\\"https://projectfluent.org\\" class=\\"underline\\">Fluent</a>, and your app can be set up in seconds in multiple languages, with automatic user locale detection.",
    "index-opts.heading": "You want options? We got options.",
    "index-opts.desc": "Perseus comes with a built-in plugins system and full customizability of almost every part of the system. Static exporting? Serverful deployment? Fetch data by carrier pigeon? Easy.",
    "index-speed.heading": "Fast. Crazy. Fast.",
    "index-speed.desc-line-1": "Underlying platform? <strong>Rust.</strong>",
    "index-speed.desc-line-2": "Target platform? <strong>WebAssembly.</strong>",
    "index-speed.desc-line-3": "Lighthouse scores? <strong>💯</strong>",
    "index-speed.desktop-perf-label": "Performance (Desktop)",
    "index-speed.mobile-perf-label": "Performance (Mobile)",
    "index-speed.best-practices-label": "Best Practices",
    "index-cta.heading": "Get started with Perseus today!",
    "index-cta.docs-button": "Docs",
    "index-cta.gh-button": "GitHub",
    "index-cta.api-docs-button": "API Docs",
    "index-cta.crates-io-button": "Crates.io",
    "index-cta.matrix-button": "Matrix",
    "index-cta.discord-button": "Discord",
    "index-cta.comparisons-button": "Comparisons",
    "footer.copyright": "© <a href=\\"https://github.com/arctic-hen7\\" class=\\"underline\\">arctic-hen7</a> { $years }, see license <a href=\\"https://github.com/framesurge/perseus/blob/main/LICENSE\\" class=\\"underline\\">here</a>.",
    "comparisons-title": "Comparisons to Other Frameworks",
    "comparisons-heading": "Comparisons",
    "comparisons-subtitle": "See how Perseus compares to other web development frameworks.",
    "comparisons-extra": "Is there anything we're missing here? Please <a href =\\"https://github.com/framesurge/perseus/issues/new/choose\\" class=\\"underline\\">open an issue</a> and let us know!",
    "comparisons-table-header": "Comparison",
    "comparisons-table-headings.name": "Name",
    "comparisons-table-headings.supports_ssg": "Static generation",
    "comparisons-table-headings.supports_ssr": "Server-side rendering",
    "comparisons-table-headings.supports_ssr_ssg_same_page": "SSG & SSR in same page",
    "comparisons-table-headings.supports_i18n": "Internationalization",
    "comparisons-table-headings.supports_incremental": "Incremental generation",
    "comparisons-table-headings.supports_revalidation": "Revalidation",
    "comparisons-table-headings.inbuilt_cli": "Inbuilt CLI",
    "comparisons-table-headings.inbuilt_routing": "Routing support",
    "comparisons-table-headings.supports_shell": "App shell",
    "comparisons-table-headings.supports_deployment": "Easy deployment",
    "comparisons-table-headings.supports_exporting": "Static exporting",
    "comparisons-table-headings.language": "Language",
    "comparisons-table-headings.homepage_lighthouse_desktop": "Homepage Lighthouse Score (Desktop)",
    "comparisons-table-headings.homepage_lighthouse_mobile": "Homepage Lighthouse Score (Mobile)",
    "comparisons-table-details.supports_ssg": "Whether or not the framework supports pre-rendering pages at build-time.",
    "comparisons-table-details.supports_ssr": "Whether or not the framework supports rendering pages dynamically when they're requested.",
    "comparisons-table-details.supports_ssr_ssg_same_page": "Whether or not the framework supports SSG and SSR (see above) in the very same page.",
    "comparisons-table-details.supports_i18n": "Whether or not the framework supports building a multilingual app. Some frameworks support this through plugins.",
    "comparisons-table-details.supports_incremental": "Whether or not the framework supports rendering pages on-demand and then caching them for future use.",
    "comparisons-table-details.supports_revalidation": "Whether or not the framework supports rebuilding pages that were built at build-time at request-time. Some frameworks can do this by time, or by custom logic. Perseus supports both.",
    "comparisons-table-details.inbuilt_cli": "Whether or not the framework has a command-line interface for convenient usage. Some frameworks use third-party CLIs.",
    "comparisons-table-details.inbuilt_routing": "Whether or not the framework supports inbuilt routing. Most frameworks have their own way of doing this if they do support it.",
    "comparisons-table-details.supports_shell": "Whether or not this framework has an app shell, which makes switching pages much faster and cleaner.",
    "comparisons-table-details.supports_deployment": "Whether or not this framework supports easy deployment. Perseus can deploy in one command.",
    "comparisons-table-details.supports_exporting": "Whether or not this framework can operate without a server, as a series of purely static files.",
    "comparisons-table-details.language": "The programming language this framework is built in. (Hint: Rust is the fastest!)",
    "comparisons-table-details.homepage_lighthouse_desktop": "The Lighthouse score out of 100 for desktop (higher is better). These are collected from Google's PageSpeed Insights tool. These are for the framework's website, and may not reflect the performance of all sites made with the framework.",
    "comparisons-table-details.homepage_lighthouse_mobile": "The Lighthouse score out of 100 for mobile (higher is better). These are collected from Google's PageSpeed Insights tool. These are for the framework's website, and may not reflect the performance of all sites made with the framework.",
    "comparisons-sycamore-heading": "Perseus vs Sycamore",
    "comparisons-sycamore-text": "Perseus is a framework that uses Sycamore to write views (the things users see), so there's not much point in comparing the two as competitors. However, Sycamore can be used without Perseus, which works perfectly well, though you'll miss out on features like inbuilt internationalization, static generation (though you could build this yourself), and incremental generation. If you want to build just a bit of your site with Rust, Sycamore is the perfect tool, Perseus is a full framework designed for building entire websites.",
    "comparisons-unknown-heading": "Perseus vs { $name }",
    "docs-title-base": "Perseus Docs",
    "docs-status.outdated": "This version of the documentation is outdated, and features documented here may work differently now. You can see the latest stable version of the docs <a href=\\"en-US/docs/{ $stable }/intro\\" class=\\"underline\\">here</a>.",
    "docs-status.beta": "This version of the documentation is for a version that has only been released in beta, and is not yet stable. Features documented here may not be present in the latest stable version, and they're subject to rapid and drastic change. You can see the latest stable version of the docs <a href=\\"en-US/docs/{ $stable }/intro\\" class=\\"underline\\">here</a>.",
    "docs-status.next": "This version of the documentation is for a version that has not yet been released, and features documented here may not be present in the latest release. You can see the latest stable version of the docs <a href=\\"en-US/docs/{ $stable }/intro\\" class=\\"underline\\">here</a>.",
    "docs-version-switcher.next": "Next (unreleased)",
    "docs-version-switcher.beta": "v{ $version } (beta)",
    "docs-version-switcher.stable": "v{ $version } (stable)",
    "docs-version-switcher.outdated": "v{ $version } (outdated)",
    "plugins-title": "Plugins",
    "plugins-title-full": "Perseus Plugins",
    "plugin-card-author": "By { $author }",
    "plugin-details.repo_link": "Repository:",
    "plugin-details.crates_link": "Crate page:",
    "plugin-details.docs_link": "Docs:",
    "plugin-details.site_link": "Site:",
    "plugin-details.metadata_heading": "Metadata",
    "plugin-details.no_link_text": "N/A",
    "plugin-search.placeholder": "Search",
    "plugin-search.no_results": "No results found.",
    "plugins-desc": "These are all the public plugins for Perseus! If you've made a plugin, and you'd like it to be listed here, please open an issue on our repository!",
    "search": "Search the docs",
    "index-example-switcher.excerpts": "Excerpts",
    "index-example-switcher.full": "Full"
}
`;</script><meta itemprop=__perseus_head_end><script>//</script><body class="bg-white dark:bg-neutral-900"><div id=root><header data-hk=8.0 class="shadow-md sm:p-2 w-full mb-20 bg-neutral-500/30 backdrop-blur-lg text-black dark:text-white"><div data-hk=8.1 class="flex justify-between items-center"><a data-hk=8.2 class="justify-self-start self-center m-3 ml-5 text-md sm:text-2xl text-bold title-font"href=en-US/>Perseus</a><div data-hk=8.3 class="md:hidden m-3 mr-5 tham tham-e-spin tham-w-6"><div data-hk=8.4 class=tham-box><div data-hk=8.5 class="tham-inner bg-black dark:bg-white"></div></div></div><nav data-hk=8.6 class="hidden md:flex"><ul data-hk=8.7 class="mr-5 flex"><li data-hk=9.0 class="m-3 p-1 title-font"><a data-hk=9.1 href=en-US/docs class=px-2>Docs</a><li data-hk=9.2 class="m-3 p-1 title-font"><a data-hk=9.3 href=en-US/comparisons class=px-2>Comparisons</a><li data-hk=9.4 class="m-3 p-1 title-font"><a data-hk=9.5 href=en-US/plugins class=px-2>Plugins</a></ul></nav></div><nav data-hk=8.8 id=mobile_nav_menu class="md:hidden w-full text-center justify-center hidden"><ul data-hk=8.9 class=mr-5><li data-hk=10.0 class="m-3 p-1 title-font"><a data-hk=10.1 href=en-US/docs class=px-2>Docs</a><li data-hk=10.2 class="m-3 p-1 title-font"><a data-hk=10.3 href=en-US/comparisons class=px-2>Comparisons</a><li data-hk=10.4 class="m-3 p-1 title-font"><a data-hk=10.5 href=en-US/plugins class=px-2>Plugins</a></ul><hr data-hk=2.0><div data-hk=2.1 class="text-left p-3 overflow-y-scroll h-[60vh]"><div data-hk=2.2 class="flex w-full justify-center text-center"><div data-hk=2.3 class="max-w-3xl flex flex-col"><select data-hk=4.4 class="p-2 rounded-md text-white bg-indigo-500"><option data-hk=4.5 value=next selected>Next (unreleased)<option data-hk=4.6 value=0.4.x>v0.4.x (stable)<option data-hk=4.0 value=0.3.4>v0.3.4 (outdated)<option data-hk=4.1 value=0.3.0-0.3.3>v0.3.0-0.3.3 (outdated)<option data-hk=4.2 value=0.2.x>v0.2.x (outdated)<option data-hk=4.3 value=0.1.x>v0.1.x (outdated)</select></div></div><div data-hk=2.4 class=docs-links-markdown><h1>Introduction</h1><ul><li><a href=https://framesurge.sh/perseus/en-US/docs/next/intro>Introduction</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/quickstart>Quickstart</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/what-is-perseus>What is Perseus?</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/core-principles>Core Principles</a></ul><h1>Your First App</h1><ul><li><a href=https://framesurge.sh/perseus/en-US/docs/next/first-app/installation>Installing Perseus</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/first-app/defining>Defining your app</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/first-app/generating-pages>Generating pages</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/first-app/dev-cycle>Development cycle</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/first-app/error-handling>Error handling</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/first-app/deploying>Deploying your app</a></ul><h1>Fundamentals</h1><ul><li><a href=https://framesurge.sh/perseus/en-US/docs/next/fundamentals/perseus-app><code>PerseusApp</code></a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/fundamentals/reactor>The reactor</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/fundamentals/routing>Routing and navigation</a> <ul><li><a href=https://framesurge.sh/perseus/en-US/docs/next/fundamentals/preloading>Preloading</a></ul><li><a href=https://framesurge.sh/perseus/en-US/docs/next/fundamentals/i18n>Internationalization</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/fundamentals/error-views>Error views</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/fundamentals/hydration>Hydration</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/fundamentals/static-content>Static content</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/fundamentals/head-headers>Heads and headers</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/fundamentals/styling>Styling</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/fundamentals/js-interop>Working with JS</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/fundamentals/serving-exporting>Servers and exporting</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/fundamentals/debugging>Debugging</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/fundamentals/testing>Writing tests</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/fundamentals/plugins>Plugins</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/fundamentals/compilation-times>Improving Compilation Times</a></ul><h1>The State Platform</h1><ul><li><a href=https://framesurge.sh/perseus/en-US/docs/next/state/intro>Understanding state</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/state/build>Build-time state</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/state/request>Request-time state</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/state/revalidation>Revalidation</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/state/incremental>Incremental generation</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/state/amalgamation>State amalgamation</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/state/browser>Using state</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/state/global>Global state</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/state/helper>Helper state</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/state/suspense>Suspended state</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/state/freezing-thawing>Freezing and thawing</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/state/manual>Manually implementing <code>ReactiveState</code></a></ul><h1>Capsules</h1><ul><li><a href=https://framesurge.sh/perseus/en-US/docs/next/capsules/intro>Introduction</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/capsules/using>Using capsules</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/capsules/capsules-vs-components>Capsules vs. components</a></ul><h1>Miscellaneous</h1><ul><li><a href=https://framesurge.sh/perseus/en-US/docs/next/migrating>Migrating from v0.3.x</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/faq>Common pitfalls and FAQs</a></ul></div></div></nav></header><main data-hk=2.20 id=scroll-container><div data-hk=2.5 class="flex w-full"><div data-hk=2.6 class="h-screen pt-14 xs:pt-16 sm:pt-20 lg:pt-25 hidden md:block max-w-xs w-full border-r overflow-y-auto"><div data-hk=2.7 class=mr-5><div data-hk=2.8 class="text-left text-black dark:text-white p-3"><aside data-hk=2.9><div data-hk=2.10 class="flex flex-col"><select data-hk=6.4 class="p-2 rounded-md text-white bg-indigo-500"><option data-hk=6.5 value=next selected>Next (unreleased)<option data-hk=6.6 value=0.4.x>v0.4.x (stable)<option data-hk=6.0 value=0.3.4>v0.3.4 (outdated)<option data-hk=6.1 value=0.3.0-0.3.3>v0.3.0-0.3.3 (outdated)<option data-hk=6.2 value=0.2.x>v0.2.x (outdated)<option data-hk=6.3 value=0.1.x>v0.1.x (outdated)</select></div><div data-hk=2.11 class=docs-links-markdown><h1>Introduction</h1><ul><li><a href=https://framesurge.sh/perseus/en-US/docs/next/intro>Introduction</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/quickstart>Quickstart</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/what-is-perseus>What is Perseus?</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/core-principles>Core Principles</a></ul><h1>Your First App</h1><ul><li><a href=https://framesurge.sh/perseus/en-US/docs/next/first-app/installation>Installing Perseus</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/first-app/defining>Defining your app</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/first-app/generating-pages>Generating pages</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/first-app/dev-cycle>Development cycle</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/first-app/error-handling>Error handling</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/first-app/deploying>Deploying your app</a></ul><h1>Fundamentals</h1><ul><li><a href=https://framesurge.sh/perseus/en-US/docs/next/fundamentals/perseus-app><code>PerseusApp</code></a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/fundamentals/reactor>The reactor</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/fundamentals/routing>Routing and navigation</a> <ul><li><a href=https://framesurge.sh/perseus/en-US/docs/next/fundamentals/preloading>Preloading</a></ul><li><a href=https://framesurge.sh/perseus/en-US/docs/next/fundamentals/i18n>Internationalization</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/fundamentals/error-views>Error views</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/fundamentals/hydration>Hydration</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/fundamentals/static-content>Static content</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/fundamentals/head-headers>Heads and headers</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/fundamentals/styling>Styling</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/fundamentals/js-interop>Working with JS</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/fundamentals/serving-exporting>Servers and exporting</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/fundamentals/debugging>Debugging</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/fundamentals/testing>Writing tests</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/fundamentals/plugins>Plugins</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/fundamentals/compilation-times>Improving Compilation Times</a></ul><h1>The State Platform</h1><ul><li><a href=https://framesurge.sh/perseus/en-US/docs/next/state/intro>Understanding state</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/state/build>Build-time state</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/state/request>Request-time state</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/state/revalidation>Revalidation</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/state/incremental>Incremental generation</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/state/amalgamation>State amalgamation</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/state/browser>Using state</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/state/global>Global state</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/state/helper>Helper state</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/state/suspense>Suspended state</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/state/freezing-thawing>Freezing and thawing</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/state/manual>Manually implementing <code>ReactiveState</code></a></ul><h1>Capsules</h1><ul><li><a href=https://framesurge.sh/perseus/en-US/docs/next/capsules/intro>Introduction</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/capsules/using>Using capsules</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/capsules/capsules-vs-components>Capsules vs. components</a></ul><h1>Miscellaneous</h1><ul><li><a href=https://framesurge.sh/perseus/en-US/docs/next/migrating>Migrating from v0.3.x</a><li><a href=https://framesurge.sh/perseus/en-US/docs/next/faq>Common pitfalls and FAQs</a></ul></div></aside></div></div></div><div data-hk=2.12 class="h-screen pt-14 xs:pt-16 sm:pt-20 lg:pt-25 grid grid-rows-[1fr_min-content] w-full overflow-y-auto"><div data-hk=2.13 class="px-3 w-full sm:mr-auto sm:ml-auto sm:max-w-prose lg:max-w-3xl xl:max-w-4xl 2xl:max-w-5xl min-w-0"><div data-hk=2.14 class="ring-4 ring-orange-400 p-4 rounded-lg mt-1"><div data-hk=2.15 class="flex flex-col 2xs:flex-row dark:text-white"><span data-hk=2.16 class="self-center mr-2"style="fill: #fb923c;"><svg xmlns=http://www.w3.org/2000/svg height=auto viewbox="0 0 24 24"width=2.25rem fill=\#000000><path d="M12 7c.55 0 1 .45 1 1v4c0 .55-.45 1-1 1s-1-.45-1-1V8c0-.55.45-1 1-1zm-.01-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm1-3h-2v-2h2v2z"/></svg></span><p data-hk=2.17>This version of the documentation is for a version that has not yet been released, and features documented here may not be present in the latest release. You can see the latest stable version of the docs <a href=en-US/docs/0.4.x/intro class=underline>here</a>.</div></div><main data-hk=2.18 class="text-black dark:text-white"><div data-hk=1.0 class="markdown min-w-0 pb-10"><h1>Error Views</h1><p>If there's one thing that's guaranteed to happen in all software, it would be errors, and, when they do happen, your app needs to be prepared for them. Internally, there are quite a few failure scenarios that Perseus might encounter: for example, if the user loses their internet connection while Perseus is trying to fetch a page, it won't be able to complete that. This would be a failure in the <em>framework</em>, not your app. In these cases, as well as in some cases of failures caused by your code (e.g. a mistyped link address, a deliberate authentication failure, etc.), Perseus will render what we call <em>error views</em>. These are basically special Sycamore <code>View</code>s that your app holds onto until an error occurs, at which time it will automatically display them appropriately.<p>One thing to make clear about error views is that <em>you don't invoke these, Perseus does</em>. What you are writing are a series of instructions to Perseus on what to do in each type of failure: you are <strong>not</strong> writing error handling for your own logic. If, for example, a user enters a password that's too short and submits a form, you would not display a Perseus error view, you would handle errors manually there. The reason for this is that there are simply too many cases of error handling in real-world apps for Perseus to be able to reasonably and flexibly handle them all.<p>By convention, error views are usually placed in an <code>src/error_views.rs</code> file in your project, though this could also be a folder if your error views are particularly elaborate.<h2><code>ClientError</code></h2><p>All errors in Perseus, even ones that occur on the server, fall under the <a href=https://docs.rs/perseus/0.4/perseus/errors/enum.ClientError.html><code>ClientError</code></a> <code>enum</code>, which you'll typically <code>match</code> against to determine what to render. In terms of semantic versioning, this <code>enum</code> is considered stable, and new variants will not be added except in a breaking change. Let's go through those variants one by one.<h3><code>ServerError</code></h3><p>A <code>ServerError</code> is probably the error type you'll come into contact with most frequently, because it denotes errors that have been propagated down by the server explicitly. This usually means something failed on its end, which could be anything from a <em>404 Not Found</em> error to a <em>500 Internal Server Error</em>. This variant has two properties: one for its <a href=https://developer.mozilla.org/en-US/docs/Web/HTTP/Status>HTTP status code</a>, and another for an actual error message, which will be in English (for internationalized apps).<p>Because of the frequency of this error, it is very common to handle status variants independently. For example, the <a href=https://framesurge.sh/perseus/en-US/docs/next/fundamentals/error-views>error views</a> example in the Perseus repository handles a 404 error independently (because people mistype URLs far more frequently than servers fail), and then handles anything starting with a 4 (client error) separately to anything starting with a 5 (server error).<p>One important difference between <code>ServerError</code> and all the other error types is that it is the only one that occurs <em>before</em> the client. This means it is the only error type that will be reflected in what the user sees, before hydration. For example, let's say the user mistyped a URL and ends up at a 404 error page. Because this error 'occurred' on the server (in that that was where Perseus first noticed that something had gone wrong), the HTML that goes to the client will show that error. If, however, something like a hydration error had occurred (which would <em>not</em> fall under <code>ServerError</code>), the server might have handled everything fine, and the user may be able to still see all the content they want, it just won't be interactive. In these cases, it's better for user experience not to completely delete all the content that has been served statically, just because it isn't interactive. In these cases, Perseus will display a popup error.<h3><code>FetchError</code></h3><p>Fetch errors are fairly self-explanatory, and occur when there has been a failure in communicating with the server. There are a few sub-variants of this, governed by the <a href=https://docs.rs/perseus/0.4/perseus/errors/enum.FetchError.html><code>FetchError</code></a> type.<p>You may notice in the API documentation that there's a <code>FetchError::NotOk</code> variant, which you might expect to fire when the user hits a 404 in what's called a <em>subsequent load</em> (i.e. any load of another page in the app where the user has come from somewhere else in the app, rather than an outside website, like a search engine). However, Perseus actually performs route matching on the client-side, before it makes any requests, which is why broken links in Perseus will not lead to any network requests. For subsequent loads, anything other than a <em>200 OK</em> response indicates a server error.<h3><code>PluginError</code></h3><p>Plugin errors are exactly what it says on the tin: any error that a plugin can produce. Because all plugin functions are implicitly fallible, any plugin could, at any time, return any error. Since there are a number of opportunities for plugins to run just before a Perseus app starts, they can produce errors, which will often be critical (if they occur before your app starts, Perseus will have to perform a full abort).<h3><code>ThawError</code></h3><p>Thaw errors only apply to you if you're using the <a href=https://framesurge.sh/perseus/en-US/docs/next/state/freezing-thawing>state freezing</a> system, and they usually arise from corrupted state. Very importantly, thaw errors are <em>sleeper errors</em>, meaning that you might thaw some frozen state that has an error in it, and then that error might only become apparent much later. This is because Perseus' thawing mechanism is gradual: state is only deserialized when a page needs it. So, if only one page has invalid state, the thaw error will occur much later.<p>However, in the vast majority of cases of corruption, the whole frozen app will be garbled, and Perseus will detect this error and return it immediately, avoiding sleepers.<h3><code>PlatformError</code></h3><p>Platform errors are currently not really used in Perseus, but, in future, they will be used to make the render backend of Perseus generic so that it could be used beyond the browser. If you're running in a browser though, and you get this error, you can be fairly confident of a critical failure, and you shouldn't expect your error message to even display. An example of a cause for this kind of error would be the <code>window</code> object not being defined. To see examples of this error, try running a Perseus app in NodeJS, and see what happens...<h3><code>PreloadError</code></h3><p>Preload errors occur when you try to preload something that's invalid, and they will nearly always be the result of failures in your own code (usually mistyping a template name or the like).<h3><code>InvariantError</code></h3><p>Invariant errors are the most insidious kind of error in Perseus: they arise from internal invariants not being upheld within Perseus. For example, all Perseus apps are expected to define, within the document metadata, a global state. For apps that don't have a global state, they should explicitly declare the fact that they don't have one. However, if a hypothetical overzealous minifcation system decided to strip out the empty global state declaration, deciding it was useless, Perseus would be unable to function. The reason these sorts of things don't resolve to panics is that, unlike most Rust programs, where invariants are simply logical properties that we can't prove to the compiler, in Perseus there's a divide between the client and the server: the network. That means that we might be 100% certain that all invariants are upheld on the server-side, but, by the time we get to the client-side, we might be looking at a completely different file type.<p>In short, these errors are rare, but catastrophic, and usually cannot be recovered from.<p>However, there are some cases in which these errors <em>might</em> be caused by your code. The most obvious is if you try to fetch the wrong global state type. Let's say you registered <code>MyGlobalState</code>, but then you try to get <code>MyPageState</code> by accident. Because Perseus uses downcasting to manage state, this would lead to a runtime invariant error. However, in this case, it would be perfectly reasonable for a confused user to go to a different page instead, so we don't panic and fail the whole system.<h3><code>Panic</code></h3><p>Finally, we come to panics, which Perseus takes a unique approach to. Rather than having you set a panic handler, Perseus does it for you, because there are several additional things it needs to do. First, it will print messages to the console telling the user what has happened, just in case everything goes pear-shaped after that (remember, we might be panicking because the <code>window</code> doesn't exist, in which case we sure aren't going to be able to display error messages). Then, it will display a popup error that you set the contents of through this handler. Generally, a panic handler should be quite apologetic, because there's literally no way to proceed from here, and the app is practically guaranteed to fail completely. You can also set custom panic handling logic, which will be executed once the message has been displayed, and this is usually a good time to do things like report the error to a crash analytics server. (Note that this is distinct from the <code>crash</code> plugin opportunity, which would occur in the case of a critical startup invariant error.)<p>If you're coming from non-web Rust, you might be thinking you can just set a <code>catch_unwind</code> and restart your app nicely, but Wasm uses <code>panic = "abort"</code> by default, meaning such handlers are meaningless. Also, while you could re-instantiate Perseus manually, it's not recommended at all, since panics usually indicate that something has gone critically wrong, and that's likely to repeat itself. In general, you should ask the user to restart the app manually by reloading the page, which should fix most spontaneous errors.<h2>Error positioning</h2><p>One very unique part of Perseus' error handling system that's very important is its concept of <em>error positioning</em>, i.e. how an error appears. There are are three options for this, which correspond to the variants of the <a href=https://docs.rs/perseus/0.4/perseus/error_views/enum.ErrorPosition.html><code>ErrorPostion</code></a> <code>enum</code>. The first is that the error will take up the whole page, the second is that it will take up the whole of a widget (such errors will of course only be triggered by widgets), and the third is that the error will be confined to a popup.<p>It's important to check what kind of error position you have for two reasons: the first is so that you don't display a full-page view with <code>100vh</code> styling all over the place if it ends up being displayed in a tiny popup, and the second is because, in a popup error view, you won't have access to a router. This means that any links placed into a popup error will be handled with the browser's default behavior. While this is fine, it may not be what you expect, so be aware of this.<p>Perseus decides how to position an error based on some simple rules: if it's an <em>initial load</em> where the error occurred (i.e. the user has come to your app from the outside internet, e.g. from a search engine), then check if it's a <code>ClientError::ServerError</code>. If so, <code>Page</code>, if not, <code>Popup</code>. If it's a <em>subsequent load</em> (i.e. where the user has gone from one page to another inside your app), then this is delegated to you through the <code>subsequent_load_determinant_fn</code> function, which you can set on your <a href=https://docs.rs/perseus/0.4/perseus/prelude/struct.ErrorViews.html><code>ErrorViews</code></a>. If you don't set this though, the same rules are applied automatically.<p>The reason behind these rules is based on user experience. Any error that is not a <code>ServerError</code> will have occurred on the client-side, right? So that means the server was fine, which in turn means that the server-side rendering was okay. That means there's prerendered content that's perfectly valid sitting in front of the user, and they can read it. They might not be able to interact with it, but, in nearly all cases, it's better that they can't interact with it than that they can't see it at all. There is nothing more infuriating than going to a news website, seeing the article prerendered in front of you, and then having that lovely content be replaced with an error message.<p>However, if you have some cases where you know for certain that the error should take up the whole page, because the prerendered content is bad in some way, then you can always style the popup error to be absolutely positioned and take up the whole page.<p>Popup errors will be rendered in a <code>&LTdiv></code> with the HTML <code>id</code> <code>__perseus_popup_error</code>, which you can use to style it arbitrarily.<h2>Error context</h2><p>Because Perseus is, for the millionth time, a very complex system, errors can occur in different places. For example, an error that occurs in a plugin before the app is started will mean that you can't have access to something like a translator, because it literally doesn't exist yet. Such errors are rare, but they can definitely happen, and this is why Perseus provides an <a href=https://docs.rs/perseus/0.4/perseus/error_views/enum.ErrorContext.html><code>ErrorContext</code></a>. This has four variants, each corresponding to a different level of interactivity that Perseus has, which you can read about in detail <a href=https://docs.rs/perseus/0.4/perseus/error_views/enum.ErrorContext.html>here</a>.<p>One important thing to understand about error contexts is how they interact with internationalized apps. Perseus will always make a best effort to give your error views a translator, to the point that, if the user goes to, say, <code>/bad-page</code>, Perseus will first resolve it to a localized version (e.g. <code>/en-US/bad-page</code>), and only <em>then</em> handle the routing error. However, in exported apps, the situation is very different, because error views can be managed beautifully on the client-side, but 404 errors in particular are handled by exporting the error page to a static file, usually called <code>404.html</code>, which your serving infrastructure is responsible for providing. Unfortunately, there are very few providers who support localized error views, and, in such cases, error views will always be non-internationalized. However, Perseus will do all it can to, on the client-side, provide a translator. In some cases, however, this may be simply impossible. If you're using internationalization, it's generally recommended to avoid exporting for this reason.<h2>Writing <code>ErrorViews</code></h2><p>When you actually write your error views, it is surprisingly simple. Just call <code>ErrorViews::new()</code> and provide a closure that takes four arguments: a Sycamore scope, the <code>ClientError</code> that occurred, an <code>ErrorContext</code>, and an <code>ErrorPosition</code>. Then, match them as you like and return a tuple of two <code>View</code>s: the first for the document metadata, and the second for the body of the error. Note that popup errors will have their head views ignored, as will widget errors. (In such cases, you can use <code>View::empty()</code> to just produce an empty view.) You can see a full example of using error views <a href=https://github.com/framesurge/perseus/tree/main/examples/core/error_views>here</a>.</div></main></div><div data-hk=2.19 class=row-start-2><footer data-hk=7.0 class="w-full flex justify-center py-5 bg-black text-white"><p data-hk=7.1 class="mx-5 text-center"><span data-hk=7.2>© <a href=https://github.com/arctic-hen7 class=underline>arctic-hen7</a> 2021-2023, see license <a href=https://github.com/framesurge/perseus/blob/main/LICENSE class=underline>here</a>.</span></footer></div></div></div></main><script data-hk=0.0 src=.perseus/static/prism.js defer></script><script data-hk=0.1>window.Prism.highlightAll();</script></div><div id=__perseus_popup_error></div>