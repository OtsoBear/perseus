<!DOCTYPE html><html lang=en-US class=light><head><base href=https://framesurge.sh/perseus/><meta charset=UTF-8><meta name=viewport content="width=device-width, initial-scale=1.0"><link rel=stylesheet href=.perseus/static/tailwind.css><link rel=stylesheet href=.perseus/static/styles/style.css><script type=module>window.__PERSEUS_RENDER_CFG = `{"docs/0.4.x/capsules/capsules-vs-components":"docs","docs/0.2.x/strategies/intro":"docs","docs/0.3.4/reference/perseus-app":"docs","docs/0.3.4/reference/plugins/functional":"docs","docs/0.1.x/config_managers":"docs","docs/0.3.0-0.3.3/plugins/security":"docs","docs/0.4.x/intro":"docs","docs/0.3.0-0.3.3/deploying/serverful":"docs","docs/0.3.4/reference/hydration":"docs","docs/0.3.0-0.3.3/i18n/using":"docs","docs/next/first-app/defining":"docs","docs/0.4.x/capsules/using":"docs","docs/0.3.4/reference/state/global":"docs","docs/next/fundamentals/hydration":"docs","docs/next/state/intro":"docs","docs/0.4.x/fundamentals/perseus-app":"docs","docs/next/first-app/installation":"docs","docs/0.4.x/first-app/installation":"docs","docs/0.3.4/reference/plugins/writing":"docs","docs/0.2.x/views":"docs","docs/0.3.0-0.3.3/testing/manual":"docs","docs/0.2.x/i18n/using":"docs","docs/0.3.4/reference/deploying/size":"docs","docs/0.3.0-0.3.3/templates/intro":"docs","docs/0.4.x/state/browser":"docs","docs/state/amalgamation":"docs","docs/0.4.x/capsules/intro":"docs","docs/0.3.0-0.3.3/advanced/routing":"docs","docs/next/state/incremental":"docs","docs/0.4.x/fundamentals/compilation-times":"docs","docs/0.3.0-0.3.3/plugins/publishing":"docs","docs/0.2.x/testing/intro":"docs","docs/0.3.4/reference/state/idb-freezing":"docs","docs/0.3.4/reference/engines":"docs","docs/0.3.0-0.3.3/exporting":"docs","docs/0.3.4/reference/deploying/serverless":"docs","docs/0.4.x/faq":"docs","docs/0.3.4/reference/templates/setting-headers":"docs","docs/next/first-app/dev-cycle":"docs","docs/0.2.x/testing/manual":"docs","docs/0.2.x/strategies/amalgamation":"docs","docs/intro":"docs","docs/what-is-perseus":"docs","docs/0.3.4/reference/i18n/other-engines":"docs","docs/next/state/suspense":"docs","docs/0.3.4/reference/strategies/revalidation":"docs","docs/0.3.4/reference/plugins/publishing":"docs","docs/next/quickstart":"docs","docs/0.3.4/advanced/subsequent-loads":"docs","docs/0.2.x/define-app":"docs","docs/0.2.x/intro":"docs","docs/next/fundamentals/head-headers":"docs","docs/0.4.x/fundamentals/js-interop":"docs","docs/next/state/browser":"docs","docs/0.3.0-0.3.3/strategies/build-paths":"docs","docs/0.3.4/reference/testing/intro":"docs","docs/0.3.0-0.3.3/plugins/control":"docs","docs/0.3.0-0.3.3/views":"docs","docs/first-app/defining":"docs","docs/0.3.0-0.3.3/intro":"docs","docs/0.1.x/building":"docs","docs/fundamentals/perseus-app":"docs","docs/0.1.x/strategies/build_state":"docs","docs/0.3.4/advanced/intro":"docs","docs/0.3.0-0.3.3/second-app":"docs","docs/0.4.x/fundamentals/serving-exporting":"docs","docs/0.3.0-0.3.3/plugins/functional":"docs","docs/capsules/using":"docs","docs/0.2.x/advanced/arch":"docs","docs/0.3.0-0.3.3/strategies/request-state":"docs","docs/0.3.4/reference/plugins/control":"docs","docs/0.4.x/quickstart":"docs","docs/0.3.0-0.3.3/plugins/writing":"docs","docs/0.2.x/error-pages":"docs","docs/fundamentals/hydration":"docs","docs/next/fundamentals/static-content":"docs","docs/0.2.x/strategies/build-state":"docs","docs/0.4.x/fundamentals/preloading":"docs","docs/next/fundamentals/reactor":"docs","docs/0.2.x/advanced/routing":"docs","docs/state/intro":"docs","docs/0.3.0-0.3.3/ejecting":"docs","docs/0.2.x/templates/intro":"docs","docs/0.4.x/fundamentals/reactor":"docs","docs/0.3.4/reference/state/hsr":"docs","docs/0.1.x/strategies/intro":"docs","docs/fundamentals/debugging":"docs","docs/next/first-app/error-handling":"docs","docs/0.4.x/fundamentals/testing":"docs","docs/0.2.x/i18n/intro":"docs","docs/fundamentals/compilation-times":"docs","docs/0.3.0-0.3.3/server-communication":"docs","docs/0.2.x/strategies/incremental":"docs","docs/0.4.x/fundamentals/debugging":"docs","docs/0.2.x/i18n/defining":"docs","docs/0.4.x/what-is-perseus":"docs","docs/state/browser":"docs","docs/core-principles":"docs","docs/0.3.4/reference/templates/metadata-modification":"docs","docs/0.1.x/strategies/request_state":"docs","docs/0.3.0-0.3.3/hello-world":"docs","docs/0.3.0-0.3.3/advanced/define_app":"docs","docs/0.3.0-0.3.3/deploying/serverless":"docs","docs/0.3.0-0.3.3/testing/fantoccini-basics":"docs","docs/0.4.x/state/revalidation":"docs","docs/0.1.x/routing":"docs","docs/fundamentals/testing":"docs","docs/next/capsules/capsules-vs-components":"docs","docs/0.3.0-0.3.3/deploying/relative-paths":"docs","docs/next/fundamentals/i18n":"docs","docs/fundamentals/styling":"docs","docs/fundamentals/head-headers":"docs","docs/next/core-principles":"docs","docs/0.4.x/first-app/defining":"docs","docs/0.2.x/what-is-perseus":"docs","docs/0.3.0-0.3.3/strategies/build-state":"docs","docs/0.3.0-0.3.3/i18n/defining":"docs","docs/0.4.x/fundamentals/error-views":"docs","docs/0.3.4/reference/views":"docs","docs/0.2.x/templates/setting-headers":"docs","docs/0.2.x/advanced/initial-loads":"docs","docs/0.4.x/state/incremental":"docs","docs/0.4.x/fundamentals/hydration":"docs","docs/next/fundamentals/error-views":"docs","docs/state/helper":"docs","docs/next/state/freezing-thawing":"docs","docs/0.3.0-0.3.3/templates/setting-headers":"docs","docs/0.3.0-0.3.3/testing/intro":"docs","docs/0.3.4/reference/testing/checkpoints":"docs","docs/0.3.4/reference/state/freezing":"docs","docs/0.3.0-0.3.3/i18n/other-engines":"docs","docs/0.3.4/reference/strategies/intro":"docs","docs/0.3.4/reference/define-app":"docs","docs/0.3.0-0.3.3/what-is-perseus":"docs","docs/0.4.x/fundamentals/styling":"docs","docs/fundamentals/error-views":"docs","docs/0.3.4/reference/deploying/relative-paths":"docs","docs/0.2.x/deploying/exporting":"docs","docs/next/state/build":"docs","docs/0.2.x/advanced/intro":"docs","docs/next/fundamentals/debugging":"docs","docs/0.2.x/hello-world":"docs","docs/0.3.4/reference/strategies/build-paths":"docs","docs/0.3.0-0.3.3/advanced/intro":"docs","docs/next/state/helper":"docs","docs/next/fundamentals/styling":"docs","docs/next/capsules/using":"docs","docs/0.4.x/state/suspense":"docs","docs/0.3.4/reference/templates/router-state":"docs","docs/first-app/error-handling":"docs","docs/0.1.x/templates":"docs","docs/first-app/installation":"docs","docs/0.3.4/reference/templates/intro":"docs","plugins":"plugins","docs/fundamentals/preloading":"docs","docs/0.3.4/reference/i18n/defining":"docs","docs/0.3.4/reference/pitfalls-and-bugs":"docs","docs/0.3.0-0.3.3/pitfalls-and-bugs":"docs","docs/0.3.4/reference/live-reloading":"docs","docs/next/fundamentals/preloading":"docs","docs/fundamentals/routing":"docs","docs/0.1.x/integrations/actix-web":"docs","docs/0.4.x/fundamentals/head-headers":"docs","docs/0.1.x/serving":"docs","docs/0.2.x/static-content":"docs","docs/capsules/intro":"docs","docs/state/incremental":"docs","docs/next/first-app/deploying":"docs","docs/0.3.4/reference/exporting":"docs","docs/next/fundamentals/serving-exporting":"docs","docs/next/state/global":"docs","docs/0.3.4/reference/strategies/build-state":"docs","docs/0.4.x/fundamentals/plugins":"docs","docs/next/what-is-perseus":"docs","docs/state/global":"docs","docs/0.3.0-0.3.3/error-pages":"docs","docs/0.3.0-0.3.3/strategies/amalgamation":"docs","docs/next/fundamentals/routing":"docs","docs/next/fundamentals/plugins":"docs","docs/0.1.x/tutorials/first_app/template":"docs","docs/first-app/deploying":"docs","docs/first-app/generating-pages":"docs","docs/0.4.x/state/manual":"docs","docs/0.4.x/migrating":"docs","docs/0.3.4/reference/plugins/tinker":"docs","docs/0.4.x/state/build":"docs","docs/0.4.x/fundamentals/i18n":"docs","docs/0.3.4/reference/strategies/amalgamation":"docs","docs/0.4.x/first-app/dev-cycle":"docs","docs/0.3.0-0.3.3/deploying/docker":"docs","docs/0.2.x/advanced/subsequent-loads":"docs","docs/first-app/dev-cycle":"docs","docs/0.3.4/reference/deploying/docker":"docs","docs/fundamentals/i18n":"docs","docs/0.3.0-0.3.3/hydration":"docs","docs/0.3.0-0.3.3/styling":"docs","docs/0.3.0-0.3.3/plugins/tinker":"docs","docs/0.3.4/reference/error-pages":"docs","comparisons":"comparisons","docs/0.2.x/debugging":"docs","docs/0.4.x/state/intro":"docs","docs/0.3.4/reference/stores":"docs","docs/0.3.4/intro":"docs","docs/0.3.0-0.3.3/advanced/arch":"docs","docs/0.3.4/reference/state/rx":"docs","docs/0.3.4/reference/i18n/using":"docs","docs/next/intro":"docs","docs/next/migrating":"docs","docs/0.3.0-0.3.3/strategies/incremental":"docs","docs/0.3.0-0.3.3/testing/checkpoints":"docs","docs/next/state/amalgamation":"docs","docs/fundamentals/js-interop":"docs","docs/capsules/capsules-vs-components":"docs","docs/0.2.x/testing/fantoccini-basics":"docs","docs/0.3.4/reference/testing/fantoccini-basics":"docs","docs/0.3.4/core-principles":"docs","docs/0.1.x/tutorials/first_app/app":"docs","docs/0.3.4/reference/updating":"docs","docs/0.4.x/fundamentals/routing":"docs","docs/state/manual":"docs","docs/0.4.x/first-app/deploying":"docs","docs/0.2.x/strategies/revalidation":"docs","":"","docs/0.3.0-0.3.3/plugins/intro":"docs","docs/next/fundamentals/js-interop":"docs","docs/0.3.4/reference/plugins/using":"docs","docs/0.1.x/cli":"docs","docs/next/capsules/intro":"docs","docs/0.3.4/reference/strategies/incremental":"docs","docs/0.1.x/tutorials/first_app/intro":"docs","docs/0.2.x/testing/checkpoints":"docs","docs/next/state/manual":"docs","docs/0.2.x/i18n/translations-managers":"docs","docs/0.3.4/tutorials/auth":"docs","docs/0.3.4/tutorials/hello-world":"docs","docs/next/fundamentals/compilation-times":"docs","docs/0.3.0-0.3.3/advanced/initial-loads":"docs","docs/0.3.0-0.3.3/updating":"docs","docs/state/build":"docs","docs/0.3.0-0.3.3/advanced/subsequent-loads":"docs","docs/0.3.0-0.3.3/i18n/intro":"docs","docs":"docs","docs/0.3.0-0.3.3/define-app":"docs","docs/0.3.0-0.3.3/deploying/size":"docs","docs/0.3.4/tutorials/second-app":"docs","docs/0.3.4/reference/plugins/security":"docs","docs/fundamentals/plugins":"docs","docs/0.3.0-0.3.3/snooping":"docs","docs/0.3.4/reference/i18n/intro":"docs","docs/0.3.4/advanced/routing":"docs","docs/next/first-app/generating-pages":"docs","docs/next/state/request":"docs","docs/0.2.x/strategies/build-paths":"docs","docs/0.3.0-0.3.3/deploying/intro":"docs","docs/state/freezing-thawing":"docs","docs/0.1.x/tutorials/first_app/setup":"docs","docs/0.3.4/reference/deploying/intro":"docs","docs/state/suspense":"docs","docs/next/fundamentals/perseus-app":"docs","docs/0.4.x/state/amalgamation":"docs","docs/0.2.x/config-managers":"docs","docs/0.3.4/reference/i18n/translations-managers":"docs","docs/0.3.4/reference/plugins/intro":"docs","docs/0.3.0-0.3.3/stores":"docs","docs/0.3.4/reference/strategies/request-state":"docs","docs/0.3.0-0.3.3/debugging":"docs","docs/0.1.x/setup":"docs","docs/0.3.4/reference/server-communication":"docs","docs/state/request":"docs","docs/0.3.4/reference/styling":"docs","docs/0.1.x/intro":"docs","docs/0.3.4/advanced/route-announcer":"docs","docs/0.1.x/strategies/build_paths":"docs","docs/0.1.x/strategies/incremental":"docs","docs/0.3.0-0.3.3/cli":"docs","docs/0.1.x/arch":"docs","docs/0.3.0-0.3.3/i18n/translations-managers":"docs","docs/0.4.x/state/global":"docs","docs/migrating":"docs","docs/0.3.4/reference/deploying/serverful":"docs","docs/0.1.x/error_pages":"docs","docs/0.3.4/advanced/initial-loads":"docs","docs/0.2.x/updating":"docs","docs/0.3.0-0.3.3/static-content":"docs","docs/faq":"docs","docs/0.3.4/reference/debugging":"docs","docs/0.3.0-0.3.3/strategies/revalidation":"docs","docs/next/faq":"docs","docs/0.3.4/reference/index-view":"docs","docs/next/fundamentals/testing":"docs","docs/0.4.x/state/helper":"docs","docs/0.3.0-0.3.3/templates/metadata-modification":"docs","docs/0.4.x/fundamentals/static-content":"docs","docs/0.3.0-0.3.3/strategies/intro":"docs","docs/0.1.x/strategies/revalidation":"docs","docs/fundamentals/reactor":"docs","docs/0.3.4/reference/static-content":"docs","docs/fundamentals/static-content":"docs","docs/0.4.x/first-app/generating-pages":"docs","docs/state/revalidation":"docs","docs/0.2.x/templates/metadata-modification":"docs","docs/0.3.4/what-is-perseus":"docs","docs/0.2.x/deploying/intro":"docs","docs/0.3.4/reference/ejecting":"docs","docs/fundamentals/serving-exporting":"docs","docs/0.4.x/first-app/error-handling":"docs","docs/0.2.x/styling":"docs","docs/0.3.4/reference/testing/manual":"docs","docs/0.3.4/reference/snooping":"docs","docs/next/state/revalidation":"docs","docs/0.2.x/i18n/other-engines":"docs","docs/0.2.x/strategies/request-state":"docs","docs/0.3.0-0.3.3/plugins/using":"docs","docs/0.4.x/state/request":"docs","docs/quickstart":"docs","docs/0.2.x/cli":"docs","docs/0.3.4/advanced/arch":"docs","docs/0.4.x/state/freezing-thawing":"docs","docs/0.2.x/ejecting":"docs","docs/0.2.x/second-app":"docs","docs/0.3.4/reference/cli":"docs","docs/0.4.x/core-principles":"docs"}`;

        import init from "https://framesurge.sh/perseus/.perseus/bundle.js";
        async function main() {
            await init("https://framesurge.sh/perseus/.perseus/bundle.wasm");
        }
        main();

        
        

window.__PERSEUS_GLOBAL_STATE = `null`;</script><meta itemprop=__perseus_head_boundary><title>Authentication | Perseus Docs</title><link rel=stylesheet href=.perseus/static/styles/markdown.css><link rel=stylesheet href=.perseus/static/styles/docs_links_markdown.css><link rel=stylesheet href=.perseus/static/prism.css><script>
window.__PERSEUS_INITIAL_STATE = `{"content":"<h1>Authentication</h1>\\n<p>If you're building an app with multiple users that might have different preferences or the like, chances are you'll need some way for those users to log in, you'll need an authentication system. This is fairly easy to achieve in Perseus with the <a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/state/global\\">global state</a> system, though there are a few gotchas -- hence this tutorial!</p>\\n<h2>Concepts</h2>\\n<p>Authentication as a process involves the user wanting to go to some page that they need to be logged in to access (e.g. a dashboard of bank statements), logging in, accessing that page, and then maybe logging back out a little later. All that really boils down to in terms of code is a system to manage whether or not the user is logged in, a system of authenticating the user's password (or however else they're logging in), and a system of providing access on certain pages only to authenticated users.</p>\\n<p>The first part can be achieved through an entry in an app's global state that describes whether or not the user is logged in, what their username is, etc. Notably, this could be saved through <a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/state/freezing\\">state freezing</a> to IndexedDB (which would preserve all the properties of the user's login) (not covered in this tutorial), though we still need a way of securely confirming that the user is who they say they are. For that, we would need to store a token, often done in the browser's <a href=\\"TODO\\">local storage</a> API, which we'll use in this example. As for how this token works, that requires a good deal of thought to security and how your app will work, and so is elided here (we'll just use a very insecure 'token' that tells us what the user's username is).</p>\\n<p>The final part of this is controlling access to protected pages, which is the part where Perseus becomes more relevant as a framework. There are two types of protected pages that you might have, user-specific and non-user-specific. If a protected page is user-specific, then it's useless without the user's personal data. For example, a list of bank statements is completely worthless to an attacker without the user's bank statements populating it, rather than a loading skeleton. For these kinds of pages, we can render a skeleton on the server that's then populated with the user's information once the page is loaded in the browser. This means we don't have to go to any extra lengths to prevent access to the skeleton, since we'll assume that the user's data can only be accessed over an APi that needs some unique token that can only be generated with the user's password, or something similar.</p>\\n<p>If a protected page is non-user-specific, that means it contains content that's the same for all users, but that should only be accessible to users who have logged in. These are more complex because protecting them requires that you don't prerender them on the server at all, and that the code for the protected content not be in your codebase. That may seem weird -- how can you render it at all if it's not in your codebase? Well, you'd have to check if the user is authenticated, and then use some token to fetch the protected content from a server and then display that. If you were to have the protected content anywhere in your code, then it would be accessible to any user willing to reverse-engineer the generated WebAssembly (which isn't too tricky), and hence not really protected at all.</p>\\n<h2>Secure Authentication</h2>\\n<p>TODO</p>\\n<h2>Building the App</h2>\\n<h3>Setup</h3>\\n<p>To start with, we'll set up a fairly typical Perseus app by initializing a new Rust project with <code>cargo new --lib</code>. Then, put the following in <code>Cargo.toml</code> (changing the package name as you want):</p>\\n<pre><code class=\\"language-toml\\">[package]\\nname = &quot;perseus-example-auth&quot;\\nversion = &quot;0.3.6&quot;\\nedition = &quot;2018&quot;\\n\\n# See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html\\n\\n[dependencies]\\n# We can't use hydration here yet (it doesn't handle the rapid page changes from unauthenticated to authenticated well)\\nperseus = { path = &quot;../../../packages/perseus&quot;, features = [] }\\nsycamore = &quot;0.7&quot;\\nserde = { version = &quot;1&quot;, features = [&quot;derive&quot;] }\\nserde_json = &quot;1&quot;\\n# We need the \`HtmlDocument\` feature to be able to use cookies (which this example does)\\nweb-sys = { version = &quot;0.3&quot;, features = [ &quot;Storage&quot; ] }\\n\\n</code></pre>\\n<p>The only things of particular note here are the dependency on <code>web-sys</code>, from which we use the <code>Storage</code> feature (important later), as well as not using Sycamore's <a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/hydration\\">hydration</a> system, as it doesn't handle the kinds of page changes from unauthenticated to authenticated that we'll need in this app. Note that hydration will likely work fine with this in future version of Sycamore (it's currently experimental though).</p>\\n<p>Now add the following to <code>src/lib.rs</code>:</p>\\n<pre><code class=\\"language-rust\\">mod error_pages;\\nmod global_state;\\nmod templates;\\n\\nuse perseus::{Html, PerseusApp};\\n\\n#[perseus::main]\\npub fn main&lt;G: Html&gt;() -&gt; PerseusApp&lt;G&gt; {\\n    PerseusApp::new()\\n        .template(crate::templates::index::get_template)\\n        .template(crate::templates::about::get_template)\\n        .error_pages(crate::error_pages::get_error_pages)\\n        .global_state_creator(crate::global_state::get_global_state_creator())\\n}\\n\\n</code></pre>\\n<p>This is a very typical scaffold, but the use of the global state creator is important, and that's what we'll look at next. You can put whatever you want into <code>src/error_pages.rs</code> to serve as your app's error pages, but that isn't the subject of this tutorial. You can read more about error pages <a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/error-pages\\">here</a> though.</p>\\n<p>In <code>src/global_state.rs</code>, put the following code:</p>\\n<pre><code class=\\"language-rust\\">use perseus::{state::GlobalStateCreator, RenderFnResult};\\nuse serde::{Deserialize, Serialize};\\n\\npub fn get_global_state_creator() -&gt; GlobalStateCreator {\\n    GlobalStateCreator::new().build_state_fn(get_build_state)\\n}\\n\\n#[perseus::autoserde(global_build_state)]\\npub async fn get_build_state() -&gt; RenderFnResult&lt;AppState&gt; {\\n    Ok(AppState {\\n        // We explicitly tell the first page that no login state has been checked yet\\n        auth: AuthData {\\n            state: LoginState::Server,\\n            username: String::new(),\\n        },\\n    })\\n}\\n\\n#[perseus::make_rx(AppStateRx)]\\n#[rx::nested(&quot;auth&quot;, AuthDataRx)]\\npub struct AppState {\\n    /// Authentication data accessible to all pages.\\n    pub auth: AuthData,\\n}\\n\\n/// The possible login states, including one for the server.\\n// A better structure might have \`Yes\` have an attached \`AuthData\` and use this as the top-level element, but then we'd have to implement \`MakeRx\`/\`MakeUnrx\` manually on this (\`make_rx\`\\n// can't handle \`enum\`s)\\n#[derive(Clone, Serialize, Deserialize)]\\npub enum LoginState {\\n    Yes,\\n    No,\\n    Server,\\n}\\n\\n/// Authentication data for the app.\\n// In a real app, you might store privileges here, or user preferences, etc. (all the things you'd need to have available constantly and everwhere)\\n#[perseus::make_rx(AuthDataRx)]\\npub struct AuthData {\\n    /// The actual login status.\\n    pub state: LoginState,\\n    /// The user's username.\\n    pub username: String,\\n}\\n// We implement a custom function on the reactive version of the global state here (hence the \`.get()\`s and \`.set()\`s, all the fields become \`Signal\`s)\\n// There's no point in implementing it on the unreactive version, since this will only be called from within the browser, in which we have a reactive version\\nimpl AuthDataRx {\\n    /// Checks whether or not the user is logged in and modifies the internal state accordingly. If this has already been run, it won't do anything (aka. it will only run if it's \`Server\`)\\n    #[cfg(target_arch = &quot;wasm32&quot;)] // This just avoids an unused function warning (since we have to gate the \`.update()\` call)\\n    pub fn detect_state(&amp;self) {\\n        // If we've checked the login status before, then we should assume the status hasn't changed (we'd change this in a login/logout page)\\n        if let LoginState::Yes | LoginState::No = *self.state.get() {\\n            return;\\n        }\\n\\n        // See the docs page on authentication to learn how to put something *secure* here\\n        // This example is NOT production-safe, and would result in absolutely terrible security!!!\\n\\n        // All we're doing in here is checking for the existence of a storage entry that contains a username (any attacker could trivially fake this)\\n        // Note that this storage API may be inaccessible, which we completely ignore here for simplicity\\n        let storage = web_sys::window().unwrap().local_storage().unwrap().unwrap();\\n        let auth_token = storage.get(&quot;username&quot;).unwrap(); // This is a \`Result&lt;Option&lt;T&gt;, E&gt;\`\\n\\n        if let Some(username) = auth_token {\\n            self.username.set(username.to_string());\\n            self.state.set(LoginState::Yes);\\n        } else {\\n            self.username.set(String::new());\\n            self.state.set(LoginState::No)\\n        }\\n    }\\n\\n    /// Logs the user in with the given username.\\n    pub fn login(&amp;self, username: &amp;str) {\\n        let storage = web_sys::window().unwrap().local_storage().unwrap().unwrap();\\n        storage.set(&quot;username&quot;, username).unwrap();\\n        self.state.set(LoginState::Yes);\\n        self.username.set(username.to_string());\\n    }\\n    /// Logs the user out.\\n    pub fn logout(&amp;self) {\\n        let storage = web_sys::window().unwrap().local_storage().unwrap().unwrap();\\n        storage.delete(&quot;username&quot;).unwrap();\\n        self.state.set(LoginState::No);\\n        self.username.set(String::new());\\n    }\\n}\\n\\n</code></pre>\\n<p>This is fairly intense, so let's break it down.</p>\\n<p>The first thing we do is create the function we call from <code>src/lib.rs</code>, <code>get_global_state_creator</code>, which initializes a <code>GlobalStateCreator</code> with the <code>get_build_state</code> function to create the initial global state (generated on the server and passed to the client). What that function does is generates an instance of <code>AppState</code>, a <code>struct</code> that will store our app's global state (which can include anything you want), which crucially has the <code>auth</code> field, an instance of <code>AuthData</code>, which will store the data for user authentication. Notably, all these <code>struct</code>s are annotated with <code>.make_rx()</code> to make them work with Perseus' state platform (note that <code>AppState</code> declares nested reactivity for the <code>auth</code> field, which you can read more about <a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/state/global\\">here</a>).</p>\\n<p><code>AuthData</code> has two fields: <code>state</code> and <code>username</code>. The first is a <code>LoginState</code>, which can be <code>Yes</code> (the user is logged in), <code>No</code> (the user is not logged in), or <code>Server</code> (the page has been rendered on the server and we don't have any information about the user's login status yet). The reason for these three possibilities is so we don't assume the user to be logged out before we've even gotten to their browser, as that might result in an ugly flash between pages, or worse an inappropriate redirection to a login page. By forcing ourselves to handle the <code>Server</code> case, we make our code more robust and clearer.</p>\\n<p>You might be wondering why we don't store <code>username</code>, which is just a <code>String</code>, as a property of <code>LoginState::Yes</code>, which would seem to be a much smarter data structure. This is absolutely true, but the problem is that the <code>make_rx</code> macro isn't smart enough to handle <code>enum</code>s, so we'd have to implement the <code>MakeRx</code> trait manually, which is a little tedious. To keep things simple, we'll go with storing <code>username</code> separately, but if you have multiple fields of information only relevant to authenticated users, you may want to take the more complex approach for cleanliness.</p>\\n<p>Next, we implement some functions on <code>AuthDataRx</code>, the reactive version of <code>AuthData</code>, not bothering to do so on the original because we'll only use these functions in templates, in which we have the reactive version. The first method is <code>.detect_state()</code>, which will, if the state is <code>LoginState::Server</code>, check if the user is logged in by checking the <code>username</code> key in the browser's storage (not IndexedDB, local storage instead, which is more appropriate for this sort of thing). Note that this kind of 'token' management is absolutely atrocious and completely insecure, and serves only as an example of how you might start with authentication. Do NOT use this in a production app!</p>\\n<p>The only other two functions are very simple, just <code>.login()</code> and <code>.logout()</code>, which alter the storage key and the global state to register a new login state.</p>\\n<h2>Templates</h2>\\n<p>Okay, let's get into writing some views based on all this! We'll create an index page and an about page for demonstration, so set up a <code>src/templates/</code> directory with a <code>mod.rs</code> that declares both files. Then put the following in <code>src/templates/index.rs</code>:</p>\\n<pre><code class=\\"language-rust\\">use crate::global_state::{AppStateRx, LoginState};\\nuse perseus::{Html, Template};\\nuse sycamore::prelude::*;\\n\\n#[perseus::template_rx]\\nfn index_view(_: (), AppStateRx { auth }: AppStateRx) -&gt; View&lt;G&gt; {\\n    // This isn't part of our data model because it's only used here to pass to the login function\\n    let entered_username = Signal::new(String::new());\\n    let eu_2 = entered_username.clone();\\n\\n    // We have to trigger this from outside the \`create_memo\`, and we should only be interacting with storage APIs in the browser (otherwise this would be called on the server too)\\n    // This will only cause a block on the first load, because this function just returns straight away if the state is already known\\n    #[cfg(target_arch = &quot;wasm32&quot;)]\\n    auth.detect_state();\\n\\n    // We make the view as a memo outside the root \`view!\` for better editor support (some editors don't like highlighting code in macros)\\n    // We need to clone \`global_state\` because otherwise the \`Signal\` updates won't be registered\\n    let view = create_memo(cloned!(auth =&gt; move || {\\n        match *auth.state.get() {\\n            LoginState::Yes =&gt; {\\n                let username = auth.username.get();\\n                view! {\\n                    h1 { (format!(&quot;Welcome back, {}!&quot;, &amp;username)) }\\n                    button(on:click = cloned!(auth =&gt; move |_| {\\n                        auth.logout();\\n                    })) { &quot;Logout&quot; }\\n                }\\n            }\\n            // You could also redirect the user to a dedicated login page\\n            LoginState::No =&gt; view! {\\n                h1 { &quot;Welcome, stranger!&quot; }\\n                input(bind:value = entered_username.clone(), placeholder = &quot;Username&quot;)\\n                    button(on:click = cloned!(eu_2, auth =&gt; move |_| {\\n                        auth.login(&amp;eu_2.get())\\n                    })) { &quot;Login&quot; }\\n            },\\n            // This will appear for a few moments while we figure out if the user is logged in or not\\n            LoginState::Server =&gt; View::empty(),\\n        }\\n    }));\\n    view! {\\n        (*view.get())\\n        br()\\n        a(href = &quot;about&quot;) { &quot;About&quot; }\\n    }\\n}\\n\\npub fn get_template&lt;G: Html&gt;() -&gt; Template&lt;G&gt; {\\n    Template::new(&quot;index&quot;).template(index_view)\\n}\\n\\n</code></pre>\\n<p>The only strange stuff in here is in <code>index_view()</code>, the rest is pretty much bog-standard Perseus template code. In <code>index_view()</code>, we don't take any template state, for demonstration purposes (you easily could), but we do take in the global state, which you'll remember contains all the authentication properties. Then we set up some <code>Signal</code>s outside the data model for handling a very simple login input (again, demonstrations). The important thing is the call to <code>auth.detect_state()</code>, which will refresh the authentication status by checking the user's browser for the login 'token' being stored. Note that, because we coded this to return straight away if we already know the login state, it's perfectly safe to put this at the start of every template you want to be authentication-protected. We also gate this with <code>#[cfg(target_arch = &quot;wasm32&quot;)]</code> to make sure it only runs on the browser (because we can't check for storage tokens in the server build process, that will throw plenty of errors!).</p>\\n<p>Skipping past the scary <code>let view = ...</code> block for a moment, the end of this function is dead simple: we just display a Sycamore <code>View&lt;G&gt;</code> stored in a <code>Signal</code> (that's in the <code>view</code> variable), and then a link to the about page. Anything other than that <code>(*view.get())</code> call will be displayed <em>whether the user is authenticated or not</em>.</p>\\n<p>Now for the fun part. To give us maximum editor support and cleanliness, we define the bulk of the view code outside the <code>view!</code> macro and in a variable called <code>view</code> instead, a derived <code>Signal</code> built with <code>create_memo</code> running on <code>auth.state</code>. So, if <code>auth.state</code> changes, this will also update immediately and automatically! All we do here is handle each of the three possible authentication states with a <code>match</code> statement: if we're on the server, we'll display nothing at all; if the user isn't logged in, a login page; and if they are, a welcome message and a logout button. In a real-world app, you'd probably have some code that redirects the user to a login page in the <code>LoginState::No</code> case.</p>\\n<p>You might be wondering why we display nothing before the login state is known, because this would seem to undercut the purpose of preloading the page at all. The answer to this question is that it does, and in an ideal world you'd process the user's login data on the server-side before serving them the appropriate prerendered page, which you <em>could</em> do, but that would be unnecessarily complex. Instead, we can display a blank page for a moment before redirecting or loading the appropriate skeleton.</p>\\n<p>In theory though, on some older mobile devices, this blank screen might be visible for more than a moment (on 3G networks, it could be 2 seconds or more), which is not good at all. To remedy this, you could make <code>LoginState::Server</code> and <code>LoginState::Yes</code> render the same skeleton (with some blanks for unfetched user information), so you're essentially assuming the user to be logged in. That means only anonymous users get a flash, from the skeleton to a login page. If your login page is at a central route (e.g. <code>/login</code>), you could inject some JavaScript code to run before any of your page is rendered that would check if the user is logged in, and then redirect them to the login page before any of the page loaded if not. This is the best solution, which involves no flashing whatsoever, and the display time of your app is optimized for all users, without needing any server-side code!</p>\\n<p><em>Note: in future, there will likely be a plugin to perform this optimization automatically. If someone wants to create this now, please open a PR!</em></p>\\n<p>Finally, add the following into the about page (just a very basic unprotected page for comparison):</p>\\n<pre><code class=\\"language-rust\\">use perseus::Template;\\nuse sycamore::prelude::{view, Html, View};\\n\\n#[perseus::template_rx]\\npub fn about_page() -&gt; View&lt;G&gt; {\\n    view! {\\n        p { &quot;About.&quot; }\\n        a(href = &quot;&quot;) { &quot;Index&quot; }\\n    }\\n}\\n\\npub fn get_template&lt;G: Html&gt;() -&gt; Template&lt;G&gt; {\\n    Template::new(&quot;about&quot;).template(about_page)\\n}\\n\\n</code></pre>\\n<h2>Conclusion</h2>\\n<p>Authentication in Perseus is fairly easy to implement, easier than in many other frameworks, though there are a few hurdles to get over and patterns to understand that will make your code more idiomatic. In future, nearly all this will likely be handled automatically by a plugin or library, which would enable more rapid and efficient development of complex apps. For now though, authentication must be built manually into Perseus apps.</p>\\n","current_version":"0.3.4","manifest":{"0.1.x":{"docs_rs":"0.1","git":"v0.1.4","state":"outdated"},"0.2.x":{"docs_rs":"0.2","git":"v0.2.3","state":"outdated"},"0.3.0-0.3.3":{"docs_rs":"0.3.3","git":"v0.3.3","state":"outdated"},"0.3.4":{"docs_rs":"0.3","git":"v0.3.6","state":"outdated"},"0.4.x":{"docs_rs":"0.4","git":"HEAD","state":"stable"}},"sidebar_content":"<h1>Introduction</h1>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/intro\\">Introduction</a>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/what-is-perseus\\">What is Perseus?</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/core-principles\\">Core Principles</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/tutorials/hello-world\\">Hello World!</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/tutorials/second-app\\">Your Second App</a></li>\\n</ul>\\n<hr />\\n<h1>Reference</h1>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/perseus-app\\"><code>PerseusApp</code></a>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/define-app\\"><code>define_app!</code></a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/views\\">Writing Views</a>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/index-view\\">The Index View</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/debugging\\">Debugging</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/live-reloading\\">Live Reloading</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/templates/intro\\">Templates and Routing</a>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/templates/metadata-modification\\">Modifying the <code>&lt;head&gt;</code></a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/templates/setting-headers\\">Modifying HTTP Headers</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/templates/router-state\\">Listening to the Router</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/error-pages\\">Error Pages</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/static-content\\">Static Content</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/i18n/intro\\">Internationalization</a>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/i18n/defining\\">Defining Translations</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/i18n/using\\">Using Translations</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/i18n/translations-managers\\">Translations Managers</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/i18n/other-engines\\">Other Translation Engines</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/strategies/intro\\">Rendering Strategies</a>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/strategies/build-state\\">Build State</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/strategies/build-paths\\">Build Paths</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/strategies/request-state\\">Request State</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/strategies/revalidation\\">Revalidation</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/strategies/incremental\\">Incremental Generation</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/strategies/amalgamation\\">State Amalgamation</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/hydration\\">Hydration</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/state/rx\\">Reactive State</a>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/state/global\\">Global State</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/state/freezing\\">State Freezing</a>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/state/idb-freezing\\">Freezing to IndexedDB</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/state/hsr\\">Hot State Reloading (HSR)</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/cli\\">CLI</a>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/ejecting\\">Ejecting</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/snooping\\">Snooping</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/testing/intro\\">Testing</a>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/testing/checkpoints\\">Checkpoints</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/testing/fantoccini-basics\\">Fantoccini Basics</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/testing/manual\\">Manual Testing</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/styling\\">Styling</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/server-communication\\">Communicating with a Server</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/stores\\">Stores</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/exporting\\">Static Exporting</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/intro\\">Plugins</a>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/functional\\">Functional Actions</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/control\\">Control Actions</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/using\\">Using Plugins</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/tinker\\">The <code>tinker</code> Action</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/writing\\">Writing Plugins</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/security\\">Security Considerations</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/publishing\\">Publishing Plugins</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/engines\\">Engines</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/deploying/intro\\">Deploying</a>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/deploying/serverful\\">Server Deployment</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/deploying/serverless\\">Serverless Deployment</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/deploying/size\\">Optimizing Code Size</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/deploying/relative-paths\\">Relative Paths</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/deploying/docker\\">Docker Deployment</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/updating\\">Migrating from v0.3.3</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/pitfalls-and-bugs\\">Common Pitfalls and Known Bugs</a></li>\\n</ul>\\n<hr />\\n<h1>Advanced</h1>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/advanced/intro\\">Under the Hood</a>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/advanced/arch\\">Architecture</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/advanced/initial-loads\\">Initial Loads</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/advanced/subsequent-loads\\">Subsequent Loads</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/advanced/routing\\">Routing</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/advanced/route-announcer\\">Route Announcer</a></li>\\n</ul>\\n<hr />\\n<h1>Further Tutorials</h1>\\n<ul>\\n<li><a href=\\"docs/tutorials/auth\\">Authentication</a></li>\\n</ul>\\n","status":"Outdated","title":"Authentication"}`;
window.__PERSEUS_INITIAL_WIDGET_STATES = `{}`;
window.__PERSEUS_TRANSLATIONS = `{
    "perseus": "Perseus",
    "sycamore": "Sycamore",
    "navlinks.docs": "Docs",
    "navlinks.comparisons": "Comparisons",
    "navlinks.plugins": "Plugins",
    "index-intro.heading": "The Rust framework for the modern web",
    "index-intro.get-started-button": "Get started now",
    "index-intro.github-button": "GitHub",
    "index-state-gen.heading": "Generate state, on your terms",
    "index-state-gen.desc": "Perseus apps can generate state whenever they like and pass it to <a href=\\"https://github.com/sycamore-rs/sycamore\\" class=\\"underline\\">Sycamore</a>, one of the fastest web frameworks in the world.",
    "index-i18n.heading.start": "I18n",
    "index-i18n.heading.rest": " that just works",
    "index-i18n.heading.tooltip": "Internationalization",
    "index-i18n.desc": "Just add translations using <a href=\\"https://projectfluent.org\\" class=\\"underline\\">Fluent</a>, and your app can be set up in seconds in multiple languages, with automatic user locale detection.",
    "index-opts.heading": "You want options? We got options.",
    "index-opts.desc": "Perseus comes with a built-in plugins system and full customizability of almost every part of the system. Static exporting? Serverful deployment? Fetch data by carrier pigeon? Easy.",
    "index-speed.heading": "Fast. Crazy. Fast.",
    "index-speed.desc-line-1": "Underlying platform? <strong>Rust.</strong>",
    "index-speed.desc-line-2": "Target platform? <strong>WebAssembly.</strong>",
    "index-speed.desc-line-3": "Lighthouse scores? <strong>💯</strong>",
    "index-speed.desktop-perf-label": "Performance (Desktop)",
    "index-speed.mobile-perf-label": "Performance (Mobile)",
    "index-speed.best-practices-label": "Best Practices",
    "index-cta.heading": "Get started with Perseus today!",
    "index-cta.docs-button": "Docs",
    "index-cta.gh-button": "GitHub",
    "index-cta.api-docs-button": "API Docs",
    "index-cta.crates-io-button": "Crates.io",
    "index-cta.matrix-button": "Matrix",
    "index-cta.discord-button": "Discord",
    "index-cta.comparisons-button": "Comparisons",
    "footer.copyright": "© <a href=\\"https://github.com/arctic-hen7\\" class=\\"underline\\">arctic-hen7</a> { $years }, see license <a href=\\"https://github.com/framesurge/perseus/blob/main/LICENSE\\" class=\\"underline\\">here</a>.",
    "comparisons-title": "Comparisons to Other Frameworks",
    "comparisons-heading": "Comparisons",
    "comparisons-subtitle": "See how Perseus compares to other web development frameworks.",
    "comparisons-extra": "Is there anything we're missing here? Please <a href =\\"https://github.com/framesurge/perseus/issues/new/choose\\" class=\\"underline\\">open an issue</a> and let us know!",
    "comparisons-table-header": "Comparison",
    "comparisons-table-headings.name": "Name",
    "comparisons-table-headings.supports_ssg": "Static generation",
    "comparisons-table-headings.supports_ssr": "Server-side rendering",
    "comparisons-table-headings.supports_ssr_ssg_same_page": "SSG & SSR in same page",
    "comparisons-table-headings.supports_i18n": "Internationalization",
    "comparisons-table-headings.supports_incremental": "Incremental generation",
    "comparisons-table-headings.supports_revalidation": "Revalidation",
    "comparisons-table-headings.inbuilt_cli": "Inbuilt CLI",
    "comparisons-table-headings.inbuilt_routing": "Routing support",
    "comparisons-table-headings.supports_shell": "App shell",
    "comparisons-table-headings.supports_deployment": "Easy deployment",
    "comparisons-table-headings.supports_exporting": "Static exporting",
    "comparisons-table-headings.language": "Language",
    "comparisons-table-headings.homepage_lighthouse_desktop": "Homepage Lighthouse Score (Desktop)",
    "comparisons-table-headings.homepage_lighthouse_mobile": "Homepage Lighthouse Score (Mobile)",
    "comparisons-table-details.supports_ssg": "Whether or not the framework supports pre-rendering pages at build-time.",
    "comparisons-table-details.supports_ssr": "Whether or not the framework supports rendering pages dynamically when they're requested.",
    "comparisons-table-details.supports_ssr_ssg_same_page": "Whether or not the framework supports SSG and SSR (see above) in the very same page.",
    "comparisons-table-details.supports_i18n": "Whether or not the framework supports building a multilingual app. Some frameworks support this through plugins.",
    "comparisons-table-details.supports_incremental": "Whether or not the framework supports rendering pages on-demand and then caching them for future use.",
    "comparisons-table-details.supports_revalidation": "Whether or not the framework supports rebuilding pages that were built at build-time at request-time. Some frameworks can do this by time, or by custom logic. Perseus supports both.",
    "comparisons-table-details.inbuilt_cli": "Whether or not the framework has a command-line interface for convenient usage. Some frameworks use third-party CLIs.",
    "comparisons-table-details.inbuilt_routing": "Whether or not the framework supports inbuilt routing. Most frameworks have their own way of doing this if they do support it.",
    "comparisons-table-details.supports_shell": "Whether or not this framework has an app shell, which makes switching pages much faster and cleaner.",
    "comparisons-table-details.supports_deployment": "Whether or not this framework supports easy deployment. Perseus can deploy in one command.",
    "comparisons-table-details.supports_exporting": "Whether or not this framework can operate without a server, as a series of purely static files.",
    "comparisons-table-details.language": "The programming language this framework is built in. (Hint: Rust is the fastest!)",
    "comparisons-table-details.homepage_lighthouse_desktop": "The Lighthouse score out of 100 for desktop (higher is better). These are collected from Google's PageSpeed Insights tool. These are for the framework's website, and may not reflect the performance of all sites made with the framework.",
    "comparisons-table-details.homepage_lighthouse_mobile": "The Lighthouse score out of 100 for mobile (higher is better). These are collected from Google's PageSpeed Insights tool. These are for the framework's website, and may not reflect the performance of all sites made with the framework.",
    "comparisons-sycamore-heading": "Perseus vs Sycamore",
    "comparisons-sycamore-text": "Perseus is a framework that uses Sycamore to write views (the things users see), so there's not much point in comparing the two as competitors. However, Sycamore can be used without Perseus, which works perfectly well, though you'll miss out on features like inbuilt internationalization, static generation (though you could build this yourself), and incremental generation. If you want to build just a bit of your site with Rust, Sycamore is the perfect tool, Perseus is a full framework designed for building entire websites.",
    "comparisons-unknown-heading": "Perseus vs { $name }",
    "docs-title-base": "Perseus Docs",
    "docs-status.outdated": "This version of the documentation is outdated, and features documented here may work differently now. You can see the latest stable version of the docs <a href=\\"en-US/docs/{ $stable }/intro\\" class=\\"underline\\">here</a>.",
    "docs-status.beta": "This version of the documentation is for a version that has only been released in beta, and is not yet stable. Features documented here may not be present in the latest stable version, and they're subject to rapid and drastic change. You can see the latest stable version of the docs <a href=\\"en-US/docs/{ $stable }/intro\\" class=\\"underline\\">here</a>.",
    "docs-status.next": "This version of the documentation is for a version that has not yet been released, and features documented here may not be present in the latest release. You can see the latest stable version of the docs <a href=\\"en-US/docs/{ $stable }/intro\\" class=\\"underline\\">here</a>.",
    "docs-version-switcher.next": "Next (unreleased)",
    "docs-version-switcher.beta": "v{ $version } (beta)",
    "docs-version-switcher.stable": "v{ $version } (stable)",
    "docs-version-switcher.outdated": "v{ $version } (outdated)",
    "plugins-title": "Plugins",
    "plugins-title-full": "Perseus Plugins",
    "plugin-card-author": "By { $author }",
    "plugin-details.repo_link": "Repository:",
    "plugin-details.crates_link": "Crate page:",
    "plugin-details.docs_link": "Docs:",
    "plugin-details.site_link": "Site:",
    "plugin-details.metadata_heading": "Metadata",
    "plugin-details.no_link_text": "N/A",
    "plugin-search.placeholder": "Search",
    "plugin-search.no_results": "No results found.",
    "plugins-desc": "These are all the public plugins for Perseus! If you've made a plugin, and you'd like it to be listed here, please open an issue on our repository!",
    "search": "Search the docs",
    "index-example-switcher.excerpts": "Excerpts",
    "index-example-switcher.full": "Full"
}
`;</script><meta itemprop=__perseus_head_end><script>//</script><body class="bg-white dark:bg-neutral-900"><div id=root><header data-hk=8.0 class="shadow-md sm:p-2 w-full mb-20 bg-neutral-500/30 backdrop-blur-lg text-black dark:text-white"><div data-hk=8.1 class="flex justify-between items-center"><a data-hk=8.2 class="justify-self-start self-center m-3 ml-5 text-md sm:text-2xl text-bold title-font"href=en-US/>Perseus</a><div data-hk=8.3 class="md:hidden m-3 mr-5 tham tham-e-spin tham-w-6"><div data-hk=8.4 class=tham-box><div data-hk=8.5 class="tham-inner bg-black dark:bg-white"></div></div></div><nav data-hk=8.6 class="hidden md:flex"><ul data-hk=8.7 class="mr-5 flex"><li data-hk=9.0 class="m-3 p-1 title-font"><a data-hk=9.1 href=en-US/docs class=px-2>Docs</a><li data-hk=9.2 class="m-3 p-1 title-font"><a data-hk=9.3 href=en-US/comparisons class=px-2>Comparisons</a><li data-hk=9.4 class="m-3 p-1 title-font"><a data-hk=9.5 href=en-US/plugins class=px-2>Plugins</a></ul></nav></div><nav data-hk=8.8 id=mobile_nav_menu class="md:hidden w-full text-center justify-center hidden"><ul data-hk=8.9 class=mr-5><li data-hk=10.0 class="m-3 p-1 title-font"><a data-hk=10.1 href=en-US/docs class=px-2>Docs</a><li data-hk=10.2 class="m-3 p-1 title-font"><a data-hk=10.3 href=en-US/comparisons class=px-2>Comparisons</a><li data-hk=10.4 class="m-3 p-1 title-font"><a data-hk=10.5 href=en-US/plugins class=px-2>Plugins</a></ul><hr data-hk=2.0><div data-hk=2.1 class="text-left p-3 overflow-y-scroll h-[60vh]"><div data-hk=2.2 class="flex w-full justify-center text-center"><div data-hk=2.3 class="max-w-3xl flex flex-col"><select data-hk=4.4 class="p-2 rounded-md text-white bg-indigo-500"><option data-hk=4.5 value=next>Next (unreleased)<option data-hk=4.6 value=0.4.x>v0.4.x (stable)<option data-hk=4.0 value=0.3.4 selected>v0.3.4 (outdated)<option data-hk=4.1 value=0.3.0-0.3.3>v0.3.0-0.3.3 (outdated)<option data-hk=4.2 value=0.2.x>v0.2.x (outdated)<option data-hk=4.3 value=0.1.x>v0.1.x (outdated)</select></div></div><div data-hk=2.4 class=docs-links-markdown><h1>Introduction</h1><ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/intro>Introduction</a> <ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/what-is-perseus>What is Perseus?</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/core-principles>Core Principles</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/tutorials/hello-world>Hello World!</a></ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/tutorials/second-app>Your Second App</a></ul><hr><h1>Reference</h1><ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/perseus-app><code>PerseusApp</code></a> <ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/define-app><code>define_app!</code></a></ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/views>Writing Views</a> <ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/index-view>The Index View</a></ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/debugging>Debugging</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/live-reloading>Live Reloading</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/templates/intro>Templates and Routing</a> <ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/templates/metadata-modification>Modifying the <code>&LThead></code></a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/templates/setting-headers>Modifying HTTP Headers</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/templates/router-state>Listening to the Router</a></ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/error-pages>Error Pages</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/static-content>Static Content</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/i18n/intro>Internationalization</a> <ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/i18n/defining>Defining Translations</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/i18n/using>Using Translations</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/i18n/translations-managers>Translations Managers</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/i18n/other-engines>Other Translation Engines</a></ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/strategies/intro>Rendering Strategies</a> <ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/strategies/build-state>Build State</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/strategies/build-paths>Build Paths</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/strategies/request-state>Request State</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/strategies/revalidation>Revalidation</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/strategies/incremental>Incremental Generation</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/strategies/amalgamation>State Amalgamation</a></ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/hydration>Hydration</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/state/rx>Reactive State</a> <ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/state/global>Global State</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/state/freezing>State Freezing</a> <ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/state/idb-freezing>Freezing to IndexedDB</a></ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/state/hsr>Hot State Reloading (HSR)</a></ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/cli>CLI</a> <ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/ejecting>Ejecting</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/snooping>Snooping</a></ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/testing/intro>Testing</a> <ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/testing/checkpoints>Checkpoints</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/testing/fantoccini-basics>Fantoccini Basics</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/testing/manual>Manual Testing</a></ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/styling>Styling</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/server-communication>Communicating with a Server</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/stores>Stores</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/exporting>Static Exporting</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/intro>Plugins</a> <ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/functional>Functional Actions</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/control>Control Actions</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/using>Using Plugins</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/tinker>The <code>tinker</code> Action</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/writing>Writing Plugins</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/security>Security Considerations</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/publishing>Publishing Plugins</a></ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/engines>Engines</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/deploying/intro>Deploying</a> <ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/deploying/serverful>Server Deployment</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/deploying/serverless>Serverless Deployment</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/deploying/size>Optimizing Code Size</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/deploying/relative-paths>Relative Paths</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/deploying/docker>Docker Deployment</a></ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/updating>Migrating from v0.3.3</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/pitfalls-and-bugs>Common Pitfalls and Known Bugs</a></ul><hr><h1>Advanced</h1><ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/advanced/intro>Under the Hood</a> <ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/advanced/arch>Architecture</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/advanced/initial-loads>Initial Loads</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/advanced/subsequent-loads>Subsequent Loads</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/advanced/routing>Routing</a></ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/advanced/route-announcer>Route Announcer</a></ul><hr><h1>Further Tutorials</h1><ul><li><a href=docs/tutorials/auth>Authentication</a></ul></div></div></nav></header><main data-hk=2.20 id=scroll-container><div data-hk=2.5 class="flex w-full"><div data-hk=2.6 class="h-screen pt-14 xs:pt-16 sm:pt-20 lg:pt-25 hidden md:block max-w-xs w-full border-r overflow-y-auto"><div data-hk=2.7 class=mr-5><div data-hk=2.8 class="text-left text-black dark:text-white p-3"><aside data-hk=2.9><div data-hk=2.10 class="flex flex-col"><select data-hk=6.4 class="p-2 rounded-md text-white bg-indigo-500"><option data-hk=6.5 value=next>Next (unreleased)<option data-hk=6.6 value=0.4.x>v0.4.x (stable)<option data-hk=6.0 value=0.3.4 selected>v0.3.4 (outdated)<option data-hk=6.1 value=0.3.0-0.3.3>v0.3.0-0.3.3 (outdated)<option data-hk=6.2 value=0.2.x>v0.2.x (outdated)<option data-hk=6.3 value=0.1.x>v0.1.x (outdated)</select></div><div data-hk=2.11 class=docs-links-markdown><h1>Introduction</h1><ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/intro>Introduction</a> <ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/what-is-perseus>What is Perseus?</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/core-principles>Core Principles</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/tutorials/hello-world>Hello World!</a></ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/tutorials/second-app>Your Second App</a></ul><hr><h1>Reference</h1><ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/perseus-app><code>PerseusApp</code></a> <ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/define-app><code>define_app!</code></a></ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/views>Writing Views</a> <ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/index-view>The Index View</a></ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/debugging>Debugging</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/live-reloading>Live Reloading</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/templates/intro>Templates and Routing</a> <ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/templates/metadata-modification>Modifying the <code>&LThead></code></a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/templates/setting-headers>Modifying HTTP Headers</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/templates/router-state>Listening to the Router</a></ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/error-pages>Error Pages</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/static-content>Static Content</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/i18n/intro>Internationalization</a> <ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/i18n/defining>Defining Translations</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/i18n/using>Using Translations</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/i18n/translations-managers>Translations Managers</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/i18n/other-engines>Other Translation Engines</a></ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/strategies/intro>Rendering Strategies</a> <ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/strategies/build-state>Build State</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/strategies/build-paths>Build Paths</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/strategies/request-state>Request State</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/strategies/revalidation>Revalidation</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/strategies/incremental>Incremental Generation</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/strategies/amalgamation>State Amalgamation</a></ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/hydration>Hydration</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/state/rx>Reactive State</a> <ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/state/global>Global State</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/state/freezing>State Freezing</a> <ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/state/idb-freezing>Freezing to IndexedDB</a></ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/state/hsr>Hot State Reloading (HSR)</a></ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/cli>CLI</a> <ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/ejecting>Ejecting</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/snooping>Snooping</a></ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/testing/intro>Testing</a> <ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/testing/checkpoints>Checkpoints</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/testing/fantoccini-basics>Fantoccini Basics</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/testing/manual>Manual Testing</a></ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/styling>Styling</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/server-communication>Communicating with a Server</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/stores>Stores</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/exporting>Static Exporting</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/intro>Plugins</a> <ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/functional>Functional Actions</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/control>Control Actions</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/using>Using Plugins</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/tinker>The <code>tinker</code> Action</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/writing>Writing Plugins</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/security>Security Considerations</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/publishing>Publishing Plugins</a></ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/engines>Engines</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/deploying/intro>Deploying</a> <ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/deploying/serverful>Server Deployment</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/deploying/serverless>Serverless Deployment</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/deploying/size>Optimizing Code Size</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/deploying/relative-paths>Relative Paths</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/deploying/docker>Docker Deployment</a></ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/updating>Migrating from v0.3.3</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/pitfalls-and-bugs>Common Pitfalls and Known Bugs</a></ul><hr><h1>Advanced</h1><ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/advanced/intro>Under the Hood</a> <ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/advanced/arch>Architecture</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/advanced/initial-loads>Initial Loads</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/advanced/subsequent-loads>Subsequent Loads</a><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/advanced/routing>Routing</a></ul><li><a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/advanced/route-announcer>Route Announcer</a></ul><hr><h1>Further Tutorials</h1><ul><li><a href=docs/tutorials/auth>Authentication</a></ul></div></aside></div></div></div><div data-hk=2.12 class="h-screen pt-14 xs:pt-16 sm:pt-20 lg:pt-25 grid grid-rows-[1fr_min-content] w-full overflow-y-auto"><div data-hk=2.13 class="px-3 w-full sm:mr-auto sm:ml-auto sm:max-w-prose lg:max-w-3xl xl:max-w-4xl 2xl:max-w-5xl min-w-0"><div data-hk=2.14 class="ring-4 ring-red-400 p-4 rounded-lg mt-1"><div data-hk=2.15 class="flex flex-col 2xs:flex-row dark:text-white"><span data-hk=2.16 class="self-center mr-2"style="fill: #f87171;"><svg xmlns=http://www.w3.org/2000/svg height=auto viewbox="0 0 24 24"width=2.25rem fill=\#000000><path d="M12 7c.55 0 1 .45 1 1v4c0 .55-.45 1-1 1s-1-.45-1-1V8c0-.55.45-1 1-1zm-.01-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm1-3h-2v-2h2v2z"/></svg></span><p data-hk=2.17>This version of the documentation is outdated, and features documented here may work differently now. You can see the latest stable version of the docs <a href=en-US/docs/0.4.x/intro class=underline>here</a>.</div></div><main data-hk=2.18 class="text-black dark:text-white"><div data-hk=1.0 class="markdown min-w-0 pb-10"><h1>Authentication</h1><p>If you're building an app with multiple users that might have different preferences or the like, chances are you'll need some way for those users to log in, you'll need an authentication system. This is fairly easy to achieve in Perseus with the <a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/state/global>global state</a> system, though there are a few gotchas -- hence this tutorial!<h2>Concepts</h2><p>Authentication as a process involves the user wanting to go to some page that they need to be logged in to access (e.g. a dashboard of bank statements), logging in, accessing that page, and then maybe logging back out a little later. All that really boils down to in terms of code is a system to manage whether or not the user is logged in, a system of authenticating the user's password (or however else they're logging in), and a system of providing access on certain pages only to authenticated users.<p>The first part can be achieved through an entry in an app's global state that describes whether or not the user is logged in, what their username is, etc. Notably, this could be saved through <a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/state/freezing>state freezing</a> to IndexedDB (which would preserve all the properties of the user's login) (not covered in this tutorial), though we still need a way of securely confirming that the user is who they say they are. For that, we would need to store a token, often done in the browser's <a href=TODO>local storage</a> API, which we'll use in this example. As for how this token works, that requires a good deal of thought to security and how your app will work, and so is elided here (we'll just use a very insecure 'token' that tells us what the user's username is).<p>The final part of this is controlling access to protected pages, which is the part where Perseus becomes more relevant as a framework. There are two types of protected pages that you might have, user-specific and non-user-specific. If a protected page is user-specific, then it's useless without the user's personal data. For example, a list of bank statements is completely worthless to an attacker without the user's bank statements populating it, rather than a loading skeleton. For these kinds of pages, we can render a skeleton on the server that's then populated with the user's information once the page is loaded in the browser. This means we don't have to go to any extra lengths to prevent access to the skeleton, since we'll assume that the user's data can only be accessed over an APi that needs some unique token that can only be generated with the user's password, or something similar.<p>If a protected page is non-user-specific, that means it contains content that's the same for all users, but that should only be accessible to users who have logged in. These are more complex because protecting them requires that you don't prerender them on the server at all, and that the code for the protected content not be in your codebase. That may seem weird -- how can you render it at all if it's not in your codebase? Well, you'd have to check if the user is authenticated, and then use some token to fetch the protected content from a server and then display that. If you were to have the protected content anywhere in your code, then it would be accessible to any user willing to reverse-engineer the generated WebAssembly (which isn't too tricky), and hence not really protected at all.<h2>Secure Authentication</h2><p>TODO<h2>Building the App</h2><h3>Setup</h3><p>To start with, we'll set up a fairly typical Perseus app by initializing a new Rust project with <code>cargo new --lib</code>. Then, put the following in <code>Cargo.toml</code> (changing the package name as you want):<pre><code class=language-toml>[package]
name = "perseus-example-auth"
version = "0.3.6"
edition = "2018"

# See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html

[dependencies]
# We can't use hydration here yet (it doesn't handle the rapid page changes from unauthenticated to authenticated well)
perseus = { path = "../../../packages/perseus", features = [] }
sycamore = "0.7"
serde = { version = "1", features = ["derive"] }
serde_json = "1"
# We need the `HtmlDocument` feature to be able to use cookies (which this example does)
web-sys = { version = "0.3", features = [ "Storage" ] }

</code></pre><p>The only things of particular note here are the dependency on <code>web-sys</code>, from which we use the <code>Storage</code> feature (important later), as well as not using Sycamore's <a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/hydration>hydration</a> system, as it doesn't handle the kinds of page changes from unauthenticated to authenticated that we'll need in this app. Note that hydration will likely work fine with this in future version of Sycamore (it's currently experimental though).<p>Now add the following to <code>src/lib.rs</code>:<pre><code class=language-rust>mod error_pages;
mod global_state;
mod templates;

use perseus::{Html, PerseusApp};

#[perseus::main]
pub fn main&LTG: Html>() -> PerseusApp&LTG> {
    PerseusApp::new()
        .template(crate::templates::index::get_template)
        .template(crate::templates::about::get_template)
        .error_pages(crate::error_pages::get_error_pages)
        .global_state_creator(crate::global_state::get_global_state_creator())
}

</code></pre><p>This is a very typical scaffold, but the use of the global state creator is important, and that's what we'll look at next. You can put whatever you want into <code>src/error_pages.rs</code> to serve as your app's error pages, but that isn't the subject of this tutorial. You can read more about error pages <a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/error-pages>here</a> though.<p>In <code>src/global_state.rs</code>, put the following code:<pre><code class=language-rust>use perseus::{state::GlobalStateCreator, RenderFnResult};
use serde::{Deserialize, Serialize};

pub fn get_global_state_creator() -> GlobalStateCreator {
    GlobalStateCreator::new().build_state_fn(get_build_state)
}

#[perseus::autoserde(global_build_state)]
pub async fn get_build_state() -> RenderFnResult&LTAppState> {
    Ok(AppState {
        // We explicitly tell the first page that no login state has been checked yet
        auth: AuthData {
            state: LoginState::Server,
            username: String::new(),
        },
    })
}

#[perseus::make_rx(AppStateRx)]
#[rx::nested("auth", AuthDataRx)]
pub struct AppState {
    /// Authentication data accessible to all pages.
    pub auth: AuthData,
}

/// The possible login states, including one for the server.
// A better structure might have `Yes` have an attached `AuthData` and use this as the top-level element, but then we'd have to implement `MakeRx`/`MakeUnrx` manually on this (`make_rx`
// can't handle `enum`s)
#[derive(Clone, Serialize, Deserialize)]
pub enum LoginState {
    Yes,
    No,
    Server,
}

/// Authentication data for the app.
// In a real app, you might store privileges here, or user preferences, etc. (all the things you'd need to have available constantly and everwhere)
#[perseus::make_rx(AuthDataRx)]
pub struct AuthData {
    /// The actual login status.
    pub state: LoginState,
    /// The user's username.
    pub username: String,
}
// We implement a custom function on the reactive version of the global state here (hence the `.get()`s and `.set()`s, all the fields become `Signal`s)
// There's no point in implementing it on the unreactive version, since this will only be called from within the browser, in which we have a reactive version
impl AuthDataRx {
    /// Checks whether or not the user is logged in and modifies the internal state accordingly. If this has already been run, it won't do anything (aka. it will only run if it's `Server`)
    #[cfg(target_arch = "wasm32")] // This just avoids an unused function warning (since we have to gate the `.update()` call)
    pub fn detect_state(&self) {
        // If we've checked the login status before, then we should assume the status hasn't changed (we'd change this in a login/logout page)
        if let LoginState::Yes | LoginState::No = *self.state.get() {
            return;
        }

        // See the docs page on authentication to learn how to put something *secure* here
        // This example is NOT production-safe, and would result in absolutely terrible security!!!

        // All we're doing in here is checking for the existence of a storage entry that contains a username (any attacker could trivially fake this)
        // Note that this storage API may be inaccessible, which we completely ignore here for simplicity
        let storage = web_sys::window().unwrap().local_storage().unwrap().unwrap();
        let auth_token = storage.get("username").unwrap(); // This is a `Result&LTOption&LTT>, E>`

        if let Some(username) = auth_token {
            self.username.set(username.to_string());
            self.state.set(LoginState::Yes);
        } else {
            self.username.set(String::new());
            self.state.set(LoginState::No)
        }
    }

    /// Logs the user in with the given username.
    pub fn login(&self, username: &str) {
        let storage = web_sys::window().unwrap().local_storage().unwrap().unwrap();
        storage.set("username", username).unwrap();
        self.state.set(LoginState::Yes);
        self.username.set(username.to_string());
    }
    /// Logs the user out.
    pub fn logout(&self) {
        let storage = web_sys::window().unwrap().local_storage().unwrap().unwrap();
        storage.delete("username").unwrap();
        self.state.set(LoginState::No);
        self.username.set(String::new());
    }
}

</code></pre><p>This is fairly intense, so let's break it down.<p>The first thing we do is create the function we call from <code>src/lib.rs</code>, <code>get_global_state_creator</code>, which initializes a <code>GlobalStateCreator</code> with the <code>get_build_state</code> function to create the initial global state (generated on the server and passed to the client). What that function does is generates an instance of <code>AppState</code>, a <code>struct</code> that will store our app's global state (which can include anything you want), which crucially has the <code>auth</code> field, an instance of <code>AuthData</code>, which will store the data for user authentication. Notably, all these <code>struct</code>s are annotated with <code>.make_rx()</code> to make them work with Perseus' state platform (note that <code>AppState</code> declares nested reactivity for the <code>auth</code> field, which you can read more about <a href=https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/state/global>here</a>).<p><code>AuthData</code> has two fields: <code>state</code> and <code>username</code>. The first is a <code>LoginState</code>, which can be <code>Yes</code> (the user is logged in), <code>No</code> (the user is not logged in), or <code>Server</code> (the page has been rendered on the server and we don't have any information about the user's login status yet). The reason for these three possibilities is so we don't assume the user to be logged out before we've even gotten to their browser, as that might result in an ugly flash between pages, or worse an inappropriate redirection to a login page. By forcing ourselves to handle the <code>Server</code> case, we make our code more robust and clearer.<p>You might be wondering why we don't store <code>username</code>, which is just a <code>String</code>, as a property of <code>LoginState::Yes</code>, which would seem to be a much smarter data structure. This is absolutely true, but the problem is that the <code>make_rx</code> macro isn't smart enough to handle <code>enum</code>s, so we'd have to implement the <code>MakeRx</code> trait manually, which is a little tedious. To keep things simple, we'll go with storing <code>username</code> separately, but if you have multiple fields of information only relevant to authenticated users, you may want to take the more complex approach for cleanliness.<p>Next, we implement some functions on <code>AuthDataRx</code>, the reactive version of <code>AuthData</code>, not bothering to do so on the original because we'll only use these functions in templates, in which we have the reactive version. The first method is <code>.detect_state()</code>, which will, if the state is <code>LoginState::Server</code>, check if the user is logged in by checking the <code>username</code> key in the browser's storage (not IndexedDB, local storage instead, which is more appropriate for this sort of thing). Note that this kind of 'token' management is absolutely atrocious and completely insecure, and serves only as an example of how you might start with authentication. Do NOT use this in a production app!<p>The only other two functions are very simple, just <code>.login()</code> and <code>.logout()</code>, which alter the storage key and the global state to register a new login state.<h2>Templates</h2><p>Okay, let's get into writing some views based on all this! We'll create an index page and an about page for demonstration, so set up a <code>src/templates/</code> directory with a <code>mod.rs</code> that declares both files. Then put the following in <code>src/templates/index.rs</code>:<pre><code class=language-rust>use crate::global_state::{AppStateRx, LoginState};
use perseus::{Html, Template};
use sycamore::prelude::*;

#[perseus::template_rx]
fn index_view(_: (), AppStateRx { auth }: AppStateRx) -> View&LTG> {
    // This isn't part of our data model because it's only used here to pass to the login function
    let entered_username = Signal::new(String::new());
    let eu_2 = entered_username.clone();

    // We have to trigger this from outside the `create_memo`, and we should only be interacting with storage APIs in the browser (otherwise this would be called on the server too)
    // This will only cause a block on the first load, because this function just returns straight away if the state is already known
    #[cfg(target_arch = "wasm32")]
    auth.detect_state();

    // We make the view as a memo outside the root `view!` for better editor support (some editors don't like highlighting code in macros)
    // We need to clone `global_state` because otherwise the `Signal` updates won't be registered
    let view = create_memo(cloned!(auth => move || {
        match *auth.state.get() {
            LoginState::Yes => {
                let username = auth.username.get();
                view! {
                    h1 { (format!("Welcome back, {}!", &username)) }
                    button(on:click = cloned!(auth => move |_| {
                        auth.logout();
                    })) { "Logout" }
                }
            }
            // You could also redirect the user to a dedicated login page
            LoginState::No => view! {
                h1 { "Welcome, stranger!" }
                input(bind:value = entered_username.clone(), placeholder = "Username")
                    button(on:click = cloned!(eu_2, auth => move |_| {
                        auth.login(&eu_2.get())
                    })) { "Login" }
            },
            // This will appear for a few moments while we figure out if the user is logged in or not
            LoginState::Server => View::empty(),
        }
    }));
    view! {
        (*view.get())
        br()
        a(href = "about") { "About" }
    }
}

pub fn get_template&LTG: Html>() -> Template&LTG> {
    Template::new("index").template(index_view)
}

</code></pre><p>The only strange stuff in here is in <code>index_view()</code>, the rest is pretty much bog-standard Perseus template code. In <code>index_view()</code>, we don't take any template state, for demonstration purposes (you easily could), but we do take in the global state, which you'll remember contains all the authentication properties. Then we set up some <code>Signal</code>s outside the data model for handling a very simple login input (again, demonstrations). The important thing is the call to <code>auth.detect_state()</code>, which will refresh the authentication status by checking the user's browser for the login 'token' being stored. Note that, because we coded this to return straight away if we already know the login state, it's perfectly safe to put this at the start of every template you want to be authentication-protected. We also gate this with <code>#[cfg(target_arch = "wasm32")]</code> to make sure it only runs on the browser (because we can't check for storage tokens in the server build process, that will throw plenty of errors!).<p>Skipping past the scary <code>let view = ...</code> block for a moment, the end of this function is dead simple: we just display a Sycamore <code>View&LTG></code> stored in a <code>Signal</code> (that's in the <code>view</code> variable), and then a link to the about page. Anything other than that <code>(*view.get())</code> call will be displayed <em>whether the user is authenticated or not</em>.<p>Now for the fun part. To give us maximum editor support and cleanliness, we define the bulk of the view code outside the <code>view!</code> macro and in a variable called <code>view</code> instead, a derived <code>Signal</code> built with <code>create_memo</code> running on <code>auth.state</code>. So, if <code>auth.state</code> changes, this will also update immediately and automatically! All we do here is handle each of the three possible authentication states with a <code>match</code> statement: if we're on the server, we'll display nothing at all; if the user isn't logged in, a login page; and if they are, a welcome message and a logout button. In a real-world app, you'd probably have some code that redirects the user to a login page in the <code>LoginState::No</code> case.<p>You might be wondering why we display nothing before the login state is known, because this would seem to undercut the purpose of preloading the page at all. The answer to this question is that it does, and in an ideal world you'd process the user's login data on the server-side before serving them the appropriate prerendered page, which you <em>could</em> do, but that would be unnecessarily complex. Instead, we can display a blank page for a moment before redirecting or loading the appropriate skeleton.<p>In theory though, on some older mobile devices, this blank screen might be visible for more than a moment (on 3G networks, it could be 2 seconds or more), which is not good at all. To remedy this, you could make <code>LoginState::Server</code> and <code>LoginState::Yes</code> render the same skeleton (with some blanks for unfetched user information), so you're essentially assuming the user to be logged in. That means only anonymous users get a flash, from the skeleton to a login page. If your login page is at a central route (e.g. <code>/login</code>), you could inject some JavaScript code to run before any of your page is rendered that would check if the user is logged in, and then redirect them to the login page before any of the page loaded if not. This is the best solution, which involves no flashing whatsoever, and the display time of your app is optimized for all users, without needing any server-side code!<p><em>Note: in future, there will likely be a plugin to perform this optimization automatically. If someone wants to create this now, please open a PR!</em><p>Finally, add the following into the about page (just a very basic unprotected page for comparison):<pre><code class=language-rust>use perseus::Template;
use sycamore::prelude::{view, Html, View};

#[perseus::template_rx]
pub fn about_page() -> View&LTG> {
    view! {
        p { "About." }
        a(href = "") { "Index" }
    }
}

pub fn get_template&LTG: Html>() -> Template&LTG> {
    Template::new("about").template(about_page)
}

</code></pre><h2>Conclusion</h2><p>Authentication in Perseus is fairly easy to implement, easier than in many other frameworks, though there are a few hurdles to get over and patterns to understand that will make your code more idiomatic. In future, nearly all this will likely be handled automatically by a plugin or library, which would enable more rapid and efficient development of complex apps. For now though, authentication must be built manually into Perseus apps.</div></main></div><div data-hk=2.19 class=row-start-2><footer data-hk=7.0 class="w-full flex justify-center py-5 bg-black text-white"><p data-hk=7.1 class="mx-5 text-center"><span data-hk=7.2>© <a href=https://github.com/arctic-hen7 class=underline>arctic-hen7</a> 2021-2023, see license <a href=https://github.com/framesurge/perseus/blob/main/LICENSE class=underline>here</a>.</span></footer></div></div></div></main><script data-hk=0.0 src=.perseus/static/prism.js defer></script><script data-hk=0.1>window.Prism.highlightAll();</script></div><div id=__perseus_popup_error></div>