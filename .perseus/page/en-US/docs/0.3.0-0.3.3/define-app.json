{"state":{"content":"<h1><code>define_app!</code></h1>\n<p>The core of Perseus is how it interacts with the CLI, which acts as the engine that runs your code. The bridge between these two systems is the <code>define_app!</code> macro, which accepts a number of options that define your app.</p>\n<p>The smallest this can reasonably get is a fully self-contained app (taken from <a href=\"https://github.com/framesurge/perseus/tree/main/examples/tiny/src/lib.rs\">here</a>):</p>\n<pre><code class=\"language-rust\">use perseus::{define_app, ErrorPages, Template};\nuse sycamore::view;\ndefine_app! {\n    templates: [\n        Template::&lt;G&gt;::new(&quot;index&quot;).template(|_| {\n            view! {\n                p { &quot;Hello World!&quot; }\n            }\n        })\n    ],\n    error_pages: ErrorPages::new(|url, status, err, _| {\n        view! {\n            p { (format!(&quot;An error with HTTP code {} occurred at '{}': '{}'.&quot;, status, url, err)) }\n        }\n    })\n}\n\n</code></pre>\n<p>In a more complex app though, this macro still remains very manageable (taken from <a href=\"https://github.com/framesurge/perseus/tree/main/examples/showcase/src/lib.rs\">here</a>):</p>\n<pre><code class=\"language-rust\">mod error_pages;\nmod templates;\n\nuse perseus::define_app;\n\ndefine_app! {\n    templates: [\n        crate::templates::index::get_template::&lt;G&gt;(),\n        crate::templates::about::get_template::&lt;G&gt;(),\n        crate::templates::new_post::get_template::&lt;G&gt;(),\n        crate::templates::post::get_template::&lt;G&gt;(),\n        crate::templates::ip::get_template::&lt;G&gt;(),\n        crate::templates::time_root::get_template::&lt;G&gt;(),\n        crate::templates::time::get_template::&lt;G&gt;(),\n        crate::templates::amalgamation::get_template::&lt;G&gt;()\n    ],\n    error_pages: crate::error_pages::get_error_pages(),\n    locales: {\n        default: &quot;en-US&quot;,\n        other: [&quot;fr-FR&quot;, &quot;es-ES&quot;]\n    }\n}\n\n</code></pre>\n<h2>Parameters</h2>\n<p>Here's a list of everything you can provide to the macro and what each one does (note that the order of these matters):</p>\n<ul>\n<li><code>root</code> (optional) -- the HTML <code>id</code> to which your app will be rendered, the default is <code>root</code>; this MUST be reflected in your <code>index.html</code> file as an exact replication (spacing and all) of <code>&lt;div id=&quot;root-id-here&quot;&gt;&lt;/div&gt;</code> (replacing <code>root-id-here</code> with the value of this property)</li>\n<li><code>templates</code> -- defines a list of your templates in which order is irrelevant</li>\n<li><code>error_pages</code> -- defines an instance of <code>ErrorPages</code>, which tells Perseus what to do on an error (like a <em>404 Not Found</em>)</li>\n<li><code>locales</code> (optional) -- defines options for i18n (internationalization), this shouldn't be specified for apps not using i18n\n<ul>\n<li><code>default</code> -- the default locale of your app (e.g. <code>en-US</code>)</li>\n<li><code>other</code> -- a list of the other locales your app supports</li>\n</ul>\n</li>\n<li><code>static_aliases</code> (optional) -- a list of aliases to static files in your project (e.g. for a favicon)</li>\n<li><code>plugins</code> (optional) -- a list of plugins to add to extend Perseus (see <a href=\"https://framesurge.sh/perseus/en-US/docs/0.3.0-0.3.3/plugins/intro\">here</a>)</li>\n<li><code>dist_path</code> (optional) -- a custom path to distribution artifacts (this is relative to <code>.perseus/</code>!)</li>\n<li><code>mutable_store</code> (optional) -- a custom mutable store</li>\n<li><code>translations_manager</code> (optional) -- a custom translations manager</li>\n</ul>\n<p><strong>WARNING:</strong> if you try to include something from outside the current directory in <code>static_aliases</code>, <strong>no part of your app will load</strong>! If you could include such content, you might end up serving <code>/etc/passwd</code>, which would be a major security risk.</p>\n<h2>Other Files</h2>\n<p>There's only one other file that the <code>define_app!</code> macro expects to exist: <code>index.html</code>. Note that any content in the <code>&lt;head&gt;</code> of this will be on every page, above anything inserted by the template.</p>\n<p>Here's an example of this file (taken from <a href=\"https://github.com/framesurge/perseus/blob/main/examples/basic/index.html\">here</a>):</p>\n<pre><code class=\"language-html\">&lt;!DOCTYPE html&gt;\n&lt;html lang=&quot;en&quot;&gt;\n    &lt;head&gt;\n        &lt;meta charset=&quot;UTF-8&quot; /&gt;\n        &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot; /&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\n        &lt;div id=&quot;root&quot;&gt;&lt;/div&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n\n</code></pre>\n","current_version":"0.3.0-0.3.3","manifest":{"0.1.x":{"docs_rs":"0.1","git":"v0.1.4","state":"outdated"},"0.2.x":{"docs_rs":"0.2","git":"v0.2.3","state":"outdated"},"0.3.0-0.3.3":{"docs_rs":"0.3.3","git":"v0.3.3","state":"outdated"},"0.3.4":{"docs_rs":"0.3","git":"v0.3.6","state":"outdated"},"0.4.x":{"docs_rs":"0.4","git":"HEAD","state":"stable"}},"sidebar_content":"<h1>Introduction</h1>\n<ul>\n<li><a href=\"https://framesurge.sh/perseus/en-US/docs/0.3.0-0.3.3/intro\">Introduction</a>\n<ul>\n<li><a href=\"https://framesurge.sh/perseus/en-US/docs/0.3.0-0.3.3/what-is-perseus\">What is Perseus?</a></li>\n<li><a href=\"https://framesurge.sh/perseus/en-US/docs/0.3.0-0.3.3/hello-world\">Hello World!</a></li>\n</ul>\n</li>\n<li><a href=\"https://framesurge.sh/perseus/en-US/docs/0.3.0-0.3.3/second-app\">Your Second App</a></li>\n</ul>\n<hr />\n<h1>Reference</h1>\n<ul>\n<li><a href=\"https://framesurge.sh/perseus/en-US/docs/0.3.0-0.3.3/define-app\"><code>define_app!</code></a></li>\n<li><a href=\"https://framesurge.sh/perseus/en-US/docs/0.3.0-0.3.3/views\">Writing Views</a></li>\n<li><a href=\"https://framesurge.sh/perseus/en-US/docs/0.3.0-0.3.3/debugging\">Debugging</a></li>\n<li><a href=\"https://framesurge.sh/perseus/en-US/docs/0.3.0-0.3.3/templates/intro\">Templates and Routing</a>\n<ul>\n<li><a href=\"https://framesurge.sh/perseus/en-US/docs/0.3.0-0.3.3/templates/metadata-modification\">Modifying the <code>&lt;head&gt;</code></a></li>\n<li><a href=\"https://framesurge.sh/perseus/en-US/docs/0.3.0-0.3.3/templates/setting-headers\">Modifying HTTP Headers</a></li>\n</ul>\n</li>\n<li><a href=\"https://framesurge.sh/perseus/en-US/docs/0.3.0-0.3.3/error-pages\">Error Pages</a></li>\n<li><a href=\"https://framesurge.sh/perseus/en-US/docs/0.3.0-0.3.3/static-content\">Static Content</a></li>\n<li><a href=\"https://framesurge.sh/perseus/en-US/docs/0.3.0-0.3.3/i18n/intro\">Internationalization</a>\n<ul>\n<li><a href=\"https://framesurge.sh/perseus/en-US/docs/0.3.0-0.3.3/i18n/defining\">Defining Translations</a></li>\n<li><a href=\"https://framesurge.sh/perseus/en-US/docs/0.3.0-0.3.3/i18n/using\">Using Translations</a></li>\n<li><a href=\"https://framesurge.sh/perseus/en-US/docs/0.3.0-0.3.3/i18n/translations-managers\">Translations Managers</a></li>\n<li><a href=\"https://framesurge.sh/perseus/en-US/docs/0.3.0-0.3.3/i18n/other-engines\">Other Translation Engines</a></li>\n</ul>\n</li>\n<li><a href=\"https://framesurge.sh/perseus/en-US/docs/0.3.0-0.3.3/strategies/intro\">Rendering Strategies</a>\n<ul>\n<li><a href=\"https://framesurge.sh/perseus/en-US/docs/0.3.0-0.3.3/strategies/build-state\">Build State</a></li>\n<li><a href=\"https://framesurge.sh/perseus/en-US/docs/0.3.0-0.3.3/strategies/build-paths\">Build Paths</a></li>\n<li><a href=\"https://framesurge.sh/perseus/en-US/docs/0.3.0-0.3.3/strategies/request-state\">Request State</a></li>\n<li><a href=\"https://framesurge.sh/perseus/en-US/docs/0.3.0-0.3.3/strategies/revalidation\">Revalidation</a></li>\n<li><a href=\"https://framesurge.sh/perseus/en-US/docs/0.3.0-0.3.3/strategies/incremental\">Incremental Generation</a></li>\n<li><a href=\"https://framesurge.sh/perseus/en-US/docs/0.3.0-0.3.3/strategies/amalgamation\">State Amalgamation</a></li>\n</ul>\n</li>\n<li><a href=\"https://framesurge.sh/perseus/en-US/docs/0.3.0-0.3.3/hydration\">Hydration</a></li>\n<li><a href=\"https://framesurge.sh/perseus/en-US/docs/0.3.0-0.3.3/cli\">CLI</a>\n<ul>\n<li><a href=\"https://framesurge.sh/perseus/en-US/docs/0.3.0-0.3.3/ejecting\">Ejecting</a></li>\n<li><a href=\"https://framesurge.sh/perseus/en-US/docs/0.3.0-0.3.3/snooping\">Snooping</a></li>\n</ul>\n</li>\n<li><a href=\"https://framesurge.sh/perseus/en-US/docs/0.3.0-0.3.3/testing/intro\">Testing</a>\n<ul>\n<li><a href=\"https://framesurge.sh/perseus/en-US/docs/0.3.0-0.3.3/testing/checkpoints\">Checkpoints</a></li>\n<li><a href=\"https://framesurge.sh/perseus/en-US/docs/0.3.0-0.3.3/testing/fantoccini-basics\">Fantoccini Basics</a></li>\n<li><a href=\"https://framesurge.sh/perseus/en-US/docs/0.3.0-0.3.3/testing/manual\">Manual Testing</a></li>\n</ul>\n</li>\n<li><a href=\"https://framesurge.sh/perseus/en-US/docs/0.3.0-0.3.3/styling\">Styling</a></li>\n<li><a href=\"https://framesurge.sh/perseus/en-US/docs/0.3.0-0.3.3/server-communication\">Communicating with a Server</a></li>\n<li><a href=\"https://framesurge.sh/perseus/en-US/docs/0.3.0-0.3.3/stores\">Stores</a></li>\n<li><a href=\"https://framesurge.sh/perseus/en-US/docs/0.3.0-0.3.3/exporting\">Static Exporting</a></li>\n<li><a href=\"https://framesurge.sh/perseus/en-US/docs/0.3.0-0.3.3/plugins/intro\">Plugins</a>\n<ul>\n<li><a href=\"https://framesurge.sh/perseus/en-US/docs/0.3.0-0.3.3/plugins/functional\">Functional Actions</a></li>\n<li><a href=\"https://framesurge.sh/perseus/en-US/docs/0.3.0-0.3.3/plugins/control\">Control Actions</a></li>\n<li><a href=\"https://framesurge.sh/perseus/en-US/docs/0.3.0-0.3.3/plugins/using\">Using Plugins</a></li>\n<li><a href=\"https://framesurge.sh/perseus/en-US/docs/0.3.0-0.3.3/plugins/tinker\">The <code>tinker</code> Action</a></li>\n<li><a href=\"https://framesurge.sh/perseus/en-US/docs/0.3.0-0.3.3/plugins/writing\">Writing Plugins</a></li>\n<li><a href=\"https://framesurge.sh/perseus/en-US/docs/0.3.0-0.3.3/plugins/security\">Security Considerations</a></li>\n<li><a href=\"https://framesurge.sh/perseus/en-US/docs/0.3.0-0.3.3/plugins/publishing\">Publishing Plugins</a></li>\n</ul>\n</li>\n<li><a href=\"https://framesurge.sh/perseus/en-US/docs/0.3.0-0.3.3/deploying/intro\">Deploying</a>\n<ul>\n<li><a href=\"https://framesurge.sh/perseus/en-US/docs/0.3.0-0.3.3/deploying/serverful\">Server Deployment</a></li>\n<li><a href=\"https://framesurge.sh/perseus/en-US/docs/0.3.0-0.3.3/deploying/serverless\">Serverless Deployment</a></li>\n<li><a href=\"https://framesurge.sh/perseus/en-US/docs/0.3.0-0.3.3/deploying/size\">Optimizing Code Size</a></li>\n<li><a href=\"https://framesurge.sh/perseus/en-US/docs/0.3.0-0.3.3/deploying/relative-paths\">Relative Paths</a></li>\n<li><a href=\"https://framesurge.sh/perseus/en-US/docs/0.3.0-0.3.3/deploying/docker\">Docker Deployment</a></li>\n</ul>\n</li>\n<li><a href=\"https://framesurge.sh/perseus/en-US/docs/0.3.0-0.3.3/updating\">Migrating from v0.2.x</a></li>\n<li><a href=\"https://framesurge.sh/perseus/en-US/docs/0.3.0-0.3.3/pitfalls-and-bugs\">Common Pitfalls and Known Bugs</a></li>\n</ul>\n<hr />\n<h1>Advanced</h1>\n<ul>\n<li><a href=\"https://framesurge.sh/perseus/en-US/docs/0.3.0-0.3.3/advanced/intro\">Under the Hood</a>\n<ul>\n<li><a href=\"https://framesurge.sh/perseus/en-US/docs/0.3.0-0.3.3/advanced/arch\">Architecture</a></li>\n<li><a href=\"https://framesurge.sh/perseus/en-US/docs/0.3.0-0.3.3/advanced/initial-loads\">Initial Loads</a></li>\n<li><a href=\"https://framesurge.sh/perseus/en-US/docs/0.3.0-0.3.3/advanced/subsequent-loads\">Subsequent Loads</a></li>\n<li><a href=\"https://framesurge.sh/perseus/en-US/docs/0.3.0-0.3.3/advanced/routing\">Routing</a></li>\n</ul>\n</li>\n<li><a href=\"https://framesurge.sh/perseus/en-US/docs/0.3.0-0.3.3/advanced/define_app\"><code>define_app</code> in Detail</a></li>\n</ul>\n","status":"Outdated","title":"`define_app!`"},"head":"<title>`define_app!` | Perseus Docs</title><link rel=stylesheet href=.perseus/static/styles/markdown.css><link rel=stylesheet href=.perseus/static/styles/docs_links_markdown.css><link rel=stylesheet href=.perseus/static/prism.css>"}